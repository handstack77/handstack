const getGlobal=()=>{if("undefined"!=typeof globalThis)return globalThis;if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;if(void 0!==this)return this;throw new Error("전역 객체를 찾을 수 없습니다")},globalRoot=getGlobal();globalRoot.devicePlatform="browser","AndroidScript"in globalRoot?globalRoot.devicePlatform="android":"webkit"in globalRoot?globalRoot.devicePlatform="ios":"process"in globalRoot&&"object"==typeof module&&(globalRoot.devicePlatform="node");class Module{constructor(e){e&&this.extend(e)}concreate(){}extend(o,t){if(1<arguments.length){const n=this[o];if(n&&"function"==typeof t&&(!n.valueOf||n.valueOf()!==t.valueOf())&&/\bbase\b/.test(t)){const r=t.valueOf();(t=(...e)=>{var t=this.base||Module.prototype.base,e=(this.base=n,r.apply(this,e));return this.base=t,e}).valueOf=e=>"object"===e?t:r,t.toString=Module.toString}"config"===o?this[o]=(e=>{const t={};for(const n of e)for(const o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o]);return t})([this[o],t]):this[o]=t}else if(o){let n=Module.prototype.extend;Module.prototyping||"function"==typeof this||(n=this.extend||n);const s={toSource:null},e=["constructor","toString","valueOf","concreate"];e.forEach((e,t)=>{!Module.prototyping&&0===t||o[e]===s[e]||n.call(this,e,o[e])});for(const i in o)!s[i]&&Object.prototype.hasOwnProperty.call(o,i)&&n.call(this,i,o[i]);const a=o.concreate;a&&a.call(this,o)}return this}base(){}static extend(e,t){Module.prototyping=!0;const n=new this,o=(n.extend(e),n.base=()=>{},delete Module.prototyping,n.constructor),r=n.constructor=function(...e){if(!Module.prototyping)if(this.constructing||this.constructor===r)this.constructing=!0,o.apply(this,e),delete this.constructing;else if(null!=e[0])return(e[0].extend||Module.prototype.extend).call(e[0],n)};return r.ancestor=this,r.extend=this.extend,r.each=this.each,r.implement=this.implement,r.prototype=n,r.toString=this.toString,r.valueOf=e=>"object"===e?r:o.valueOf(),r.extend(t),"function"==typeof r.init&&r.init(),r}static each(e,t,n){if("function"==typeof t&&0!==t.length)for(const o in e)Object.prototype.hasOwnProperty.call(e,o)&&"object"==typeof e[o]&&null!==e[o]&&t.apply(e[o],n)}static implement(...e){return e.forEach(e=>{"function"==typeof e?e(this.prototype):this.prototype.extend(e)}),this}static toString(){return String(this.valueOf())}}Module.ancestor=Object,Module.version="v2025.3.12";const syn={Module:Module};var fs,path,LocalStorage,moduleLogDirectory,options,logger;syn.Config={SystemID:"HANDSTACK",ApplicationID:"HDS",ProjectID:"SYS",SystemVersion:"1.0.0",TransactionTimeout:18e4,HostName:"WebClient",UIEventLogLevel:"Verbose",IsLocaleTranslations:!1,LocaleAssetUrl:"/assets/shared/language/",AssetsCachingID:"cache-id",IsClientCaching:!0,IsDebugMode:!1,IsBundleLoad:!1,ContractRequestPath:"view",TenantAppRequestPath:"app",SharedAssetUrl:"/assets/shared/",IsApiFindServer:!1,DiscoveryApiServerUrl:"",ReportServer:"",FileManagerServer:"http://localhost:8000",FindClientIPServer:"/checkip",FindGlobalIDServer:"",FileServerType:"L",FileBusinessIDSource:"None",CookiePrefixName:"HandStack",Environment:"Development",DomainAPIServer:{ServerID:"SERVERD01",ServerType:"D",Protocol:"http",IP:"localhost",Port:"8000",Path:"/transact/api/transaction/execute",ClientIP:"localhost"},Program:{ProgramName:"ack",ProgramVersion:"1.0.0",LanguageID:"ko",LocaleID:"ko-KR",BranchCode:""},Transaction:{ProtocolVersion:"001",SimulationType:"P",DataFormat:"J",MachineTypeID:"WEB",EncryptionType:"P",EncryptionKey:"G",CompressionYN:"N"},EnvironmentSetting:{Application:{LoaderPath:"/js/syn.domain.js"}}},syn.module=Module,globalRoot.syn=syn,"undefined"!=typeof module&&module.exports&&(module.exports=syn),!function(e){"use strict";const a=e.$cryptography||new syn.module,s=new TextEncoder,i=new TextDecoder;a.extend({base64Encode(e){if("node"===globalRoot.devicePlatform)return Buffer.from(e,"utf8").toString("base64");try{var t=s.encode(String(e));return btoa(String.fromCharCode(...t))}catch(e){return syn.$l.eventLog("$c.base64Encode","Base64 인코딩 실패: "+e,"Error"),null}},base64Decode(e){if("node"===globalRoot.devicePlatform)return Buffer.from(e,"base64").toString("utf8");try{var t=atob(String(e)),n=new Uint8Array([...t].map(e=>e.charCodeAt(0)));return i.decode(n)}catch(e){return syn.$l.eventLog("$c.base64Encode","Base64 디코딩 실패: "+e,"Error"),null}},utf8Encode(e){if("string"!=typeof e)throw new TypeError("매개변수가 문자열이 아닙니다.");try{return s.encode(e)}catch(e){syn.$l.eventLog("$c.base64Encode","UTF-8 인코딩 실패: "+e,"Error")}return null},utf8Decode(e){if("string"!=typeof e)throw new TypeError("매개변수가 UTF-8 문자열이 아닙니다.");try{return i.decode(this.convertToBuffer(e.split(",").map(Number)))}catch(e){syn.$l.eventLog("$c.base64Encode","UTF-8 디코딩 실패: "+e,"Error")}return null},convertToBuffer(t){var e=new ArrayBuffer(t.length);let n=new Uint8Array(e);for(let e=0;e<t.length;e++)n[e]=t[e];return e},isWebCryptoSupported(){return!!e.crypto?.subtle},padKey(e,t){if("string"!=typeof e)return null;let n=s.encode(e);if(n.length>=t)return n.slice(0,t);const o=new Uint8Array(t);return o.set(n),o},async generateHMAC(e,t){e=s.encode(e),t=s.encode(t),e=await crypto.subtle.importKey("raw",e,{name:"HMAC",hash:"SHA-256"},!1,["sign"]),e=await crypto.subtle.sign("HMAC",e,t);return Array.from(new Uint8Array(e)).map(e=>e.toString(16).padStart(2,"0")).join("")},async verifyHMAC(e,t,n){return await a.generateHMAC(e,t)===n},async generateRSAKey(){return await window.crypto.subtle.generateKey({name:"RSA-OAEP",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:"SHA-256"},!0,["encrypt","decrypt"])},async exportCryptoKey(e,t){let n="";var o=1==(t=$string.toBoolean(t))?"PUBLIC":"PRIVATE",t=await window.crypto.subtle.exportKey(1==t?"spki":"pkcs8",e),e=String.fromCharCode.apply(null,new Uint8Array(t)),t=window.btoa(e);const r=(n=`-----BEGIN ${o} KEY-----
${t}
-----END ${o} KEY-----`).split("\n");return(n=r.map(e=>e.match(/.{1,64}/g).join("\n"))).join("\n")},async importCryptoKey(e,t){var n=1==(t=$string.toBoolean(t))?"PUBLIC":"PRIVATE",e=e.substring(`-----BEGIN ${n} KEY-----`.length,e.length-`-----END ${n} KEY-----`.length).replaceAll("\n",""),n=window.atob(e),e=syn.$l.stringToArrayBuffer(n);return await crypto.subtle.importKey(1==t?"spki":"pkcs8",e,{name:"RSA-OAEP",hash:"SHA-256"},!0,1==t?["encrypt"]:["decrypt"])},async rsaEncode(e,t){e=s.encode(e),t=await crypto.subtle.encrypt({name:"RSA-OAEP"},t,e);return a.base64Encode(new Uint8Array(t))},async rsaDecode(e,t){e=new Uint8Array(a.base64Decode(e).split(",").map(Number)),t=await crypto.subtle.decrypt({name:"RSA-OAEP"},t,e);return i.decode(t)},generateIV(e,t){let n;return t=t||16,n=e&&"$RANDOM$"==e.toUpperCase()?window.crypto.getRandomValues(new Uint8Array(t)):(e=e||"",a.padKey(e,t))},async aesEncode(e,t,n,o){t=t||"",o=o||256;var r="AES-GCM"===(n=n||"AES-CBC")?12:16,r=a.generateIV(t,r),e=s.encode(e),t=await window.crypto.subtle.importKey("raw",a.padKey(t,o/8),{name:n},!1,["encrypt"]),o=await window.crypto.subtle.encrypt({name:n,iv:r},t,e);return{iv:a.base64Encode(r),encrypted:a.base64Encode(new Uint8Array(o))}},async aesDecode(e,t,n,o){let r=null;var s;return t=t||"",n=n||"AES-CBC",o=o||256,e&&e.iv&&e.encrypted&&(s=new Uint8Array(a.base64Decode(e.iv).split(",").map(Number)),e=new Uint8Array(a.base64Decode(e.encrypted).split(",").map(Number)),t=await window.crypto.subtle.importKey("raw",a.padKey(t,o/8),{name:n},!1,["decrypt"]),o=await window.crypto.subtle.decrypt({name:n,iv:s},t,e),r=i.decode(o)),r},async sha(e,t){t=t||"SHA-1";e=s.encode(e),t=await crypto.subtle.digest(t,e);return Array.from(new Uint8Array(t)).map(e=>e.toString(16).padStart(2,"0")).join("")},sha256(e){const b=(e,t)=>{var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n},w=(e,t)=>e>>>t|e<<32-t,D=(e,t)=>e>>>t;{var n=((n,e)=>{var o,r,s,a,i=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];const l=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],c=new Array(64);let u,d,g,f,p,y,m,h,$,v;n[e>>5]|=128<<24-e%32,n[15+(e+64>>9<<4)]=e;for(let t=0;t<n.length;t+=16){u=l[0],d=l[1],g=l[2],f=l[3],p=l[4],y=l[5],m=l[6],h=l[7];for(let e=0;e<64;e++)e<16?c[e]=n[e+t]:c[e]=b(b(b((a=c[e-2],w(a,17)^w(a,19)^D(a,10)),c[e-7]),(a=c[e-15],w(a,7)^w(a,18)^D(a,3))),c[e-16]),$=b(b(b(b(h,(a=p,w(a,6)^w(a,11)^w(a,25))),(o=p,r=y,s=m,o&r^~o&s)),i[e]),c[e]),v=b((r=u,w(r,2)^w(r,13)^w(r,22)),(o=u,s=d,r=g,o&s^o&r^s&r)),h=m,m=y,y=p,p=b(f,$),f=g,g=d,d=u,u=b($,v);l[0]=b(u,l[0]),l[1]=b(d,l[1]),l[2]=b(g,l[2]),l[3]=b(f,l[3]),l[4]=b(p,l[4]),l[5]=b(y,l[5]),l[6]=b(m,l[6]),l[7]=b(h,l[7])}return l})((t=>{const n=[];for(let e=0;e<8*t.length;e+=8)n[e>>5]|=(255&t.charCodeAt(e/8))<<24-e%32;return n})(e),8*e.length);const o="0123456789abcdef";let t="";for(let e=0;e<4*n.length;e++)t+=o.charAt(n[e>>2]>>8*(3-e%4)+4&15)+o.charAt(n[e>>2]>>8*(3-e%4)&15);return t}},encrypt(e,t){if(null==e)return null;var n=t?t.length:6,t=this.sha256(t||"").substring(0,n),n=((t,n)=>{const o=[];var r=n.length;for(let e=0;e<t.length;e++){var s=e%r,s=t.charCodeAt(e)+n.charCodeAt(s);o.push(s)}return JSON.stringify(o)})(String(e),t);return encodeURIComponent(this.base64Encode(n+"."+t))},decrypt(e,n){if(null==e)return null;try{const t=this.base64Decode(decodeURIComponent(e));if(!t||-1===t.indexOf("."))return null;var[o,r]=t.split(".");{var s=o;var a=r;var i=n?n.length:6;if(a!==this.sha256(n||"").substring(0,i))return"";var l=JSON.parse(s),c=a.length;let t="";for(let e=0;e<l.length;e++){var u=e%c,u=l[e]-a.charCodeAt(u);t+=String.fromCharCode(u)}return t;return}}catch(e){return syn.$l.eventLog("$c.decrypt",e,"Error"),null}},LZString:function(){const m=String.fromCharCode,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",r={};function s(t,e){if(!r[t]){r[t]={};for(let e=0;e<t.length;e++)r[t][t.charAt(e)]=e}return r[t][e]}const a={compressToBase64(e){if(null==e)return"";var t=a._compress(e,6,e=>n.charAt(e));switch(t.length%4){case 0:return t;case 1:return t+"===";case 2:return t+"==";case 3:return t+"="}},decompressFromBase64(t){return null==t?"":""==t?null:a._decompress(t.length,32,e=>s(n,t.charAt(e)))},compressToUTF16(e){return null==e?"":a._compress(e,15,e=>m(e+32))+" "},decompressFromUTF16(t){return null==t?"":""==t?null:a._decompress(t.length,16384,e=>t.charCodeAt(e)-32)},compressToUint8Array(e){const n=a.compress(e),o=new Uint8Array(2*n.length);for(let e=0,t=n.length;e<t;e++){var r=n.charCodeAt(e);o[2*e]=r>>>8,o[2*e+1]=r%256}return o},decompressFromUint8Array(n){if(null==n)return a.decompress(null);if(!n?.length)return a.decompress("");const o=new Array(n.length/2);for(let e=0,t=o.length;e<t;e++)o[e]=256*n[2*e]+n[2*e+1];const e=o.map(e=>m(e));return a.decompress(e.join(""))},compressToEncodedURIComponent(e){return null==e?"":a._compress(e,6,e=>o.charAt(e))},decompressFromEncodedURIComponent(t){return null==t?"":""==t?null:(t=t.replace(/ /g,"+"),a._decompress(t.length,32,e=>s(o,t.charAt(e))))},compress(e){return a._compress(e,16,e=>m(e))},_compress(e,t,n){if(null==e)return"";let o,r,s={},a={},i,l,c="",u=2,d=3,g=2,f=[],p=0,y=0,m;for(m=0;m<e.length;m+=1)if(i=e.charAt(m),Object.prototype.hasOwnProperty.call(s,i)||(s[i]=d++,a[i]=!0),l=c+i,Object.prototype.hasOwnProperty.call(s,l))c=l;else{if(Object.prototype.hasOwnProperty.call(a,c)){if(c.charCodeAt(0)<256){for(o=0;o<g;o++)p<<=1,y==t-1?(y=0,f.push(n(p)),p=0):y++;for(r=c.charCodeAt(0),o=0;o<8;o++)p=p<<1|1&r,y==t-1?(y=0,f.push(n(p)),p=0):y++,r>>=1}else{for(r=1,o=0;o<g;o++)p=p<<1|r,y==t-1?(y=0,f.push(n(p)),p=0):y++,r=0;for(r=c.charCodeAt(0),o=0;o<16;o++)p=p<<1|1&r,y==t-1?(y=0,f.push(n(p)),p=0):y++,r>>=1}0==--u&&(u=Math.pow(2,g),g++),delete a[c]}else for(r=s[c],o=0;o<g;o++)p=p<<1|1&r,y==t-1?(y=0,f.push(n(p)),p=0):y++,r>>=1;0==--u&&(u=Math.pow(2,g),g++),s[l]=d++,c=String(i)}if(""!==c){if(Object.prototype.hasOwnProperty.call(a,c)){if(c.charCodeAt(0)<256){for(o=0;o<g;o++)p<<=1,y==t-1?(y=0,f.push(n(p)),p=0):y++;for(r=c.charCodeAt(0),o=0;o<8;o++)p=p<<1|1&r,y==t-1?(y=0,f.push(n(p)),p=0):y++,r>>=1}else{for(r=1,o=0;o<g;o++)p=p<<1|r,y==t-1?(y=0,f.push(n(p)),p=0):y++,r=0;for(r=c.charCodeAt(0),o=0;o<16;o++)p=p<<1|1&r,y==t-1?(y=0,f.push(n(p)),p=0):y++,r>>=1}0==--u&&(u=Math.pow(2,g),g++),delete a[c]}else for(r=s[c],o=0;o<g;o++)p=p<<1|1&r,y==t-1?(y=0,f.push(n(p)),p=0):y++,r>>=1;0==--u&&(u=Math.pow(2,g),g++)}for(r=2,o=0;o<g;o++)p=p<<1|1&r,y==t-1?(y=0,f.push(n(p)),p=0):y++,r>>=1;for(;;){if(p<<=1,y==t-1){f.push(n(p));break}y++}return f.join("")},_decompress(e,t,n){const o=[];let r=4,s=4,a=3,i="",l=[],c,u,d,g,f,p;const y={val:n(0),position:t,index:1};for(let e=0;e<3;e+=1)o[e]=e;for(u=0,g=Math.pow(2,2),f=1;f!=g;)d=y.val&y.position,y.position>>=1,0==y.position&&(y.position=t,y.val=n(y.index++)),u|=(0<d?1:0)*f,f<<=1;switch(u){case 0:for(u=0,g=Math.pow(2,8),f=1;f!=g;)d=y.val&y.position,y.position>>=1,0==y.position&&(y.position=t,y.val=n(y.index++)),u|=(0<d?1:0)*f,f<<=1;p=m(u);break;case 1:for(u=0,g=Math.pow(2,16),f=1;f!=g;)d=y.val&y.position,y.position>>=1,0==y.position&&(y.position=t,y.val=n(y.index++)),u|=(0<d?1:0)*f,f<<=1;p=m(u);break;case 2:return""}for(o[3]=p,c=p,l.push(p);;){if(y.index>e)return"";for(u=0,g=Math.pow(2,a),f=1;f!=g;)d=y.val&y.position,y.position>>=1,0==y.position&&(y.position=t,y.val=n(y.index++)),u|=(0<d?1:0)*f,f<<=1;switch(p=u){case 0:for(u=0,g=Math.pow(2,8),f=1;f!=g;)d=y.val&y.position,y.position>>=1,0==y.position&&(y.position=t,y.val=n(y.index++)),u|=(0<d?1:0)*f,f<<=1;o[s++]=m(u),p=s-1,r--;break;case 1:for(u=0,g=Math.pow(2,16),f=1;f!=g;)d=y.val&y.position,y.position>>=1,0==y.position&&(y.position=t,y.val=n(y.index++)),u|=(0<d?1:0)*f,f<<=1;o[s++]=m(u),p=s-1,r--;break;case 2:return l.join("")}if(0==r&&(r=Math.pow(2,a),a++),o[p])i=o[p];else{if(p!==s)return null;i=c+c.charAt(0)}l.push(i),o[s++]=c+i.charAt(0),r--,c=i,0==r&&(r=Math.pow(2,a),a++)}}};return a}()}),e.$cryptography=syn.$c=a}(globalRoot),!function(e){"use strict";const a=e.$date||new syn.module,t=e.$array||new syn.module,s=e.$string||new syn.module,n=e.$number||new syn.module,w=e.$object||new syn.module;Function.prototype.clone||(Function.prototype.clone=function(){function e(){return n.apply(this,arguments)}var t,n=this;for(t in this)e[t]=this[t];return e}),Object.assign||(Object.assign=function(e){if(null===e||"object"!=typeof e)return e;var t,n=e.constructor();for(t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}),Object.entries||(Object.entries=function(e){for(var t=Object.keys(e),n=t.length,o=new Array(n);n--;)o[n]=[t[n],e[t[n]]];return o}),String.prototype.trim||(String.prototype.trim=function(){for(var e=this.replace(/^\s+/,""),t=e.length-1;0<t;t--)if(/\S/.test(e.charAt(t))){e=e.substring(0,t+1);break}return e}),String.prototype.includes||(String.prototype.includes=function(e){return-1!==this.indexOf(e)}),String.prototype.format||(String.prototype.format=function(){for(var e=this,t=0,n=arguments.length;t<n;t++)var o=new RegExp("{"+t.toString()+"+?}","g"),e=e.replace(o,arguments[t]);return e}),"node"!==globalRoot.devicePlatform&&(Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(e){var t=this;do{if(t.matches(e))return t}while(null!==(t=t.parentElement||t.parentNode)&&1===t.nodeType);return null})),a.extend({interval:Object.freeze({year:31536e6,week:6048e5,day:864e5,hour:36e5,minute:6e4,second:1e3}),now(){return new Date},clone(e){if(e instanceof Date)return new Date(e.getTime());if(w.isString(e))try{return new Date(e)}catch{}return null},isBetween(e,t,n){if(!(e instanceof Date&&t instanceof Date&&n instanceof Date))return!1;e=e.getTime();return e>=t.getTime()&&e<=n.getTime()},equals(e,t){return e instanceof Date&&t instanceof Date&&e.getTime()===t.getTime()},equalDay(e,t){return e instanceof Date&&t instanceof Date&&e.toDateString()===t.toDateString()},isToday(e){return e instanceof Date&&this.equalDay(e,new Date)},toString(e,t,n={}){let o=e;if(w.isString(e)&&this.isDate(e)&&(o=new Date(e)),!w.isDate(o)||isNaN(o))return"";var r=o.getFullYear(),s=o.getMonth()+1,a=o.getDate(),i=o.getHours(),l=o.getMinutes(),c=o.getSeconds(),u=o.getMilliseconds(),d=["일","월","화","수","목","금","토"][o.getDay()],g=(e,t=2)=>String(e).padStart(t,"0");switch(t){case"d":return`${r}-${g(s)}-`+g(a);case"t":return`${g(i)}:${g(l)}:`+g(c);case"a":return`${r}-${g(s)}-${g(a)} ${g(i)}:${g(l)}:`+g(c);case"i":return`${r}-${g(s)}-${g(a)}T${g(i)}:${g(l)}:${g(c)}.${g(u,3)} Z`;case"f":return""+r+g(s)+g(a)+g(i)+g(l)+g(c)+g(u,3);case"s":return""+g(i)+g(l)+g(c)+g(u,3);case"n":return`${r}년 ${g(s)}월 ${g(a)}일 (${d})`;case"nt":return`${r}년 ${g(s)}월 ${g(a)}일 (${d}), ${g(i)}:${g(l)}:`+g(c);case"mdn":return`${g(s)}월 ${g(a)}일`;case"w":var f={weekStartSunday:!0,...n},p=o.getFullYear(),y=o.getMonth()+1,m=this.weekOfMonth(p,y,f.weekStartSunday),h=parseInt(""+p+g(y)+g(a),10);for(let e=0;e<m.length;e++){const b=m[e];var $=parseInt(b.weekStartDate.replace(/-/g,""),10),v=parseInt(b.weekEndDate.replace(/-/g,""),10);if($<=h&&h<=v)return e+1}return 1;case"wn":return d;case"m":return g(s);case"y":return String(r);case"ym":return r+"-"+g(s);default:return g(a)}},addSecond(e,t){return e instanceof Date&&!isNaN(t)?new Date(e.getTime()+t*this.interval.second):null},addMinute(e,t){return e instanceof Date&&!isNaN(t)?new Date(e.getTime()+t*this.interval.minute):null},addHour(e,t){return e instanceof Date&&!isNaN(t)?new Date(e.getTime()+t*this.interval.hour):null},addDay(e,t){if(!(e instanceof Date)||isNaN(t))return null;const n=new Date(e.getTime());return n.setDate(e.getDate()+t),n},addWeek(e,t){return this.addDay(e,7*t)},addMonth(e,t){if(!(e instanceof Date)||isNaN(t))return null;const n=new Date(e.getTime());e=e.getMonth()+t;return n.setMonth(e),n.getMonth()!==(e%12+12)%12&&n.setDate(0),n},addYear(e,t){if(!(e instanceof Date)||isNaN(t))return null;const n=new Date(e.getTime());return n.setFullYear(e.getFullYear()+t),1===e.getMonth()&&29===e.getDate()&&29!==n.getDate()&&n.setDate(0),n},getFirstDate(e){return e instanceof Date?new Date(e.getFullYear(),e.getMonth(),1):null},getLastDate(e){return e instanceof Date?new Date(e.getFullYear(),e.getMonth()+1,0):null},diff(e,t,n="day"){return e instanceof Date&&t instanceof Date?"month"===n?12*(t.getFullYear()-e.getFullYear())+(t.getMonth()-e.getMonth()):this.interval[n]?(t=t.getTime()-e.getTime(),Math.floor(t/this.interval[n])):0:0},toTicks(e){return e instanceof Date?1e4*e.getTime()+621355968e9:0},isDate(e){if(e instanceof Date&&!isNaN(e))return!0;if(w.isString(e)){var t=new Date(e);if(!isNaN(t))return!0;if(/^\d{4}-\d{2}-\d{2}$/.test(e)){t=e.split("-");if(1<=t[1]&&t[1]<=12&&1<=t[2]&&t[2]<=31)return e=new Date(t[0],t[1]-1,t[2]),!isNaN(e)}}return!1},isISOString(e){return w.isString(e)&&$validation.regexs.isoDate.test(e)},weekOfMonth(e,t,n=!0){const o=[];var r="boolean"==typeof n?n:"true"===n,n=t||(new Date).getMonth()+1,s=r?7:8;const a=new Date(e,n-1),i=new Date(a.getFullYear(),a.getMonth(),1),l=new Date(a.getFullYear(),a.getMonth()+1,0);var c=(e,t)=>String(e).padStart(t,"0");let u=!0;var d=i.getDay();for(let e=1;e<=6&&l.getMonth()===i.getMonth();e++){const g={};i.getDay()<=1&&(0!==i.getDay()||r||i.setDate(i.getDate()+1),g.weekStartDate=`${i.getFullYear()}-${c(i.getMonth()+1,2)}-`+c(i.getDate(),2)),d<s?u?((s-i.getDay()==1||1<s-i.getDay())&&i.setDate(i.getDate()+(s-i.getDay())-1),u=!1):i.setDate(i.getDate()+6):i.setDate(i.getDate()+(6-i.getDay())+s),g.weekStartDate&&(g.weekEndDate=`${i.getFullYear()}-${c(i.getMonth()+1,2)}-`+c(i.getDate(),2),o.push(g)),i.setDate(i.getDate()+1)}return o},timeAgo(e){let t;if(w.isString(e)&&this.isDate(e))t=new Date(e);else{if(!(e instanceof Date))return"";t=e}var n=Math.floor((new Date-t)/1e3);if(n<0)return"in the future";for(const r of[{label:"년",seconds:31536e3},{label:"달",seconds:2592e3},{label:"주",seconds:604800},{label:"일",seconds:86400},{label:"시간",seconds:3600},{label:"분",seconds:60},{label:"초",seconds:1}]){var o=Math.floor(n/r.seconds);if(1<=o)return""+o+r.label+" 전"}return"방금 전"}}),e.$date=a,s.extend({toValue(e,t=""){return null==e?String(t):String(e)},br(e){return String(e).replace(/(\r\n|\r|\n)/g,"<br />")},interpolate(t,e,n={}){if(null==e||"string"!=typeof t)return t;const{defaultValue:r=null,separator:o="\n"}=n,s=(e,o)=>e.replace(/#\{([^{}]*)\}/g,(e,t)=>{const n=o[t];return void 0!==n&&null!==n?Array.isArray(n)?n.join(", "):n instanceof Date?a.toString(n,"a"):String(n):null!==r?r:e});return Array.isArray(e)?e.map(e=>s(t,e)).join(o):"object"==typeof e?s(t,e):t},isNullOrEmpty(e){return null==e||""===String(e).trim()},sanitizeHTML(e,t=!1){if("string"!=typeof e)return"";let n=e.replace(/<[^>]*>/g,"").replace(/&nbsp;|&#160;/gi," ");return(n=t?n.replace(/[.,;:'"!?%#$*_+=\-\\/()[\]{}<>~`“”’]/g,""):n).trim()},cleanHTML(e){if("string"!=typeof e||"node"===globalRoot.devicePlatform)return e;try{const t=document.createElement("div"),n=(t.innerHTML=e.replace(/<br\s*\/?>/gi,"\n"),t.textContent||t.innerText||"");return n.replace(/\s{2,}/g," ")}catch{return e}},toHtmlChar(e,t="&'<>!\"#%()*+,./;=@[]^`{|}~"){if("string"!=typeof e)return"";const n={"&":"&amp;","'":"&#39;","<":"&lt;",">":"&gt;",'"':"&quot;","!":"&#33;","#":"&#35;","%":"&#37;","(":"&#40;",")":"&#41;","*":"&#42;","+":"&#43;",",":"&#44;",".":"&#46;","/":"&#47;",";":"&#59;","=":"&#61;","@":"&#64;","[":"&#91;","\\":"&#92;","]":"&#93;","^":"&#94;","`":"&#96;","{":"&#123;","|":"&#124;","}":"&#125;","~":"&#126;"};t=t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"),t=new RegExp(`[${t}]`,"g");return e.replace(t,e=>n[e]||e)},toCharHtml(e,t="&(amp|#39|lt|gt|quot|#33|#35|#37|#40|#41|#42|#43|#44|#46|#47|#59|#61|#64|#91|#92|#93|#94|#96|#123|#124|#125|#126);"){if("string"!=typeof e)return"";const n={"&amp;":"&","&#39;":"'","&lt;":"<","&gt;":">","&quot;":'"',"&#33;":"!","&#35;":"#","&#37;":"%","&#40;":"(","&#41;":")","&#42;":"*","&#43;":"+","&#44;":",","&#46;":".","&#47;":"/","&#59;":";","&#61;":"=","&#64;":"@","&#91;":"[","&#92;":"\\","&#93;":"]","&#94;":"^","&#96;":"`","&#123;":"{","&#124;":"|","&#125;":"}","&#126;":"~"};t=new RegExp(t,"g");return e.replace(t,e=>n[e]||e)},length(t){if("string"!=typeof t)return 0;let n=0;for(let e=0;e<t.length;e++){var o=t.charCodeAt(e);n+=o<=127?1:o<=2047?2:o<=65535?3:4}return n},split(e,t=","){return"string"==typeof e?e.split(t).filter(e=>""!==e.trim()):[]},isNumber(e){if(null==e||""===String(e).trim())return!1;const t=String(e).trim();return!!/^-?(\d+|\d{1,3}(,\d{3})*)(\.\d+)?$/.test(t)&&(e=t.replace(/,/g,""),!isNaN(parseFloat(e)))},toNumber(e){var t=0;try{t=parseFloat(0===(1==w.isNullOrUndefined(e)?0:e)||""===e?"0":e.toString().replace(/,/g,""))}catch(e){syn.$l.eventLog("$string.toNumber",e,"Warning")}return t},capitalize(e){return"string"==typeof e?e.replace(/\b([a-z])/g,e=>e.toUpperCase()):""},toJson(e,t={}){if("string"!=typeof e)return[];var{delimiter:n=",",newline:t="\n",meta:o={}}=t;const r=e.split(t);if(r.length<1)return[];var s=r[0].split(n).map(e=>e.trim().replace(/^"|"$/g,"")),a=s.length;const i=[];for(let e=1;e<r.length;e++){const u=r[e];if(u.trim()){const d=u.split(n),g={};for(let e=0;e<a;e++){var l=s[e],c=d[e]?.trim()??"";g[l]=o[l]?this.toParseType(c,o[l]):this.toDynamic(c)}i.push(g)}}return i},toParameterObject(e){return(e.match(/([^?:;]+)(:([^;]*))/g)||[]).reduce(function(e,t){return e[t.slice(0,t.indexOf(":")).replace("@","")]=t.slice(t.indexOf(":")+1),e},{})},toUrlObject(e){return((e=e||"").match(/([^?=&]+)(=([^&]*))/g)||[]).reduce(function(e,t){return e[t.slice(0,t.indexOf("="))]=t.slice(t.indexOf("=")+1),e},{})},toBoolean(e){return"true"===e||"True"===e||"TRUE"===e||"Y"===e||"1"==e},toDynamic(e,t=!1){const n=String(e).trim();if(t&&""===n)return null;if(""===n)return"";if(/^(true|y|1)$/i.test(n))return!0;if(/^(false|n|0)$/i.test(n))return!1;t=n.replace(/,/g,"");if($validation.regexs.float.test(t)){t=parseFloat(t);if(!isNaN(t))return t}if($validation.regexs.isoDate.test(n)){t=new Date(n);if(!isNaN(t))return t}return e},toParseType(e,t="string",n=!1){const o=String(e).trim();if(n&&""===o)return null;switch(String(t).toLowerCase()){case"string":return o;case"bool":case"boolean":return this.toBoolean(o);case"number":case"numeric":case"int":var r=o.replace(/,/g,"");return $validation.regexs.float.test(r)?(r=parseFloat(r),isNaN(r)?n?null:0:r):n?null:0;case"date":case"datetime":return $validation.regexs.isoDate.test(o)?(r=new Date(o),isNaN(r)?null:r):a.isDate(o)?(r=new Date(o),isNaN(r)?null:r):null;default:return o}},toNumberString(e){return"string"==typeof e?e.trim().replace(/[^\d.-]/g,""):""},toCurrency(e,t,n={}){e=this.toNumber(e);if(isNaN(e))return null;if(t&&"undefined"!=typeof Intl&&Intl.NumberFormat){n={style:"currency",currency:"KRW",...n};try{return new Intl.NumberFormat(t,n).format(e)}catch(e){syn.$l.eventLog("$string.toCurrency",`Intl formatting error for locale ${t}: `+e,"Warning")}}const[o,r]=String(e).split(".");n=o.replace(/\B(?=(\d{3})+(?!\d))/g,",");return r?n+"."+r:n},pad(e,t,n="0",o=!0){e=String(e),t=Math.max(0,t-e.length),n=String(n).repeat(t);return s.toBoolean(o)?n+e:e+n}}),e.$string=s,t.extend({distinct(e){return Array.isArray(e)?[...new Set(e)]:[]},sort(e,n=!0){return Array.isArray(e)?[...e].sort((e,t)=>e<t?n?-1:1:t<e?n?1:-1:0):[]},objectSort(e,n,o=!0){return Array.isArray(e)&&n?[...e].sort((e,t)=>{e=e[n],t=t[n];return e<t?o?-1:1:t<e?o?1:-1:0}):[]},groupBy(e,t){if(!Array.isArray(e))return{};const o="function"==typeof t?t:e=>e[t];return e.reduce((e,t)=>{var n=o(t);return(e[n]=e[n]||[]).push(t),e},{})},shuffle(e){if(!Array.isArray(e))return[];const t=[...e];for(let e=t.length-1;0<e;e--){var n=Math.floor(Math.random()*(e+1));[t[e],t[n]]=[t[n],t[e]]}return t},addAt(e,t,n){if(!Array.isArray(e))return[];const o=[...e];e=Math.max(0,Math.min(t,o.length));return o.splice(e,0,n),o},removeAt(e,t){if(!Array.isArray(e))return[];const n=[...e];return 0<=t&&t<n.length&&n.splice(t,1),n},contains(e,t){return Array.isArray(e)&&e.includes(t)},merge(e,t,n=(e,t)=>e===t){if(!Array.isArray(e)||!Array.isArray(t))return e||[];const o=[...e];return t.forEach(t=>{o.some(e=>n(t,e))||o.push(t)}),o},union(e,t){return Array.isArray(e)&&Array.isArray(t)?[...new Set([...e,...t])]:[]},difference(e,t){if(!Array.isArray(e)||!Array.isArray(t))return[];const n=new Set(t);return e.filter(e=>!n.has(e))},intersect(e,t){if(!Array.isArray(e)||!Array.isArray(t))return[];const n=new Set(t);return e.filter(e=>n.has(e))},symmetryDifference(e,t){if(!Array.isArray(e)||!Array.isArray(t))return[];const n=new Set(e),o=new Set(t);e=e.filter(e=>!o.has(e)),t=t.filter(e=>!n.has(e));return[...e,...t]},getValue(e,t,n,o,r){var s,a=null;return e&&0<e.length&&(s=null,(s=o?e.find(function(e){return e[o]==t}):e.find(function(e){return e.ParameterName==t||e.parameterName==t}))&&(a=r?s[r]:s.Value||s.value)),a=null==a?void 0===n?"":n:a},ranks(e,n=!1){if(!Array.isArray(e))return[];const t=e.map((e,t)=>({value:s.toNumber(e),index:t})),o=(t.sort((e,t)=>n?e.value-t.value:t.value-e.value),new Array(e.length));let r=1;for(let e=0;e<t.length;e++)0<e&&t[e].value!==t[e-1].value&&(r=e+1),o[t[e].index]=r;return o},split(e,t=","){return"string"!=typeof e?[]:e.split(t).map(e=>e.trim()).filter(e=>0<e.length)}}),e.$array=t,n.extend({duration(e){if("number"!=typeof e||isNaN(e))return{};var e=Math.abs(e),t=Math.floor(e/1e3),n=Math.floor(t/60),o=Math.floor(n/60),r=Math.floor(o/24);return{year:Math.floor(r/365),week:Math.floor(r%365/7),day:r,hour:o%24,minute:n%60,second:t%60,millisecond:e%1e3}},toByteString(e,t=3,n=!0){if("number"!=typeof e||isNaN(e))return`0${n?" ":""}B`;var o=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],r=Math.abs(e);if(r<1)return e+(n?" ":"")+o[0];var s=Math.min(Math.floor(Math.log(r)/Math.log(1024)),o.length-1);const a=r/Math.pow(1024,s);return(e<0?"-":"")+Number(a.toPrecision(t))+(n?" ":"")+o[s]},random(e=0,t=10){var n=Math.ceil(Math.min(e,t)),e=Math.floor(Math.max(e,t));return Math.floor(Math.random()*(e-n+1))+n},isRange(e,t,n){return"number"==typeof e&&t<=e&&e<=n},limit(e,t,n){return"number"==typeof e?Math.max(t,Math.min(e,n)):t},percent(e,t,n=0){if("number"!=typeof e||"number"!=typeof t||0===t)return 0;n=Math.pow(10,n);return Math.round(100*e/t*n)/n}}),e.$number=n,w.extend({isNullOrUndefined(e){return null==e},toCSV(e,t={}){if("object"!=typeof e||null===e)return null;const{scopechar:a="/",delimiter:o=",",newline:r="\n"}=t,n=Array.isArray(e)?e:[e];if(0===n.length)return"";const i=[],l=new Set,s=(n.forEach(e=>{const t={},n=[[e,""]];for(;0<n.length;){const[r,s]=n.pop();var o;null===r||"object"!=typeof r||Array.isArray(r)||r instanceof Date?(o=s||"value",l.add(o),t[o]=Array.isArray(r)||r instanceof Date?JSON.stringify(r):r??""):Object.entries(r).forEach(([e,t])=>{n.push([t,s?""+s+a+e:e])})}i.push(t)}),Array.from(l).sort()),c=s.join(o);t=i.map(n=>s.map(e=>{let t=String(n[e]??"");return t=t.includes(o)||t.includes(r)||t.includes('"')?`"${t.replace(/"/g,'""')}"`:t}).join(o));return[c,...t].join(r)},toParameterString(e){return e&&"object"==typeof e?Object.entries(e).map(([e,t])=>`@${e}:`+s.toValue(s.toDynamic(t),"")).join(";"):""},getType(e){var t=typeof e;return"object"==t?null===e?"null":Array.isArray(e)?"array":e instanceof Date?"date":"node"!==globalRoot.devicePlatform&&e instanceof HTMLElement?"element":"object":t},defaultValue(e){switch(String(e).toLowerCase()){case"boolean":return!1;case"function":return()=>{};case"null":return null;case"number":case"numeric":case"int":return 0;case"object":return{};case"date":case"datetime":return new Date;case"string":return"";case"symbol":return Symbol();case"undefined":return;case"array":return[];default:return""}},isDefined(e){return void 0!==e},isNull(e){return null===e},isArray(e){return Array.isArray(e)},isDate(e){return e instanceof Date&&!isNaN(e.getTime())},isString(e){return"string"==typeof e},isNumber(e){return"number"==typeof e&&!isNaN(e)},isFunction(e){return"function"==typeof e},isObject(e){return"object"==typeof e&&null!==e},isObjectEmpty(e){return"object"==typeof e&&null!==e&&0===Object.keys(e).length&&e.constructor===Object},isBoolean(e){if("boolean"==typeof e)return!0;if(null==e)return!1;e=String(e).toUpperCase();return["TRUE","FALSE","Y","N","1","0"].includes(e)},isEmpty(e){return null==e||(!("number"!=typeof e||!isNaN(e))||("string"==typeof e&&""===e.trim()||(!(!Array.isArray(e)||0!==e.length)||!("object"!=typeof e||e instanceof Date||0!==Object.keys(e).length||e.constructor!==Object))))},clone(t,e=!0){if("object"!=typeof t||null===t)return t;if(t instanceof Date)return new Date(t.getTime());if(Array.isArray(t))return e?t.map(e=>this.clone(e,!0)):[...t];if(t instanceof HTMLElement&&"function"==typeof t.cloneNode)return t.cloneNode(e);if("object"!=typeof t)return t;{const n=Object.create(Object.getPrototypeOf(t));return e?Object.keys(t).forEach(e=>{n[e]=this.clone(t[e],!0)}):Object.assign(n,t),n}},extend(r,e,s=!0){return e&&"object"==typeof e&&Object.entries(e).forEach(([e,t])=>{var n=r[e],o=Object.prototype.hasOwnProperty.call(r,e);!this.isObject(t)||null===t||this.isDate(t)||Array.isArray(t)||t instanceof HTMLElement?!s&&o||(r[e]=this.clone(t,!1)):(o&&this.isObject(n)||(r[e]={}),this.extend(r[e],t,s))}),r},excludeKeys(e,t){return Object.fromEntries(Object.entries(e).filter(([e])=>!t.includes(e)))}}),e.$object=w}(globalRoot),!function(u){"use strict";const t=u.$library||new syn.module;let d=null;"node"!==globalRoot.devicePlatform&&(d=u.document,"function"!=typeof u.CustomEvent&&((e=function(e,t={}){const n=d.createEvent("CustomEvent");var{bubbles:t=!1,cancelable:o=!1,detail:r=void 0}=t;return n.initCustomEvent(e,t,o,r),n}).prototype=u.Event.prototype,u.CustomEvent=e));var e=(()=>{const s=[];return Object.freeze({add(t,n,o,e={}){return!(!t||!n||"function"!=typeof o)&&(!s.some(e=>e.el===t&&e.type===n&&e.handler===o)&&(s.push({el:t,type:n,handler:o,options:e}),!0))},remove(t,n,o){var e=s.length;for(let e=s.length-1;0<=e;e--){var r=s[e];r.el===t&&r.type===n&&r.handler===o&&s.splice(e,1)}return s.length<e},removeAllForElement(t){for(let e=s.length-1;0<=e;e--)s[e].el===t&&s.splice(e,1)},findByArgs(t,n,o){return s.filter(e=>e.el===t&&e.type===n&&e.handler===o)},findAllByArgs(t,n){return s.filter(e=>e.el===t&&e.type===n)},getAll(){return[...s]},flush(){this.getAll().forEach(({el:e,type:t,handler:n,options:o={}})=>{e.removeEventListener&&e.removeEventListener(t,n,o)}),s.length=0}})})();if(t.extend({prefixs:Object.freeze(["webkit","moz","ms","o",""]),eventMap:Object.freeze({mousedown:"touchstart",mouseup:"touchend",mousemove:"touchmove"}),events:e,concreate(){"node"!==globalRoot.devicePlatform&&d.addEventListener("DOMContentLoaded",()=>{this.addEvent(u,"unload",()=>this.events.flush())},{once:!0})},guid(){if(u.crypto?.randomUUID)return u.crypto.randomUUID();if("undefined"!=typeof crypto&&crypto.getRandomValues){const e=new Uint8Array(16),t=(crypto.getRandomValues(e),e[6]=15&e[6]|64,e[8]=63&e[8]|128,Array.from(e,e=>e.toString(16).padStart(2,"0")));return`${t.slice(0,4).join("")}-${t.slice(4,6).join("")}-${t.slice(6,8).join("")}-${t.slice(8,10).join("")}-`+t.slice(10,16).join("")}return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;const n="x"===e?t:3&t|8;return n.toString(16)})},getElement(e){return $object.isString(e)?this.get(e):e},stringToArrayBuffer(e){return encoder.encode(e).buffer},arrayBufferToString(e){if(!(e instanceof ArrayBuffer))return"";try{return decoder.decode(e)}catch(e){return syn.$l.eventLog("$c.base64Encode","ArrayBuffer 에서 문자열 변환 실패: "+e,"Error"),""}},random(t=8,e=!1){let n="";var o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";if(u.crypto?.getRandomValues){var r=new Uint32Array(t);u.crypto.getRandomValues(r);for(let e=0;e<t;e++)n+=o[r[e]%o.length]}else for(let e=0;e<t;e++)n+=o.charAt(Math.floor(Math.random()*o.length));return e?n.toLowerCase():n.toUpperCase()},execPrefixFunc(t,n){if(t&&n)for(const o of this.prefixs){let e=n;if(void 0!==t[e=o?o+n.charAt(0).toUpperCase()+n.slice(1):n.charAt(0).toLowerCase()+n.slice(1)])return"function"==typeof t[e]?t[e]():t[e]}},dispatchClick(e,t={}){if((e=this.getElement(e))&&"node"!==globalRoot.devicePlatform&&d?.createEvent)try{var n={bubbles:!0,cancelable:!0,view:u,detail:1,screenX:0,screenY:0,clientX:0,clientY:0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,button:0,relatedTarget:null,...t},o=new MouseEvent("click",n);e.dispatchEvent(o)}catch(e){syn.$l.eventLog("$l.dispatchClick","클릭 디스패치 오류: "+e,"Warning")}},addEvent(e,t,n,o={}){return(e=this.getElement(e))&&"function"==typeof n&&(o={capture:!1,once:!1,passive:!1,...o},this.events.add(e,t,n,o)&&e.addEventListener(t,n,o),$object.isString(t)&&"resize"===t.toLowerCase()&&n()),this},addEvents(e,n,o,r={}){if("function"==typeof o){let t=[];$object.isString(e)?t=this.querySelectorAll(e):Array.isArray(e)?(e.forEach(e=>{$object.isString(e)?t=t.concat(this.querySelectorAll(e)):$object.isObject(e)&&t.push(e)}),t=[...new Set(t)]):$object.isObject(e)&&(t=[e]),t.forEach(e=>this.addEvent(e,n,o,r))}return this},addLive(n,e,o,t={}){return"node"!==globalRoot.devicePlatform&&this.addEvent(d,e,e=>{var t=e.target.closest(n);t&&(o.call(t,e),e.preventDefault(),e.stopPropagation())},t),this},removeEvent(e,t,n,o={}){return(e=this.getElement(e))&&"function"==typeof n&&(o={capture:!1,once:!1,passive:!1,...o},this.events.remove(e,t,n)&&e.removeEventListener(t,n,o)),this},hasEvent(e,t,n){return!!(e=this.getElement(e))&&("function"==typeof n?0<this.events.findByArgs(e,t,n).length:0<this.events.findAllByArgs(e,t).length)},trigger(t,n,o){if(!(t=this.getElement(t)))return!1;let r=!1;const e=this.events.findAllByArgs(t,n);return e.forEach(({handler:e})=>{try{e.call(t,o),r=!0}catch(e){syn.$l.eventLog("$l.trigger",`"${n}" 이벤트 핸들러 실행 오류: `+e,"Warning")}}),r},triggerEvent(t,n,o){if((t=this.getElement(t))&&"node"!==globalRoot.devicePlatform)try{let e;"function"==typeof u.CustomEvent?e=new CustomEvent(n,{detail:o,bubbles:!0,cancelable:!0}):d.createEvent&&(e=d.createEvent("HTMLEvents")).initEvent(n,!0,!0),e&&t.dispatchEvent(e)}catch(e){syn.$l.eventLog("$l.triggerEvent",`"${n}" 이벤트 디스패치 오류: `+e,"Warning")}return this},getValue(t,e=""){if($this?.context?.synControls){const o=$this.context.synControls,r=o.find(e=>e.id===t||e.id===t+"_hidden");if(r?.module){const s=$webform.getControlModule(r.module);if(s?.getValue)try{return s.getValue(r.id.replace("_hidden",""),r)??e}catch(e){syn.$l.eventLog("$l.getValue",`"${t}" 값 가져오기 오류: `+e,"Warning")}}else if(d){var n=this.get(t);if(n)return n.value??e}}return e},get(...e){if("node"===globalRoot.devicePlatform||!d)return 1===e.length?null:[];var t=e.map(e=>$object.isString(e)?d.getElementById(e):null).filter(e=>null!==e);return 1===e.length?t[0]||null:t},querySelector(...e){if("node"===globalRoot.devicePlatform||!d)return 1===e.length?null:[];const o=[];return e.forEach(t=>{if($object.isString(t))try{if(t.startsWith("//")||t.startsWith(".//")){const n=d.evaluate(t,d,null,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null);for(let e=0;e<n.snapshotLength;e++)o.push(n.snapshotItem(e))}else{var e=d.querySelector(t);e&&o.push(e)}}catch(e){syn.$l.eventLog("$l.querySelector",`잘못된 셀렉터 "${t}": `+e,"Warning")}}),1===e.length?o[0]||null:o},getTagName(...e){if("node"===globalRoot.devicePlatform||!d)return[];let t=[];return e.forEach(e=>{$object.isString(e)&&(t=t.concat(Array.from(d.getElementsByTagName(e))))}),t},querySelectorAll(...e){if("node"===globalRoot.devicePlatform||!d)return[];let o=[];return e.forEach(t=>{if($object.isString(t))try{if(t.startsWith("//")||t.startsWith(".//")){const n=d.evaluate(t,d,null,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null);for(let e=0;e<n.snapshotLength;e++)o.push(n.snapshotItem(e))}else o=o.concat(Array.from(d.querySelectorAll(t)))}catch(e){syn.$l.eventLog("$l.querySelectorAll",`잘못된 셀렉터 "${t}": `+e,"Warning")}}),o},toEnumValue(e,t){if(!$object.isObject(e))return null;e=Object.entries(e).find(([e])=>e===t);return e?e[1]:null},toEnumText(e,t){if(!$object.isObject(e))return null;e=Object.entries(e).find(([,e])=>e===t);return e?e[0]:null},prettyTSD(t,n=!1){if("string"!=typeof t)return t;try{var o=t.split("＾");let e;const r={delimiter:"｜",newline:"↵"};return e=1<o.length?(r.meta=$string.toParameterObject(o[0]),$string.toJson(o[1],r)):$string.toJson(o[0],r),$string.toBoolean(n)?JSON.stringify(e,null,2):e}catch(e){return syn.$l.eventLog("$l.prettyTSD","TSD 파싱 오류: "+e,"Error"),"TSD 파싱 오류: "+e.message}},text2Json(e,t=",",n="\n"){if("string"!=typeof e)return[];const o=e.trim().split(n);if(o.length<2)return[];const r=o[0].split(t).map(e=>e.trim());return o.slice(1).map(e=>{const o=e.split(t);return r.reduce((e,t,n)=>(e[t]=o[n]?.trim()??"",e),{})}).filter(e=>0<Object.keys(e).length)},json2Text(e,t,o=",",r="\n"){if(!Array.isArray(e)||!Array.isArray(t))return"";const n=t.join(o);e=e.map(n=>t.map(e=>{let t=n[e]??"";return t=(t=String(t)).includes(o)||t.includes(r)||t.includes('"')?`"${t.replace(/"/g,'""')}"`:t}).join(o));return[n,...e].join(r)},nested2Flat(e,t,n,o="items"){var r,s=[];return e?(1==$object.isNullOrUndefined(o)&&(o="items"),delete(r=$object.clone(e,!1))[o],r[n]=null,s.push(r),syn.$l.parseNested2Flat(e,s,t,n,o)):syn.$l.eventLog("$l.nested2Flat","필수 데이터 확인 필요","Warning"),s},parseNested2Flat(e,t,n,o,r="items"){var s=e[r=1==$object.isNullOrUndefined(r)?"items":r];if(e&&s)for(var a=0;a<s.length;a++){var i=s[a],l=$object.clone(i,!1);delete l[r],l[o]=e[n],t.push(l),i[r]&&0<i[r].length&&syn.$l.parseNested2Flat(i,t,n,o,r)}return null},flat2Nested(e,t,n,o="items"){var r,s=null;return e&&t&&n?(r=e.find(function(e){return null==e[n]}),e=syn.$l.parseFlat2Nested(e,r,[],t,n,o),r[o]=e[o],s=r):syn.$l.eventLog("$l.flat2Nested","필수 데이터 확인 필요","Warning"),s},parseFlat2Nested(e,t,n,o,r,s="items"){var a=e.filter(function(e){return e[r]==t[o]});if(0<a.length){n[s]||(n[s]=[]);for(var i=0;i<a.length;i++)n[s].push($object.clone(a[i])),syn.$l.parseFlat2Nested(e,a[i],n[s][i],o,r,s)}return n},findNestedByID(e,t,n,o="items"){if(e&&n)for(const s of Array.isArray(e)?e:[e]){if(s[n]==t)return s;if(Array.isArray(s[o])){var r=this.findNestedByID(s[o],t,n,o);if(r)return r}}return null},deepFreeze(t){return!t||"object"!=typeof t||Object.isFrozen(t)?t:(Object.getOwnPropertyNames(t).forEach(e=>{e=t[e];"object"==typeof e&&null!==e&&this.deepFreeze(e)}),Object.freeze(t))},createBlob(e,t){try{return new Blob([e],{type:t})}catch{try{const n=u.BlobBuilder||u.WebKitBlobBuilder||u.MozBlobBuilder||u.MSBlobBuilder;if(!n)throw new Error("BlobBuilder가 지원되지 않습니다.");const o=new n;return o.append(e.buffer||e),o.getBlob(t)}catch(e){return syn.$l.eventLog("$l.createBlob","Blob 생성 실패: "+e,"Error"),null}}},dataUriToBlob(e){if(!e||"string"!=typeof e||!e.startsWith("data:"))return null;try{const o=e.split(","),r=o[0].split(":")[1].split(";");var t=r[0];const s=(r.includes("base64")?atob:decodeURIComponent)(o[1]),a=new Array(s.length);for(let e=0;e<s.length;e++)a[e]=s.charCodeAt(e);var n=new Uint8Array(a);return new Blob([n],{type:t})}catch(e){return syn.$l.eventLog("$l.dataUriToBlob","Data URI -> Blob 변환 오류: "+e,"Warning"),null}},dataUriToText(e){if(!e||"string"!=typeof e||!e.startsWith("data:"))return null;try{const n=e.split(","),o=n[0].split(":")[1].split(";");var t=o[0];return{value:o.includes("base64")?$cryptography.base64Decode(n[1]):decodeURIComponent(n[1]),mime:t}}catch(e){return syn.$l.eventLog("$l.dataUriToText","Data URI -> Text 변환 오류: "+e,"Warning"),null}},blobToDataUri(e,t){if(e instanceof Blob&&"function"==typeof t){const n=new FileReader;n.onloadend=()=>{n.error?syn.$l.eventLog("$l.blobToDataUri","FileReader 오류: "+n.error,"Error"):t(n.result)},n.onerror=()=>{var e=n.error||new Error("알 수 없는 FileReader 오류");syn.$l.eventLog("$l.blobToDataUri","FileReader 오류: "+e,"Error")},n.readAsDataURL(e)}else syn.$l.eventLog("$l.blobToDataUri","잘못된 Blob 또는 콜백 함수가 제공되었습니다.","Warning"),t&&t(new Error("잘못된 입력값"),null)},blobToDownload(e,n){if("node"!==globalRoot.devicePlatform)if(e instanceof Blob&&n)if(u.navigator&&u.navigator.msSaveOrOpenBlob)try{u.navigator.msSaveOrOpenBlob(e,n)}catch(e){syn.$l.eventLog("$l.blobToDownload","msSaveOrOpenBlob 실패: "+e,"Error")}else{let t=null;try{t=URL.createObjectURL(e);const o=d.createElement("a");o.href=t,o.download=n,d.body.appendChild(o),o.click(),d.body.removeChild(o),setTimeout(()=>URL.revokeObjectURL(t),100)}catch(e){syn.$l.eventLog("$l.blobToDownload","다운로드 실패: "+e,"Error"),t&&URL.revokeObjectURL(t)}}else syn.$l.eventLog("$l.blobToDownload","잘못된 Blob 또는 파일 이름이 제공되었습니다.","Warning")},blobUrlToBlob(t,n){"function"!=typeof n?syn.$l.eventLog("$l.blobUrlToBlob","콜백 함수 확인 필요","Warning"):t&&"string"==typeof t?fetch(t).then(e=>{if(e.ok)return e.blob();throw new Error(`HTTP 오류! 상태: ${e.status} `+e.statusText)}).then(e=>n(e)).catch(e=>{syn.$l.eventLog("$l.blobUrlToBlob",`url: ${t}, 오류: `+e,"Warning")}):syn.$l.eventLog("$l.blobUrlToBlob","URL 확인 필요","Warning")},blobUrlToDataUri(e,t){"function"!=typeof t?syn.$l.eventLog("$l.blobUrlToDataUri","콜백 함수 확인 필요","Warning"):e&&"string"==typeof e?this.blobUrlToBlob(e,e=>{e?this.blobToDataUri(e,t):syn.$l.eventLog("$l.blobUrlToDataUri","URL에서 Blob 가져오기 실패","Warning")}):syn.$l.eventLog("$l.blobUrlToDataUri","URL 확인 필요","Warning")},async blobToBase64(e,s=!1){if(!(e instanceof Blob))return null;if("node"!==globalRoot.devicePlatform||"undefined"==typeof Buffer)return"undefined"!=typeof FileReader?new Promise((n,o)=>{const r=new FileReader;r.onloadend=()=>{if(r.error)o(r.error);else{const t=r.result;var e;s?(e=t.split(";base64,")[1]||null,n(e)):n(t)}},r.onerror=e=>o(e),r.readAsDataURL(e)}):null;try{var t=await e.arrayBuffer();const o=Buffer.from(t);var n=o.toString("base64");return s?n:`data:${e.type||"application/octet-stream"};base64,`+n}catch(e){return syn.$l.eventLog("$l.blobToBase64 (Node)","Blob -> Base64 변환 오류(Node): "+e,"Error"),null}},base64ToBlob(e,t="",n=512){if(!e||"string"!=typeof e)return null;try{const o=atob(e),r=[];for(let e=0;e<o.length;e+=n){const s=o.slice(e,e+n),a=new Array(s.length);for(let e=0;e<s.length;e++)a[e]=s.charCodeAt(e);r.push(new Uint8Array(a))}return new Blob(r,{type:t})}catch(e){return syn.$l.eventLog("$l.base64ToBlob","Base64 디코딩 또는 Blob 생성 실패: "+e,"Error"),null}},async blobToFile(e,t,n){if(!(e instanceof Blob))return null;n=n||e.type||"application/octet-stream";return new File([e],t||"blob-"+$date.toString(new Date,"f"),{type:n})},async fileToBase64(o){if("node"!==globalRoot.devicePlatform)return o instanceof File&&"undefined"!=typeof FileReader?new Promise((e,t)=>{const n=new FileReader;n.onloadend=()=>e(n.result),n.onerror=e=>t(e),n.readAsDataURL(o)}):(syn.$l.eventLog("$l.fileToBase64","잘못된 입력 또는 환경입니다.","Warning"),null);{const i=require("fs").promises,l=require("path"),c=require("node-fetch");try{let e,t="application/octet-stream";if("string"==typeof o&&(o.startsWith("http:")||o.startsWith("https:"))){const u=await c(o);if(!u.ok)throw new Error("HTTP 오류! 상태: "+u.status);t=u.headers.get("content-type")||t,e=Buffer.from(await u.arrayBuffer())}else{if("string"!=typeof o)throw new Error("Node.js에서 fileToBase64에 잘못된 입력 유형입니다.");var n=o,r=(e=await i.readFile(n),l.extname(n).toLowerCase()),s={".jpg":"image/jpeg",".jpeg":"image/jpeg",".png":"image/png",".gif":"image/gif",".pdf":"application/pdf",".txt":"text/plain",".html":"text/html",".json":"application/json"};t=s[r]||t}var a=e.toString("base64");return`data:${t};base64,`+a}catch(e){return syn.$l.eventLog("$l.fileToBase64 (Node)","파일 -> Base64 변환 오류(Node): "+e,"Error"),null}}},async fileToBlob(e){const t=await this.fileToBase64(e);if(!t)return null;e=t.match(/^data:(.+?);base64,(.+)$/);if(!e)return null;var n=e[1],e=e[2];return this.base64ToBlob(e,n)},async resizeImage(t,e){var n;if(!("node"!==globalRoot.devicePlatform&&t instanceof Blob&&t.type.startsWith("image/")))return n="node"===globalRoot.devicePlatform?"Node.js 환경에서는 이미지 크기 조정을 지원하지 않습니다.":"잘못된 입력: 이미지 Blob이 아닙니다.",syn.$l.eventLog("$l.resizeImage",n,"Warning"),Promise.reject(new Error(n));const l="number"==typeof e&&0<e?e:80;return new Promise((o,r)=>{const e=new FileReader,s=new Image,a=document.createElement("canvas"),i=a.getContext("2d");s.onload=()=>{let{width:t,height:n}=s;t>n?t>l&&(n=Math.round(n*(l/t)),t=l):n>l&&(t=Math.round(t*(l/n)),n=l),a.width=t,a.height=n,i.drawImage(s,0,0,t,n),a.toBlob(e=>{e?o({blob:e,width:t,height:n}):r(new Error("캔버스 -> Blob 변환 실패."))},"image/jpeg",.9)},s.onerror=()=>r(new Error("이미지 로드 실패")),e.onload=e=>s.src=e.target.result,e.onerror=()=>r(new Error("Blob 읽기 실패")),e.readAsDataURL(t)})},logLevel:Object.freeze({Verbose:0,Debug:1,Information:2,Warning:3,Error:4,Fatal:5}),start:Date.now(),eventLogTimer:null,eventLogCount:0,eventLog(e,t,n="Verbose"){var o=t instanceof Error?t.message:String(t),t=t instanceof Error?t.stack:void 0;let r;r="string"==typeof n&&this.logLevel.hasOwnProperty(n)?this.logLevel[n]:"number"==typeof n?n:this.logLevel.Verbose;n=syn.Config?.UIEventLogLevel||"Verbose",n=this.logLevel[n]??this.logLevel.Verbose;if(!(r<n)){const a=this.toEnumText(this.logLevel,r)||"Unknown",i=(Date.now()-this.start)/1e3;var n=i.toFixed(3),s=`${this.eventLogCount}@${n} [${a}] [${e}]`+" "+(t?o+`
`+t:o);if("node"===globalRoot.devicePlatform&&globalRoot.$logger){n=a.toLowerCase();"function"==typeof globalRoot.$logger[n]?globalRoot.$logger[n](s):globalRoot.$logger.trace(s),u.console&&console.log(s)}else if(u.console){switch(r){case this.logLevel.Error:case this.logLevel.Fatal:console.error(s);break;case this.logLevel.Warning:console.warn(s);break;case this.logLevel.Information:console.info(s);break;case this.logLevel.Debug:console.debug(s);break;default:console.log(s)}if(!0===syn.Config?.IsDebugMode&&"Development"===syn.Config?.Environment&&(r,this.logLevel.Warning),d&&!u.console){const l=d.createElement("div"),c=(l.textContent=s,d.getElementById("eventlogs"));c?(c.appendChild(l),clearTimeout(this.eventLogTimer),this.eventLogTimer=setTimeout(()=>{c.scrollTop=c.scrollHeight},10)):d.body?.appendChild(l)}if(u.bound?.browserEvent)try{u.bound.browserEvent("browser",{ID:"EventLog",Data:s},(e,t)=>{e&&console.log("browserEvent EventLog 콜백 오류: "+e)})}catch(e){console.log("bound.browserEvent 호출 오류: "+e)}}this.eventLogCount++}},getBasePath(e,t){if("node"!==globalRoot.devicePlatform)return e||t||"";const n=require("path");var o=process.cwd();let r="";return r=e?n.isAbsolute(e)?e:n.resolve(o,e):t?n.resolve(o,t):o},moduleEventLog(t,n,o,r="Verbose"){if("node"===globalRoot.devicePlatform&&t){var s="object"==typeof o?o.message:o,o="object"==typeof o?o.stack||JSON.stringify(o):o;let e=0;if(r&&!0===$object.isString(r)&&(e=syn.$l.logLevel[r]),!(syn.Config&&syn.Config.UIEventLogLevel&&syn.$l.logLevel[syn.Config.UIEventLogLevel]>e)){var r=syn.$l.toEnumText(syn.$l.logLevel,e),a=(new Date).getTime()-syn.$l.start,i=syn.$l.eventLogCount.toString()+"@"+(a/1e3).toString().format("0.000")+" ["+n+"] "+(s===o?s:o),a=syn.getModuleLibrary(t);if(a){const l=a.logger;switch(r){case"Debug":l.debug(i);break;case"Information":l.info(i);break;case"Warning":l.warn(i);break;case"Error":l.error(i);break;case"Fatal":l.fatal(i);break;default:l.trace(i)}globalRoot.console&&console.log(r+": "+i)}else console.log("ModuleID 확인 필요 - {0}".format(t));syn.$l.eventLogCount++}}}}),"node"===globalRoot.devicePlatform){const n=["addEvent","addEvents","addLive","removeEvent","hasEvent","trigger","triggerEvent","getValue","get","querySelector","getTagName","querySelectorAll","dispatchClick"];n.forEach(e=>{delete t[e]})}else{const o=["getBasePath","moduleEventLog"];o.forEach(e=>{delete t[e]})}u.$library=syn.$l=t}(globalRoot),!function(e){"use strict";const a=e.$request||new syn.module;let i=null;"node"!==globalRoot.devicePlatform&&(i=e.document),a.extend({params:{},path:"node"===globalRoot.devicePlatform?"":location.pathname,query(e,r){return r=r||location.href,function(){let e=r.split("?"),t=(1==e.length?e[0]:e[1]).split("&");for(let e=0;e<t.length;e++){var n=t[e].indexOf("="),o=t[e].substring(0,n),n=t[e].substring(n+1);syn.$r.params[o]=n}return syn.$r.params}()[e]},url(){var e=syn.$r.path.split("?");let t="";t=syn.$r.path+(0<syn.$r.path.length&&1<e.length?"&":"?");for(const n in a.params)"string"==typeof syn.$r.params[n]&&(t+=n+"="+syn.$r.params[n]+"&");return syn.Config&&0==$string.toBoolean(syn.Config.IsClientCaching)&&(t+="&noCache="+(new Date).getTime()),encodeURI(t.substring(0,t.length-1))},toQueryString(e,t){let n=e?Object.entries(e).reduce((e,t,n)=>{var o=t[0],t=t[1];return e+=`&${o}=`+$string.toValue(t,"")},""):"";return n=0==$string.isNullOrEmpty(n)&&1==$string.toBoolean(t)?"?"+n.substring(1):n},toUrlObject(e){return((e=e||location.href).match(/([^?=&]+)(=([^&]*))/g)||[]).reduce(function(e,t){return e[t.slice(0,t.indexOf("="))]=t.slice(t.indexOf("=")+1),e},{})},async isCorsEnabled(e){let t=!1;try{var n=await fetch(e,{method:"HEAD",timeout:200});0==(t=200<=n.status&&n.status<=299)&&syn.$l.eventLog("$w.isCorsEnabled","{0}, {1}:{2}".format(e,n.status,n.statusText),"Warning")}catch(e){syn.$l.eventLog("$w.isCorsEnabled",e.message,"Error")}return t},httpFetch(y){return new Proxy({},{get(e,p){return async function(e,t){if(-1==["send"].indexOf(p))return Promise.resolve({error:p+" 메서드 확인 필요"});t=syn.$w.argumentsExtend({method:"GET"},t);let n=null,o=null;if(0==$object.isNullOrUndefined(e)&&0==$object.isString(e)){if(t.method=t.method||"POST",1==$object.isNullOrUndefined(t.headers)&&(t.headers=new Headers,e instanceof FormData||t.headers.append("Content-Type",t.contentType||"application/json")),syn.Environment){var r=syn.Environment;if(r.Header)for(const l in r.Header)0==t.headers.has(l)&&t.headers.append(l,r.Header[l])}0==t.headers.has("OffsetMinutes")&&t.headers.append("OffsetMinutes",syn.$w.timezoneOffsetMinutes);const i={method:t.method,headers:t.headers,body:e instanceof FormData?e:JSON.stringify(e),redirect:"follow"};if(0==$object.isNullOrUndefined(t.timeout)){const c=new AbortController;o=setTimeout(()=>c.abort(),t.timeout),i.signal=c.signal}n=await fetch(y,i),o&&clearTimeout(o)}else{if(1==$object.isNullOrUndefined(t.headers)&&(t.headers=new Headers,t.headers.append("Content-Type",t.contentType||"application/json")),syn.Environment){var s=syn.Environment;if(s.Header)for(const d in s.Header)0==t.headers.has(d)&&t.headers.append(d,s.Header[d])}0==t.headers.has("OffsetMinutes")&&t.headers.append("OffsetMinutes",syn.$w.timezoneOffsetMinutes);const u={method:t.method,headers:t.headers,redirect:"follow"};if(0==$object.isNullOrUndefined(t.timeout)){const g=new AbortController;o=setTimeout(()=>g.abort(),t.timeout),u.signal=g.signal}n=await fetch(y,u),o&&clearTimeout(o)}let a={error:"요청 정보 확인 필요"};if(1==n.ok){const f=n.headers.get("Content-Type")||"";a=1==f.includes("application/json")?await n.json():1==f.includes("text/")?await n.text():await n.blob()}else a={error:`status: ${n.status}, text: `+await n.text()},syn.$l.eventLog("$r.httpFetch",""+a.error,"Error");return Promise.resolve(a)}}})},httpRequest(e,t,n,o,r){r=syn.$w.argumentsExtend({timeout:0,responseType:"text"},r),1==$object.isNullOrUndefined(n)&&(n={});const s=syn.$w.xmlHttp();s.open(e,t,!0),s.timeout=r.timeout,s.responseType=r.responseType,s.setRequestHeader("OffsetMinutes",syn.$w.timezoneOffsetMinutes);let a=null;if(0==$object.isNullOrUndefined(n.body)){const i=n.body;if("GET"==e.toUpperCase()){let e=t+(1<t.split("?").length?"&":"?");for(const l in i)e+=l+"="+i[l].toString()+"&";t=encodeURI(e.substring(0,e.length-1))}else{a=new FormData;for(const c in i)a.append(c,i[c].toString())}}else s.setRequestHeader("Content-Type",r.contentType||"application/json");if(!syn.$w.setServiceClientHeader||0!=syn.$w.setServiceClientHeader(s))if(o)s.onreadystatechange=function(){4===s.readyState&&(200!==s.status?0==s.status?syn.$l.eventLog("$r.httpRequest","X-Requested transport error","Fatal"):syn.$l.eventLog("$r.httpRequest","response status - {0}".format(s.statusText)+s.response,"Error"):o&&o({status:s.status,response:s.response}))},null==a?n!={}?s.send(JSON.stringify(n)):s.send():s.send(a);else{if(globalRoot.Promise)return new Promise(function(e){s.onload=function(){return e({status:s.status,response:s.response})},s.onerror=function(){return e({status:s.status,response:s.response})},null==a?n!={}?s.send(JSON.stringify(n)):s.send():s.send(a)});syn.$l.eventLog("$w.httpRequest","지원하지 않는 기능. 매개변수 확인 필요","Error")}},httpSubmit(e,t,n){if(0==i.forms.length)return!1;0<i.forms.length&&1==$object.isNullOrUndefined(t)&&(t=i.forms[0].id);const o=i.forms[t];if(!o)return!1;o.method=n||"POST",o.action=e,o.submit()},httpDataSubmit(t,e,n,o){o=syn.$w.argumentsExtend({timeout:0,responseType:"text"},o);const r=syn.$w.xmlHttp();if(r.open("POST",e,!0),r.timeout=o.timeout,r.responseType=o.responseType,r.setRequestHeader("OffsetMinutes",syn.$w.timezoneOffsetMinutes),!syn.$w.setServiceClientHeader||0!=syn.$w.setServiceClientHeader(r))if(n)r.onreadystatechange=function(){4===r.readyState&&(200!==r.status?0==r.status?syn.$l.eventLog("$r.httpDataSubmit","X-Requested transfort error","Fatal"):syn.$l.eventLog("$r.httpDataSubmit","response status - {0}".format(r.statusText)+r.response,"Error"):n&&n({status:r.status,response:r.response}))},r.send(t);else{if(globalThis.Promise)return new Promise(function(e){r.onload=function(){return e({status:r.status,response:r.response})},r.onerror=function(){return e({status:r.status,response:r.response})},r.send(t)});syn.$l.eventLog("$r.httpDataSubmit","지원하지 않는 기능. 매개변수 확인 필요","Error")}},createBlobUrl:globalRoot.URL&&"function"==typeof globalRoot.URL.createObjectURL&&globalRoot.URL.createObjectURL.bind(globalRoot.URL)||void 0!==globalRoot.webkitURL&&"function"==typeof globalRoot.webkitURL.createObjectURL&&globalRoot.webkitURL.createObjectURL.bind(globalRoot.webkitURL)||globalRoot.createObjectURL,revokeBlobUrl:globalRoot.URL&&"function"==typeof globalRoot.URL.revokeObjectURL&&globalRoot.URL.revokeObjectURL.bind(globalRoot.URL)||void 0!==globalRoot.webkitURL&&"function"==typeof globalRoot.webkitURL.revokeObjectURL&&globalRoot.webkitURL.revokeObjectURL.bind(globalRoot.webkitURL)||globalRoot.revokeObjectURL,getCookie(e){e=i.cookie.match(new RegExp("(?:^|; )"+e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return e?decodeURIComponent(e[1]):void 0},setCookie(e,t,n,o,r,s){return 1==$object.isNullOrUndefined(n)&&(n=new Date((new Date).getTime()+864e5)),1==$object.isNullOrUndefined(o)&&(o="/"),i.cookie=e+"="+encodeURI(t)+(n?";expires="+n.toUTCString():"")+(o?";path="+o:"")+(r?";domain="+r:"")+(s?";secure":""),a},deleteCookie(e,t,n){return syn.$r.getCookie(e)&&(i.cookie=e+"="+(t?";path="+t:"")+(n?";domain="+n:"")+";expires=Thu, 01-Jan-1970 00:00:01 GMT"),a}}),e.$request=syn.$r=a}(globalRoot),!function(context){"use strict";const $webform=context.$webform||new syn.module;let doc=null;if("node"!==globalRoot.devicePlatform&&($webform.context=context,$webform.document=context.document,doc=context.document),$webform.extend({localeID:"ko-KR",cookiePrefixName:"HandStack",timezoneOffsetMinutes:-(new Date).getTimezoneOffset(),method:"POST",isPageLoad:!1,transactionLoaderID:null,pageReadyTimeout:6e4,eventAddReady:"node"===globalRoot.devicePlatform?null:new CustomEvent("addready"),eventRemoveReady:"node"===globalRoot.devicePlatform?null:new CustomEvent("removeready"),mappingModule:!0,moduleReadyIntervalID:null,remainingReadyIntervalID:null,remainingReadyCount:0,defaultControlOptions:{value:"",dataType:"string",belongID:null,controlText:null,validators:["require","unique","numeric","ipaddress","email","date","url"],transactConfig:null,triggerConfig:null,getter:!1,setter:!1,bindingID:"",resourceKey:"",localeID:"ko-KR",required:!1,tooltip:""},setStorage(e,t,n=!1,o){var r,s=JSON.stringify(t);if("node"===globalRoot.devicePlatform)n?localStorage.setItem(e,s):(o=o??12e5,r=Date.now(),localStorage.setItem(e,JSON.stringify({value:t,expiry:r+o,ttl:o})));else{const a=n?localStorage:sessionStorage;a.setItem(e,s)}return this},getStorage(t,e=!1){if("node"===globalRoot.devicePlatform){if(e)return(n=localStorage.getItem(t))?JSON.parse(n):null;var n=localStorage.getItem(t);if(!n)return null;try{var o=JSON.parse(n),r=Date.now();if(r>o.expiry)return localStorage.removeItem(t),null;var s={...o,expiry:r+o.ttl};return localStorage.setItem(t,JSON.stringify(s)),o.value}catch(e){return syn.$l.eventLog("$w.getStorage (Node)",`키 "${t}"에 대한 스토리지 항목 파싱 오류: `+e,"Error"),localStorage.removeItem(t),null}}else{const a=e?localStorage:sessionStorage;n=a.getItem(t);try{return n?JSON.parse(n):null}catch(e){return syn.$l.eventLog("$w.getStorage (Browser)",`키 "${t}"에 대한 스토리지 항목 파싱 오류: `+e,"Error"),a.removeItem(t),null}}},removeStorage(e,t=!1){if("node"===globalRoot.devicePlatform)localStorage.removeItem(e);else{const n=t?localStorage:sessionStorage;n.removeItem(e)}return this},activeControl(e){e=e||context.event||null;let t=null;return e?t=e.target||e.srcElement||e||null:doc&&(t=doc.activeElement||null),(t=!t&&globalRoot.$this?.context?$this.context.focusControl||null:t)&&globalRoot.$this?.context&&($this.context.focusControl=t),t},async contentLoaded(){if(syn.$l.addEvent(document,"addready",function(){syn.$w.remainingReadyCount++}),syn.$l.addEvent(document,"removeready",function(){syn.$w.remainingReadyCount--}),syn.$l.get("moduleScript"))syn.$w.extend({pageScript:syn.$l.get("moduleScript").value});else{var pathname=location.pathname,filename,input=(0<pathname.split("/").length&&(filename=pathname.split("/")[pathname.split("/").length-1],$webform.extend({pageProject:pathname.split("/")[pathname.split("/").length-2],pageScript:"$"+(-1<filename.indexOf(".")?filename.substring(0,filename.indexOf(".")):filename)})),document.createElement("input"));if(input.id="moduleScript",input.type="hidden",input.value=syn.$w.pageScript,document.body.appendChild(input),document.forms)for(var i=0;i<document.forms.length;i++)syn.$l.addEvent(document.forms[i],"submit",function(e){var t=!1,n=e.target||e.srcElement;if($this&&$this.hook&&$this.hook.frameEvent&&(t=$this.hook.frameEvent("beforeSubmit",{el:n,evt:e}),1!=$object.isNullOrUndefined(t)&&0!=$string.toBoolean(t)||(t=!1)),0==t)return e.returnValue=!1,e.cancel=!0,e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation(),!1})}var pageLoad=function(){context.domainPageLoad&&context.domainPageLoad();var e,n=context[syn.$w.pageScript];if(n&&n.hook.pageLoad&&n.hook.pageLoad(),n&&n.hook.pageMatch&&(e=function(e){var t="xs";switch(e.media){case"(min-width: 576px)":t="sm";break;case"(min-width: 768px)":t="md";break;case"(min-width: 992px)":t="lg";break;case"(min-width: 1200px)":t="xl";break;case"(min-width: 1400px)":t="xxl"}document.dispatchEvent(new CustomEvent("mediaquery",{detail:t})),n.hook.pageMatch(t),context.domainPageMediaQuery&&context.domainPageMediaQuery(t)},syn.$l.addEvent(matchMedia("(min-width: 0px)"),"change",e),syn.$l.addEvent(matchMedia("(min-width: 576px)"),"change",e),syn.$l.addEvent(matchMedia("(min-width: 768px)"),"change",e),syn.$l.addEvent(matchMedia("(min-width: 992px)"),"change",e),syn.$l.addEvent(matchMedia("(min-width: 1200px)"),"change",e),syn.$l.addEvent(matchMedia("(min-width: 1400px)"),"change",e)),1==$object.isNullOrUndefined(syn.$w.User)&&(e={TokenID:"",UserNo:0,UserID:"",UserName:"",BusinessPhoneNo:"",BusinessEmail:"",DepartmentID:"",DepartmentName:"",PositionID:"",PositionName:"",CompanyNo:"",CompanyName:"",Roles:[],Claims:[]},syn.$w.getSSOInfo?syn.$w.User=syn.$w.getSSOInfo()||e:syn.$w.User=e),0==$object.isNullOrUndefined(syn.$w.User)&&syn.$l.deepFreeze(syn.$w.User),0==$object.isNullOrUndefined(syn.$w.Variable)&&syn.$l.deepFreeze(syn.$w.Variable),n&&n.context.synControls&&(1==$object.isNullOrUndefined(n.context.tabOrderControls)||0==n.context.tabOrderControls.length)){var t=[],o=document.body.outerHTML.match(/<(syn_).+?>/gi);if(o)for(var r=o.length,s=0;s<r;s++){var a=o[s],i=a.substring(1,a.indexOf(" ")).toUpperCase();t.push(i)}for(var t=$array.distinct(t),l=document.querySelectorAll("input,select,textarea,button"+(0<t.length?","+t.join(","):"")),c=[],u=l.length,d=0;d<u;d++)(g=l[d])&&g.style&&"none"==g.style.display||"hidden"==g.type?g.id&&"SELECT"==g.tagName.toUpperCase()&&0==$string.isNullOrEmpty(g.getAttribute("syn-datafield"))&&c.push(g):(g.id&&0==g.id.includes("btn_syneditor_")&&0==g.id.includes("chk_syngrid_")&&0==g.id.includes("_hidden")||g.id&&"SELECT"==g.tagName.toUpperCase()&&0==$string.isNullOrEmpty(g.getAttribute("syn-datafield"))||g.id&&1==g.tagName.includes("SYN_"))&&c.push(g);for(var g,f,p,y,m,h=[],s=0,u=c.length,d=0;d<u;d++)(g=c[d]).id&&0==g.id.includes("btn_syneditor_")&&0==g.id.includes("chk_syngrid_")&&0==g.id.includes("_hidden")?(p=g.id,y=syn.$d.offset(g),(m=g.getAttribute("baseID"))&&(p=m),(m=n.context.synControls.find(function(e){return e.id==p}))&&("datepicker"==m.type?y=syn.$d.offset(g.parentElement):"colorpicker"==m.type&&(y=syn.$d.offset(g.parentElement.parentElement)),h.push({elID:g.id,tagName:g.tagName,formID:m.formDataFieldID,type:m.type,top:y.top,left:y.left}))):g.id&&"SELECT"==g.tagName.toUpperCase()&&0==$string.isNullOrEmpty(g.getAttribute("syn-datafield"))?(y=null,!1===g.getAttribute("multiple")?(f=syn.uicontrols.$select.getControl(g.id))&&(y=syn.$d.offset(f.picker.select)):(f=syn.uicontrols.$multiselect.getControl(g.id))&&(y=syn.$d.offset(f.picker.select)),y&&(m=n.context.synControls.find(function(e){return e.id==g.id}))&&h.push({elID:g.id,tagName:g.tagName,formID:m.formDataFieldID,type:m.type,top:y.top,left:y.left})):g.id&&1==g.tagName.includes("SYN_")&&(p=g.id.replace("_hidden",""),"SYN_DATEPICKER"!=g.tagName&&g.tagName,(y=null)&&(m=n.context.synControls.find(function(e){return e.id==p}))&&h.push({elID:p,tagName:g.tagName,formID:m.formDataFieldID,type:m.type,top:y.top,left:y.left})),s+=1;n.context.focusControl=null,n.context.tabOrderFocusID=null,n.context.tabOrderControls=h,n&&n.hook.frameEvent&&n.hook.frameEvent("tabOrderControls",n.context.tabOrderControls),0<n.context.tabOrderControls.length&&(n.config?(1==$string.isNullOrEmpty(n.context.tapOrderFlow)&&(n.context.tapOrderFlow="html"),"tdlr"==n.context.tapOrderFlow?n.context.tabOrderControls.sort(function(e,t){return e.top===t.top?e.left-t.left:e.top>t.top?1:-1}):"lrtd"==n.context.tapOrderFlow&&n.context.tabOrderControls.sort(function(e,t){return e.left===t.left?e.top-t.top:e.left>t.left?1:-1})):n.context.tabOrderControls.sort(function(e,t){return e.top===t.top?e.left-t.left:e.top>t.top?1:-1}));var $=syn.$l.querySelector("[autofocus]");$&&$.id&&$.tagName&&(i=$.tagName.toUpperCase(),-1<"input,select,textarea,button".toUpperCase().split(",").indexOf(i)&&(n.context.focusControl=$,n.context.tabOrderFocusID=$.id,setTimeout(function(){$.focus()})))}n&&n.hook.pageComplete&&n.hook.pageComplete(),context.domainPageComplete&&context.domainPageComplete()},pageFormInit=async()=>{var mod=context[syn.$w.pageScript];if(mod.config&&0==$string.isNullOrEmpty(mod.config.layoutPage)){var masterLayout=await syn.$w.fetchText(mod.config.layoutPage);if(masterLayout){var parser=new DOMParser,masterPage=parser.parseFromString(masterLayout,"text/html");if(masterPage){document.body.style.visibility="hidden";for(var heads=syn.$l.querySelectorAll("syn-head"),i=0,length=heads.length;i<length;i++){var head=heads[i];document.head.insertAdjacentHTML("afterbegin",head.innerHTML)}for(var sections=syn.$l.querySelectorAll("syn-section"),i=0,length=sections.length;i<length;i++){var section=sections[i],componentSection=masterPage.querySelector(section.getAttribute("selector"));componentSection&&(componentSection.innerHTML=section.innerHTML)}for(var bodys=syn.$l.querySelectorAll("syn-body"),i=0,length=bodys.length;i<length;i++){var body=bodys[i],position=body.getAttribute("position");0==$string.isNullOrEmpty(position)&&-1<["beforebegin","afterbegin","beforeend","afterend"].indexOf(position)&&masterPage.body.insertAdjacentHTML(position,body.innerHTML)}document.body.innerHTML=masterPage.body.innerHTML}}}if(mod&&mod.hook.pageFormInit&&await mod.hook.pageFormInit(),context.domainLibraryLoad){var isContinue=await domainLibraryLoad();if(0==$object.isNullOrUndefined(isContinue)&&!1===isContinue)return!1}for(var getTagModule=e=>{var t=null;if(syn.uicontrols){var n="";if(-1<e.indexOf("SYN_"))var o=e.substring(4).toLowerCase(),t=syn.uicontrols["$"+o],n=o;else switch(e){case"BUTTON":t=syn.uicontrols.$button,n="button";break;case"INPUT":switch(n=(synControl.getAttribute("type")||"text").toLowerCase()){case"hidden":case"text":case"password":case"color":case"email":case"number":case"search":case"tel":case"url":t=syn.uicontrols.$textbox;break;case"submit":case"reset":case"button":t=syn.uicontrols.$button;break;case"radio":t=syn.uicontrols.$radio;break;case"checkbox":t=syn.uicontrols.$checkbox}break;case"TEXTAREA":t=syn.uicontrols.$textarea,n="textarea";break;case"SELECT":n=null==synControl.getAttribute("multiple")?(t=syn.uicontrols.$select,"select"):(t=syn.uicontrols.$multiselect,"multiselect");break;default:t=syn.uicontrols.$element,n="element"}}return{module:t,type:n}},synControlList=[],synControls=document.querySelectorAll('[tag^="syn_"],[syn-datafield],[syn-options],[syn-events]'),i=0;i<synControls.length;i++){var synControl=synControls[i];if(synControl.tagName){var tagName=synControl.tagName.toUpperCase(),dataField=synControl.getAttribute("syn-datafield"),elementID=synControl.getAttribute("id"),formDataField=synControl.closest("form")?synControl.closest("form").getAttribute("syn-datafield"):"",controlOptions=synControl.getAttribute("syn-options")||null;if(null!=controlOptions)try{controlOptions=eval("("+controlOptions+")")}catch(error){syn.$l.eventLog("$w.contentLoaded",'elID: "{0}" syn-options 확인 필요: '.format(elementID)+error.message,"Warning")}else controlOptions={};var tagModule=getTagModule(tagName);tagModule.module?tagModule.module.controlLoad(elementID,controlOptions):$this.hook.controlLoad&&$this.hook.controlLoad(elementID,controlOptions)}}for(var synControls=document.querySelectorAll('[tag^="syn_"],[syn-datafield],[syn-options],[syn-events]'),i=0;i<synControls.length;i++){var synControl=synControls[i];if(synControl.tagName){var tagName=synControl.tagName.toUpperCase(),dataField=synControl.getAttribute("syn-datafield"),elementID=synControl.getAttribute("id"),formDataField=synControl.closest("form")?synControl.closest("form").getAttribute("syn-datafield"):"",controlOptions=synControl.getAttribute("syn-options")||null;if(null!=controlOptions)try{controlOptions=eval("("+controlOptions+")")}catch(error){syn.$l.eventLog("$w.contentLoaded",'elID: "{0}" syn-options 확인 필요: '.format(elementID)+error.message,"Warning")}else controlOptions={};syn.$l.addEvent(synControl.id,"focus",function(e){$this.context.focusControl=e.target||e.currentTarget||e.srcElement,$this.context.focusControl?$this.context.tabOrderFocusID=$this.context.focusControl.id:$this.context.tabOrderFocusID=null});var tagModule=getTagModule(tagName);tagModule.module?tagModule.module.addModuleList&&tagModule.module.addModuleList(synControl,synControlList,controlOptions,tagModule.type):elementID&&dataField&&synControlList.push({id:elementID,formDataFieldID:formDataField,field:dataField,module:null,type:tagModule.type||synControl.tagName.toLowerCase()})}}for(var synEventControls=document.querySelectorAll("[syn-events]"),i=0;i<synEventControls.length;i++){var synControl=synEventControls[i],elEvents=null;try{elEvents=eval("("+synControl.getAttribute("syn-events")+")")}catch(error){syn.$l.eventLog("$w.contentLoaded",'elID: "{0}" syn-events 확인 필요: '.format(synControl.id)+error.message,"Warning")}if(elEvents&&$this.event)for(var length=elEvents.length,j=0;j<length;j++){var elEvent=elEvents[j],func=$this.event[synControl.id+"_"+elEvent];func&&syn.$l.addEvent(synControl.id,elEvent,func)}}for(var synOptionControls=document.querySelectorAll("[syn-options]"),i=0;i<synOptionControls.length;i++){var synControl=synOptionControls[i],elID=synControl.id.replace("_hidden",""),options=null;try{var el=syn.$l.get(synControl.id+"_hidden")||syn.$l.get(synControl.id),synOptions=el.getAttribute("syn-options")||null;null!=synOptions&&(options=eval("("+synOptions+")"))}catch(error){syn.$l.eventLog("$w.contentLoaded",'elID: "{0}" syn-options 확인 필요: '.format(synControl.id)+error.message,"Warning")}if(options&&options.transactConfig&&options.transactConfig.triggerEvent)if(1==$object.isString(options.transactConfig.triggerEvent))syn.$l.addEvent(elID,options.transactConfig.triggerEvent,function(evt){var el=syn.$w.activeControl(evt),synOptions=el.getAttribute("syn-options")||null,transactConfig=(null!=synOptions&&(options=eval("("+synOptions+")")),null);options&&options.transactConfig&&(transactConfig=options.transactConfig),transactConfig&&syn.$w.transactionAction(transactConfig,transactConfig.options)});else if(1==$object.isArray(options.transactConfig.triggerEvent)){var triggerFunction=function(evt){var el=syn.$w.activeControl(evt),synOptions=el.getAttribute("syn-options")||null,transactConfig=(null!=synOptions&&(options=eval("("+synOptions+")")),null);options&&options.transactConfig&&(transactConfig=options.transactConfig),transactConfig&&syn.$w.transactionAction(transactConfig,transactConfig.options)},key;for(key in options.transactConfig.triggerEvent){var eventName=options.transactConfig.triggerEvent[key];syn.$l.addEvent(elID,eventName,triggerFunction)}}if(options&&options.triggerConfig&&options.triggerConfig.triggerEvent)if(1==$object.isString(options.triggerConfig.triggerEvent))syn.$l.addEvent(elID,options.triggerConfig.triggerEvent,function(evt){var triggerConfig=null,el=syn.$w.activeControl(evt),synOptions=el.getAttribute("syn-options")||null;null!=synOptions?options=eval("("+synOptions+")"):(synOptions=el.parentElement.getAttribute("syn-options")||null,null!=synOptions&&(options=eval("("+synOptions+")"))),options&&options.triggerConfig&&(triggerConfig=options.triggerConfig),triggerConfig&&syn.$w.triggerAction(triggerConfig)});else if(1==$object.isArray(options.triggerConfig.triggerEvent)){var triggerFunction=function(evt){var triggerConfig=null,el=syn.$w.activeControl(evt),synOptions=el.getAttribute("syn-options")||null;null!=synOptions?options=eval("("+synOptions+")"):(synOptions=el.parentElement.getAttribute("syn-options")||null,null!=synOptions&&(options=eval("("+synOptions+")"))),options&&options.triggerConfig&&(triggerConfig=options.triggerConfig),triggerConfig&&syn.$w.triggerAction(triggerConfig)},key;for(key in options.triggerConfig.triggerEvent){var eventName=options.triggerConfig.triggerEvent[key];syn.$l.addEvent(elID,eventName,triggerFunction)}}}var elem=document.createElement("input");elem.type="hidden",elem.id="synControlList",elem.textContent=JSON.stringify(synControlList),document.body.appendChild(elem),mod?mod.context.synControls=synControlList:context.synControls=synControlList,syn.$w.remainingReadyIntervalID=setInterval(function(){0==$object.isNullOrUndefined(syn.$w.remainingReadyIntervalID)&&0==syn.$w.remainingReadyCount&&(clearInterval(syn.$w.remainingReadyIntervalID),syn.$w.remainingReadyIntervalID=null,pageLoad(),syn.$w.isPageLoad=!0)},25),setTimeout(function(){0==$object.isNullOrUndefined(syn.$w.remainingReadyIntervalID)&&(clearInterval(syn.$w.remainingReadyIntervalID),syn.$w.remainingReadyIntervalID=null,syn.$l.eventLog("pageLoad","화면 초기화 오류, remainingReadyCount: {0} 확인 필요".format(syn.$w.remainingReadyCount),"Fatal"))},syn.$w.pageReadyTimeout)},module,mod;1==syn.$w.mappingModule?(module={},syn.$l.get("moduleScript")&&syn.$w.extend({pageScript:syn.$l.get("moduleScript").value}),0==$string.toBoolean(window.noPageScript)&&(module=await syn.$w.fetchScript(syn.$w.pageScript.replace("$",""))),mod=context[syn.$w.pageScript]||new syn.module,mod.config={programID:syn.Config.ApplicationID,moduleID:("browser"==globalRoot.devicePlatform?location.pathname.split("/").filter(Boolean)[0]:void 0)||syn.Config.ModuleID,businessID:syn.$w.pageProject||syn.Config.ProjectID,systemID:syn.Config.SystemID,transactionID:syn.$w.pageScript.replace("$",""),transactions:[],dataSource:{},actionButtons:[]},mod.prop={},mod.model={},mod.hook={},mod.event={},mod.translate={},mod.transaction={},mod.method={},mod.store={},mod.context={},mod.extend(module),context[syn.$w.pageScript]=mod,context.$this=mod,window.synLoader?(syn.$l.addEvent(document,"pageReady",pageFormInit),context.pageFormReady=!0,setTimeout(function(){syn.$l.removeEvent(document,"pageReady",pageFormInit),null!=syn.$w.remainingReadyIntervalID&&syn.$l.eventLog("pageReady","화면 초기화 오류, loader 또는 dispatchEvent 확인 필요","Fatal")},syn.$w.pageReadyTimeout)):setTimeout(async()=>{await pageFormInit()},25)):(pageLoad(),syn.$w.isPageLoad=!0)},addReadyCount(){syn.$w.eventAddReady&&0==syn.$w.isPageLoad&&doc.dispatchEvent(syn.$w.eventAddReady)},removeReadyCount(){syn.$w.eventRemoveReady&&0==syn.$w.isPageLoad&&doc.dispatchEvent(syn.$w.eventRemoveReady)},createSelection(e,t,n){const o=syn.$l.getElement(e);if(o)try{if(o.setSelectionRange&&"email"!==o.type)o.setSelectionRange(t,n);else if(o.createTextRange){const r=o.createTextRange();r.collapse(!0),r.moveStart("character",t),r.moveEnd("character",n-t),r.select()}o.focus()}catch(e){syn.$l.eventLog("$w.createSelection",o.id+"의 선택 영역 설정 오류: "+e,"Warning")}},argumentsExtend(...e){return Object.assign({},...e)},loadJson(t,n,o,r,e=!0,s=!1){const a=new XMLHttpRequest;if(a.open("GET",t,e),syn.$w.setServiceClientHeader&&!this.setServiceClientHeader(a))syn.$l.eventLog("$w.loadJson",`URL ${t}에 대한 setServiceClientHeader 실패`,"Error"),r&&s&&r();else{const i=()=>{if(200===a.status)try{var e=JSON.parse(a.responseText);o&&o(n,e)}catch(e){syn.$l.eventLog("$w.loadJson",`URL: ${t}, 상태: ${a.status}, 오류: ${e}에 대한 JSON 파싱 오류`,"Error")}finally{r&&r()}else syn.$l.eventLog("$w.loadJson",`URL: ${t}, 상태: ${a.status}, 응답 텍스트: ${a.responseText} HTTP 오류`,"Error"),r&&s&&r()};if(e)a.onreadystatechange=()=>{a.readyState===XMLHttpRequest.DONE&&i()},a.onerror=()=>{syn.$l.eventLog("$w.loadJson",`URL ${t} 네트워크 오류`,"Error"),r&&s&&r()},a.send();else try{a.send(),i()}catch(e){syn.$l.eventLog("$w.loadJson",`URL: ${t}, 오류: ${e}에 대한 동기 요청 중 오류 발생`,"Error"),r&&s&&r()}}},getTriggerOptions(e){const t=syn.$l.getElement(e);e=t?.getAttribute("triggerOptions");if(!e)return null;try{return JSON.parse(e)}catch(e){return syn.$l.eventLog("$w.getTriggerOptions",`엘리먼트 ${t?.id}의 triggerOptions 파싱 실패: `+e,"Warning"),null}},triggerAction(n){if($this){let e=!0;const r=syn.$w.argumentsExtend({arguments:[],options:{}},n.params);if((e=$this.hook?.beforeTrigger?$this.hook.beforeTrigger(n.triggerID,n.action,r):e)??!0){const s=syn.$l.get(n.triggerID);let e=null,t=null;try{if(n.action?.startsWith("syn.uicontrols.$")?t=n.action.split(".").slice(1).reduce((e,t)=>e?.[t],syn):n.triggerID&&n.action&&$this.event?t=$this.event[n.triggerID+"_"+n.action]:n.method&&(t=new Function(`return (${n.method})`)()),"function"!=typeof t)throw new Error(`액션: ${n.action||n.method}에 대한 트리거 함수를 찾을 수 없거나 유효하지 않습니다.`);if(s&&n.action?.startsWith("syn.uicontrols.$"))s.setAttribute("triggerOptions",JSON.stringify(r.options||{})),r.arguments.unshift(n.triggerID),e=t.apply(s,r.arguments);else if(s&&n.triggerID&&n.action&&$this.event)e=t.apply(s,r.arguments);else{if(!n.method)throw new Error("트리거 컨텍스트 불일치 또는 잘못된 설정입니다.");e=t.apply($this,r.arguments)}$this.hook?.afterTrigger&&$this.hook.afterTrigger(null,n.action,{elID:n.triggerID,result:e})}catch(e){var o="트리거 실행 실패: "+e.message;syn.$l.eventLog("$w.triggerAction",o,"Error"),$this.hook?.afterTrigger&&$this.hook.afterTrigger(o,n.action,null)}}else $this.hook?.afterTrigger&&$this.hook.afterTrigger("hook.beforeTrigger가 false를 반환했습니다",n.action,null)}},getControlModule(t){if(!t)return null;try{return t.split(".").reduce((e,t)=>e?.[t],context)}catch(e){return syn.$l.eventLog("$w.getControlModule",`모듈 경로 "${t}" 접근 오류: `+e,"Warning"),null}},tryAddFunction(transactConfig){if(transactConfig&&$this&&$this.config){1==$object.isNullOrUndefined(transactConfig.noProgress)&&(transactConfig.noProgress=!1);try{1==$object.isNullOrUndefined($this.config.transactions)&&($this.config.transactions=[]);const transactions=$this.config.transactions;for(let i=0;i<transactions.length;i++)if(transactConfig.functionID==transactions[i].functionID){transactions.splice(i,1);break}const synControlList=$this.context.synControls,transactionObject={};if(transactionObject.functionID=transactConfig.functionID,transactionObject.transactionResult=1==$object.isNullOrUndefined(transactConfig.transactionResult)||!0===transactConfig.transactionResult,transactionObject.inputs=[],transactionObject.outputs=[],transactConfig.inputs){const inputs=transactConfig.inputs,inputsLength=inputs.length;for(let i=0;i<inputsLength;i++){const inputConfig=inputs[i],input={requestType:inputConfig.type,dataFieldID:inputConfig.dataFieldID||(0<document.forms.length?document.forms[0].getAttribute("syn-datafield"):""),items:{}};let synControlConfigs=null;if("Row"==inputConfig.type)if(synControlConfigs=synControlList.filter(function(e){return e.formDataFieldID==input.dataFieldID&&0==(-1<e.type.indexOf("grid")||-1<e.type.indexOf("chart")||-1<e.type.indexOf("data"))}),synControlConfigs&&0<synControlConfigs.length)for(let k=0;k<synControlConfigs.length;k++){const synControlConfig=synControlConfigs[k],el=syn.$l.get(synControlConfig.id+"_hidden")||syn.$l.get(synControlConfig.id),options=el&&el.getAttribute("syn-options");if(null!=options){let synOptions=null;try{synOptions=JSON.parse(options)}catch(e){synOptions=eval("("+options+")")}if(null!=synOptions&&1!=$string.isNullOrEmpty(synControlConfig.field)){let isBelong=!1;synOptions.belongID&&(1==$object.isString(synOptions.belongID)?isBelong=transactConfig.functionID==synOptions.belongID:1==$object.isArray(synOptions.belongID)&&(isBelong=-1<synOptions.belongID.indexOf(transactConfig.functionID))),1==isBelong&&(input.items[synControlConfig.field]={fieldID:synControlConfig.field,dataType:synOptions.dataType||"string"})}}}else{const synControlConfig=synControlList.find(function(e){return e.field==input.dataFieldID&&1==(-1<e.type.indexOf("grid")||-1<e.type.indexOf("chart"))}),controlModule=1==$object.isNullOrUndefined(synControlConfig)?null:syn.$w.getControlModule(synControlConfig.module);if(0==$object.isNullOrUndefined(controlModule)&&controlModule.setTransactionBelongID)controlModule.setTransactionBelongID(synControlConfig.id,input,transactConfig);else if(syn.uicontrols.$data&&0<syn.uicontrols.$data.storeList.length)for(let k=0;k<syn.uicontrols.$data.storeList.length;k++){const store=syn.uicontrols.$data.storeList[k];if("Form"==store.storeType&&store.dataSourceID==input.dataFieldID){for(let l=0;l<store.columns.length;l++){const column=store.columns[l];let isBelong=!1;1==$object.isString(column.belongID)?isBelong=transactConfig.functionID==column.belongID:1==$object.isArray(column.belongID)&&(isBelong=-1<column.belongID.indexOf(transactConfig.functionID)),1==isBelong&&(input.items[column.data]={fieldID:column.data,dataType:column.dataType||"string"})}break}}}else if("List"==inputConfig.type){const synControlConfig=synControlList.find(function(e){return e.field==input.dataFieldID&&1==(-1<e.type.indexOf("grid")||-1<e.type.indexOf("chart"))}),controlModule=1==$object.isNullOrUndefined(synControlConfig)?null:syn.$w.getControlModule(synControlConfig.module);if(0==$object.isNullOrUndefined(controlModule)&&controlModule.setTransactionBelongID)controlModule.setTransactionBelongID(synControlConfig.id,input,transactConfig);else if(syn.uicontrols.$data&&0<syn.uicontrols.$data.storeList.length)for(let k=0;k<syn.uicontrols.$data.storeList.length;k++){const store=syn.uicontrols.$data.storeList[k];if("Grid"==store.storeType&&store.dataSourceID==input.dataFieldID){for(let l=0;l<store.columns.length;l++){const column=store.columns[l];let isBelong=!1;1==$object.isString(column.belongID)?isBelong=transactConfig.functionID==column.belongID:1==$object.isArray(column.belongID)&&(isBelong=-1<column.belongID.indexOf(transactConfig.functionID)),1==isBelong&&(input.items[column.data]={fieldID:column.data,dataType:column.dataType||"string"})}break}}}transactionObject.inputs.push(input)}}if(transactConfig.outputs){const outputs=transactConfig.outputs,outputsLength=outputs.length,synControls=$this.context.synControls;for(let i=0;i<outputsLength;i++){const outputConfig=outputs[i],output={responseType:outputConfig.type,dataFieldID:outputConfig.dataFieldID||"",items:{}};let synControlConfigs=null;if("Form"==outputConfig.type){if(synControlConfigs=synControlList.filter(function(e){return e.formDataFieldID==output.dataFieldID&&0==(-1<e.type.indexOf("grid")||-1<e.type.indexOf("chart")||-1<e.type.indexOf("data"))}),synControlConfigs&&0<synControlConfigs.length)for(let k=0;k<synControlConfigs.length;k++){const synControlConfig=synControlConfigs[k],el=syn.$l.get(synControlConfig.id+"_hidden")||syn.$l.get(synControlConfig.id),options=el&&el.getAttribute("syn-options");if(null!=options){let synOptions=null;try{synOptions=JSON.parse(options)}catch(e){synOptions=eval("("+options+")")}if(null!=synOptions&&1!=$string.isNullOrEmpty(synControlConfig.field)&&(output.items[synControlConfig.field]={fieldID:synControlConfig.field,dataType:synOptions.dataType},1==outputConfig.clear&&synControls&&0<synControls.length)){const controlInfo=synControls.find(function(e){return e.field==outputConfig.dataFieldID});if(1!=$string.isNullOrEmpty(controlInfo.module)){const controlModule=syn.$w.getControlModule(controlInfo.module);0==$object.isNullOrUndefined(controlModule)&&controlModule.clear&&controlModule.clear(controlInfo.id)}}}}else if(syn.uicontrols.$data&&0<syn.uicontrols.$data.storeList.length)for(let k=0;k<syn.uicontrols.$data.storeList.length;k++){const store=syn.uicontrols.$data.storeList[k];if("Form"==store.storeType&&store.dataSourceID==output.dataFieldID){for(let l=0;l<store.columns.length;l++){const column=store.columns[l];output.items[column.data]={fieldID:column.data,dataType:column.dataType||"string"}}if(1==outputConfig.clear){const dataStore=$this.store[store.dataSourceID];dataStore&&(dataStore.length=0)}break}}}else if("Grid"==outputConfig.type){const synControlConfig=synControlList.find(function(e){return e.field==output.dataFieldID&&1==(-1<e.type.indexOf("grid")||-1<e.type.indexOf("chart"))}),controlModule=1==$object.isNullOrUndefined(synControlConfig)?null:syn.$w.getControlModule(synControlConfig.module);if(0==$object.isNullOrUndefined(controlModule)&&controlModule.setTransactionBelongID){if(controlModule.setTransactionBelongID(synControlConfig.id,output),1==outputConfig.clear&&synControls&&0<synControls.length){const controlInfo=synControls.find(function(e){return e.field==output.dataFieldID}),controlModule=syn.$w.getControlModule(controlInfo.module);0==$object.isNullOrUndefined(controlModule)&&controlModule.clear&&controlModule.clear(controlInfo.id)}}else if(synControlConfigs=synControlList.filter(function(e){return e.field==output.dataFieldID&&-1<["chart","chartjs"].indexOf(e.type)}),synControlConfigs&&1==synControlConfigs.length){const synControlConfig=synControlConfigs[0],el=syn.$l.get(synControlConfig.id+"_hidden")||syn.$l.get(synControlConfig.id),synOptions=JSON.parse(el.getAttribute("syn-options"));if(null==synOptions)continue;for(let k=0;k<synOptions.series.length;k++){const column=synOptions.series[k];output.items[column.columnID]={fieldID:column.columnID,dataType:column.dataType||"string"}}if(1==outputConfig.clear&&synControls&&0<synControls.length){const controlInfo=synControls.find(function(e){return e.field==outputConfig.dataFieldID});if(1==$string.isNullOrEmpty(controlInfo.module))continue;const controlModule=syn.$w.getControlModule(controlInfo.module);0==$object.isNullOrUndefined(controlModule)&&controlModule.clear&&controlModule.clear(controlInfo.id)}}else if(syn.uicontrols.$data&&0<syn.uicontrols.$data.storeList.length)for(let k=0;k<syn.uicontrols.$data.storeList.length;k++){const store=syn.uicontrols.$data.storeList[k];if("Grid"==store.storeType&&store.dataSourceID==output.dataFieldID){for(let l=0;l<store.columns.length;l++){const column=store.columns[l];output.items[column.data]={fieldID:column.data,dataType:column.dataType||"string"}}if(1==outputConfig.clear){const dataStore=$this.store[store.dataSourceID];dataStore&&(dataStore.length=0)}break}}}transactionObject.outputs.push(output)}}$this.config.transactions.push(transactionObject)}catch(error){syn.$l.eventLog("$w.tryAddFunction",error,"Error")}}else syn.$l.eventLog("$w.tryAddFunction","{0} 거래 ID 또는 설정 확인 필요".format(transactConfig),"Warning")},transactionAction(e,t){let s=e;if("string"==typeof e){if(!(s=$this?.transaction?.[e]))return void syn.$l.eventLog("$w.transactionAction",`functionID "${e}"에 대한 거래 설정을 찾을 수 없습니다.`,"Warning");s.functionID=s.functionID||e}if(s&&$this?.config)try{let e=!0;var n;(e=$this.hook?.beforeTransaction?$this.hook.beforeTransaction(s):e)??!0?(n=syn.$w.argumentsExtend({message:"",dynamic:"Y",authorize:"N",commandType:"D",returnType:"Json",transactionScope:"N",transactionLog:"Y"},t),s.noProgress=s.noProgress??!1,syn.$w.progressMessage&&!s.noProgress&&syn.$w.progressMessage(n.message),syn.$w.tryAddFunction(s),syn.$w.transaction(s.functionID,(t,n,o)=>{let r=null;if(0<t?.errorText?.length)r=t.errorText[0],syn.$l.eventLog("$w.transactionAction.callback","거래 오류: "+r,"Error");else{let e=null;if("function"==typeof s.callback)try{e=s.callback(r,t,n,o)}catch(e){syn.$l.eventLog("$w.transactionAction.callbackExec","콜백 실행 오류: "+e,"Error")}else Array.isArray(s.callback)&&2===s.callback.length&&setTimeout(()=>{syn.$l.trigger(s.callback[0],s.callback[1],{error:r,result:t,additionalData:n,correlationID:o})},0);null===e||!0===e||Array.isArray(s.callback)?$this.hook?.afterTransaction&&$this.hook.afterTransaction(null,s.functionID,t,n,o):!1===e&&$this.hook?.afterTransaction&&$this.hook.afterTransaction("callbackResult가 false를 반환했습니다",s.functionID,null,null,o)}},n)):(syn.$w.closeProgressMessage&&syn.$w.closeProgressMessage(),$this.hook?.afterTransaction&&$this.hook.afterTransaction("beforeTransaction이 false를 반환했습니다",s.functionID,null,null))}catch(e){syn.$l.eventLog("$w.transactionAction","거래 액션 실행 중 오류 발생: "+e,"Error"),syn.$w.closeProgressMessage&&syn.$w.closeProgressMessage()}else syn.$l.eventLog("$w.transactionAction","거래 설정이 유효하지 않거나 $this 컨텍스트가 없습니다.","Warning")},transactionDirect(n,s,a){return n?new Promise((o,r)=>{syn.$w.progressMessage&&!0!==n.noProgress&&syn.$w.progressMessage();const e=syn.$w.transactionObject(n.functionID,"Json");e.programID=n.programID||syn.Config.ApplicationID,e.moduleID=n.moduleID||("browser"===globalRoot.devicePlatform?location.pathname.split("/").filter(Boolean)[0]:void 0)||syn.Config.ModuleID,e.businessID=n.businessID||syn.Config.ProjectID,e.systemID=n.systemID||globalRoot.$this?.config?.systemID||syn.Config.SystemID,e.transactionID=n.transactionID,e.dataMapInterface=n.dataMapInterface||"Row|Form",e.transactionResult=n.transactionResult??!0,e.screenID="node"===globalRoot.devicePlatform?n.screenID||n.transactionID:syn.$w.pageScript?.replace("$","")??"",e.startTraceID=n.startTraceID||a?.startTraceID||"",e.inputObjects=n.inputObjects||[];var t=syn.$w.argumentsExtend({message:"",dynamic:"Y",authorize:"N",commandType:"D",returnType:"Json",transactionScope:"N",transactionLog:"Y"},a);e.options=t,0<n.inputLists?.length?(e.inputs.push(...n.inputLists),e.inputsItemCount.push(n.inputLists.length)):n.inputObjects&&(e.inputs.push(n.inputObjects),e.inputsItemCount.push(1)),syn.$w.executeTransaction(n,e,(e,t)=>{if(s)try{s(e,t)}catch(e){var n=new Error("콜백 오류: "+e);return syn.$l.eventLog("$w.transactionDirect.callback",n.message,"Error"),void r(n)}e&&e.errorText?r(new Error(e.errorText)):o({responseData:e,additionalData:t})})}):(syn.$l.eventLog("$w.transactionDirect","directObject 파라미터가 필요합니다.","Error"),Promise.reject(new Error("directObject 파라미터가 필요합니다.")))},transaction(L,O,e){let x="";try{syn.$w.domainTransactionLoaderStart&&syn.$w.domainTransactionLoaderStart(),(e=syn.$w.argumentsExtend({message:"",dynamic:"Y",authorize:"N",commandType:"D",returnType:"Json",transactionScope:"N",transactionLog:"Y"},e))&&syn.$w.progressMessage&&syn.$w.progressMessage(e.message);const N={errorText:[],outputStat:[]};if($this&&$this.config&&$this.config.transactions){var t=$this.config.transactions.filter(function(e){return e.functionID==L});if(1==t.length){const k=t[0],l=syn.$w.transactionObject(k.functionID,"Json"),c=(l.programID=$this.config.programID,l.businessID=$this.config.businessID,l.systemID=$this.config.systemID,l.transactionID=$this.config.transactionID,l.screenID=syn.$w.pageScript.replace("$",""),l.startTraceID=e.startTraceID||"",l.options=e,$this.context.synControls);var r=k.inputs.length;for(let e=0;e<r;e++){const u=k.inputs[e];let r=[];if("Row"==u.requestType){let o=c.filter(function(e){return e.field==u.dataFieldID});if(1==o.length){const d=o[0];if(-1<d.type.indexOf("grid")||-1<d.type.indexOf("chart")){const g=u.dataFieldID;if(c&&0<c.length)if(1==(o=c.filter(function(e){return e.field==g})).length){const f=o[0],p=syn.$w.getControlModule(f.module),G=syn.$l.get(f.id+"_hidden")||syn.$l.get(f.id);var n=JSON.parse(G.getAttribute("syn-options"));for(let e=0;e<n.columns.length;e++){const y=n.columns[e];if(y.validators&&$validation.transactionValidate)if(y.controlText=n.controlText||"",0==$validation.transactionValidate(p,f,y,u.requestType))return $this.hook.afterTransaction&&$this.hook.afterTransaction("validators continue false",L,y,null),syn.$w.domainTransactionLoaderEnd&&syn.$w.domainTransactionLoaderEnd(),!1}0==$object.isNullOrUndefined(p)&&p.getValue&&(r=p.getValue(f.id.replace("_hidden",""),"Row",u.items)[0])}else syn.$l.eventLog("$w.transaction",'"{0}" Row List Input Mapping 확인 필요'.format(g),"Warning")}else for(const m in u.items){var s=u.items[m];const h=m;var P=s.fieldID,a=s.dataType;const $={prop:P,val:""};let e="";if(0<c.length){if(1!=(o=c.filter(function(e){return e.field==h&&e.formDataFieldID==u.dataFieldID})).length){syn.$l.eventLog("$w.transaction",'"{0}" Row Control Input Mapping 확인 필요'.format(h),"Warning");continue}{const v=o[0];if(1==$object.isNullOrUndefined(v.module))e=syn.$l.get(v.id).value;else{const b=syn.$w.getControlModule(v.module),z=syn.$l.get(v.id+"_hidden")||syn.$l.get(v.id);var i=JSON.parse(z.getAttribute("syn-options"));if(i.validators&&$validation.transactionValidate)if(0==$validation.transactionValidate(b,v,i,u.requestType))return $this.hook.afterTransaction&&$this.hook.afterTransaction("validators continue false",L,i,null),syn.$w.domainTransactionLoaderEnd&&syn.$w.domainTransactionLoaderEnd(),!1;0==$object.isNullOrUndefined(b)&&b.getValue&&(e=b.getValue(v.id.replace("_hidden",""),s)),1!=$object.isNullOrUndefined(e)||"number"!=a&&"numeric"!=a||(e=0)}}}$.val=e,r.push($)}}else if(syn.uicontrols.$data&&0<syn.uicontrols.$data.storeList.length)for(const w in u.items){let t=!1;var F=u.items[w];const D=w;var U,B=F.fieldID,H=F.dataType;const C={prop:B,val:""};let n="";for(let e=0;e<syn.uicontrols.$data.storeList.length;e++){const I=syn.uicontrols.$data.storeList[e];if("Form"==I.storeType&&I.dataSourceID==u.dataFieldID){t=!0,1==(o=I.columns.filter(function(e){return e.data==D})).length?(U=o[0],n=$this.store[I.dataSourceID][U.data],1!=$object.isNullOrUndefined(n)||"number"!=H&&"numeric"!=H||(n=0),1==$object.isNullOrUndefined(n)&&(n="")):syn.$l.eventLog("$w.transaction",'"{0}" Row Input Mapping 확인 필요'.format(D),"Warning");break}}1==t?(C.val=n,r.push(C)):syn.$l.eventLog("$w.transaction","{0} Row 컨트롤 ID 중복 또는 존재여부 확인 필요".format(u.dataFieldID),"Warning")}l.inputs.push(r),l.inputsItemCount.push(1)}else if("List"==u.requestType){const S=u.dataFieldID;if(c&&0<c.length){var W=c.filter(function(e){return e.field==S});if(1==W.length){const E=W[0],T=syn.$w.getControlModule(E.module),K=syn.$l.get(E.id+"_hidden")||syn.$l.get(E.id);var o=JSON.parse(K.getAttribute("syn-options"));for(let e=0;e<o.columns.length;e++){const A=o.columns[e];if(A.controlText=o.controlText||"",A.validators&&$validation.transactionValidate)if(0==$validation.transactionValidate(T,E,A,u.requestType))return $this.hook.afterTransaction&&$this.hook.afterTransaction("validators continue false",L,A,null),syn.$w.domainTransactionLoaderEnd&&syn.$w.domainTransactionLoaderEnd(),!1}0==$object.isNullOrUndefined(T)&&T.getValue&&(r=T.getValue(E.id.replace("_hidden",""),"List",u.items))}else{let t=!1;if(syn.uicontrols.$data&&0<syn.uicontrols.$data.storeList.length)for(let e=0;e<syn.uicontrols.$data.storeList.length;e++){const j=syn.uicontrols.$data.storeList[e];if("Grid"==j.storeType&&j.dataSourceID==S){t=!0;var q=syn.uicontrols.$data.bindingList.find(function(e){return e.dataSourceID==j.dataSourceID&&"grid"==e.controlType});if(q)r=$this.store[j.dataSourceID][q.dataFieldID];else{let t=[];var V=$this.store[j.dataSourceID],J=V.length;for(let e=0;e<J;e++){var _=V[e];const M=[];for(const R in _){var Y={prop:R,val:_[R]};M.push(Y)}t.push(M)}r=t}break}}0==t&&syn.$l.eventLog("$w.transaction",'"{0}" List Input Mapping 확인 필요'.format(S),"Warning")}}for(const Q in r)l.inputs.push(r[Q]);l.inputsItemCount.push(r.length)}}syn.$w.executeTransaction($this.config,l,function(t,e,n){let o=!1;for(let e=0;e<k.outputs.length;e++)if("Dynamic"==k.outputs[e].responseType){o=!0;break}if(1==o)N.outputStat.push({fieldID:"Dynamic",count:1,dynamicData:t});else if(t.length==k.outputs.length){const f=$this.context.synControls;var r=k.outputs.length;for(let e=0;e<r;e++){const p=k.outputs[e];var s=t[e],a=s.id;const y=s.value;if($this.hook.outputDataBinding&&$this.hook.outputDataBinding(L,a,y),"Form"==p.responseType)if(1==$object.isNullOrUndefined(y)||1==$object.isObjectEmpty(y))N.outputStat.push({fieldID:a,Count:0});else{N.outputStat.push({fieldID:a,Count:1});for(const m in p.items){var i=p.items[m];const h=m;var l=i.fieldID,c=y[l];if(null!=c&&f&&0<f.length){let n=f.filter(function(e){return e.field==h&&e.formDataFieldID==p.dataFieldID});if(1==n.length){const $=n[0],v=syn.$w.getControlModule($.module);0==$object.isNullOrUndefined(v)&&v.setValue&&v.setValue($.id.replace("_hidden",""),c,i)}else{let t=!1;if(syn.uicontrols.$data&&0<syn.uicontrols.$data.storeList.length)for(let e=0;e<syn.uicontrols.$data.storeList.length;e++){const b=syn.uicontrols.$data.storeList[e];if(1==$object.isNullOrUndefined($this.store[b.dataSourceID])&&($this.store[b.dataSourceID]={}),"Form"==b.storeType&&b.dataSourceID==p.dataFieldID){t=!0,1==(n=b.columns.filter(function(e){return e.data==h})).length&&($this.store[b.dataSourceID][h]=c);break}}0==t&&(x='"{0}" Form Output Mapping 확인 필요'.format(h),N.errorText.push(x),syn.$l.eventLog("$w.transaction",x,"Error"))}}}}else if("Grid"==p.responseType){N.outputStat.push({fieldID:a,Count:y.length});const w=p.dataFieldID;if(f&&0<f.length){s=f.filter(function(e){return e.field==w});if(1==s.length){const D=s[0],C=syn.$w.getControlModule(D.module);0==$object.isNullOrUndefined(C)&&C.setValue&&C.setValue(D.id.replace("_hidden",""),y,p.items)}else{let t=!1;if(syn.uicontrols.$data&&0<syn.uicontrols.$data.storeList.length)for(let e=0;e<syn.uicontrols.$data.storeList.length;e++){const I=syn.uicontrols.$data.storeList[e];if(1==$object.isNullOrUndefined($this.store[I.dataSourceID])&&($this.store[I.dataSourceID]=[]),"Grid"==I.storeType&&I.dataSourceID==p.dataFieldID){t=!0;var u=syn.uicontrols.$data.bindingList.filter(function(e){return e.dataSourceID==I.dataSourceID&&"grid"==e.controlType}),d=y.length;for(let e=0;e<d;e++)y[e].Flag="R";if(0<u.length)for(let e=0;e<u.length;e++){var g=u[e];$this.store[I.dataSourceID][g.dataFieldID]=y}else $this.store[I.dataSourceID]=y;break}}0==t&&(x='"{0}" Grid Output Mapping 확인 필요'.format(w),N.errorText.push(x),syn.$l.eventLog("$w.transaction",x,"Error"))}}}else if("Chart"==p.responseType){N.outputStat.push({fieldID:a,Count:y.length});const S=p.dataFieldID;if(f&&0<f.length){s=f.filter(function(e){return e.field==S});if(1==s.length){const E=s[0],T=syn.$w.getControlModule(E.module);0==$object.isNullOrUndefined(T)&&T.setValue&&T.setValue(E.id.replace("_hidden",""),y,p.items)}else x='"{0}" Chart Output Mapping 확인 필요'.format(S),N.errorText.push(x),syn.$l.eventLog("$w.transaction",x,"Error")}}}}else x='"{0}" 기능의 거래 응답 정의와 데이터 갯수가 다릅니다'.format(k.functionID),N.errorText.push(x),syn.$l.eventLog("$w.transaction",x,"Error");O&&O(N,e,n),syn.$w.domainTransactionLoaderEnd&&syn.$w.domainTransactionLoaderEnd()})}else x='"{0}" 거래 중복 또는 존재여부 확인 필요'.format(L),N.errorText.push(x),syn.$l.eventLog("$w.transaction",x,"Error"),O&&O(N),syn.$w.domainTransactionLoaderEnd&&syn.$w.domainTransactionLoaderEnd()}else x="화면 매핑 정의 데이터가 없습니다",N.errorText.push(x),syn.$l.eventLog("$w.transaction",x,"Error"),O&&O(N),syn.$w.domainTransactionLoaderEnd&&syn.$w.domainTransactionLoaderEnd()}catch(e){syn.$l.eventLog("$w.transaction",e,"Error"),syn.$w.domainTransactionLoaderEnd&&syn.$w.domainTransactionLoaderEnd()}},getterValue(t){try{const r=$this.transaction[t];if(1!=$object.isNullOrUndefined(r)){1==$string.isNullOrEmpty(r.functionID)&&(r.functionID=t),syn.$w.tryAddFunction(r);let e="";const result={errors:[],inputs:[]};if($this&&$this.config&&$this.config.transactions){var n=$this.config.transactions.filter(function(e){return e.functionID==t});if(1==n.length){var o=n[0];const p=context[syn.$w.pageScript].context.synControls;var P=o.inputs.length;for(let e=0;e<P;e++){const y=o.inputs[e];let r=[];if("Row"==y.requestType){let o=p.filter(function(e){return e.field==y.dataFieldID});if(1==o.length){const h=o[0];if(-1<h.type.indexOf("grid")||-1<h.type.indexOf("chart")){const $=y.dataFieldID;if(p&&0<p.length)if(1==(o=p.filter(function(e){return e.field==$})).length){const v=o[0],b=syn.$w.getControlModule(v.module);0==$object.isNullOrUndefined(b)&&b.getValue&&(r=b.getValue(v.id.replace("_hidden",""),"Row",y.items)[0])}else syn.$l.eventLog("$w.getterValue",'"{0}" Row List Input Mapping 확인 필요'.format($),"Warning")}else for(const w in y.items){var s=y.items[w];const D=w;var F=s.fieldID,a=s.dataType;const C={prop:F,val:""};let e="";if(0<p.length){if(1!=(o=p.filter(function(e){return e.field==D&&e.formDataFieldID==y.dataFieldID})).length){syn.$l.eventLog("$w.getterValue",'"{0}" Row Control Input Mapping 확인 필요'.format(D),"Warning");continue}{const I=o[0],S=syn.$w.getControlModule(I.module);0==$object.isNullOrUndefined(S)&&S.getValue&&(e=S.getValue(I.id.replace("_hidden",""),s)),1!=$object.isNullOrUndefined(e)||"number"!=a&&"numeric"!=a||(e=0)}}C.val=e,r.push(C)}}else if(syn.uicontrols.$data&&0<syn.uicontrols.$data.storeList.length)for(const E in y.items){let t=!1;var i=y.items[E];const T=E;var l,U=i.fieldID,c=i.dataType;const L={prop:U,val:""};let n="";for(let e=0;e<syn.uicontrols.$data.storeList.length;e++){const O=syn.uicontrols.$data.storeList[e];if("Form"==O.storeType&&O.dataSourceID==y.dataFieldID){t=!0,1==(o=O.columns.filter(function(e){return e.data==T})).length?(l=o[0],n=$this.store[O.dataSourceID][l.data],1!=$object.isNullOrUndefined(n)||"number"!=c&&"numeric"!=c||(n=0),1==$object.isNullOrUndefined(n)&&(n="")):syn.$l.eventLog("$w.getterValue",'"{0}" Row Input Mapping 확인 필요'.format(T),"Warning");break}}1==t?(L.val=n,r.push(L)):syn.$l.eventLog("$w.getterValue","{0} Row 컨트롤 ID 중복 또는 존재여부 확인 필요".format(y.dataFieldID),"Warning")}const m={};for(let e=0;e<r.length;e++){var u=r[e];m[u.prop]=u.val}result.inputs.push(m)}else if("List"==y.requestType){const x=y.dataFieldID;if(p&&0<p.length){var d=p.filter(function(e){return e.field==x});if(1==d.length){const N=d[0],k=syn.$w.getControlModule(N.module);0==$object.isNullOrUndefined(k)&&k.getValue&&(r=k.getValue(N.id.replace("_hidden",""),"List",y.items))}else{let t=!1;if(syn.uicontrols.$data&&0<syn.uicontrols.$data.storeList.length)for(let e=0;e<syn.uicontrols.$data.storeList.length;e++){const A=syn.uicontrols.$data.storeList[e];if("Grid"==A.storeType&&A.dataSourceID==x){t=!0;var g=syn.uicontrols.$data.bindingList.find(function(e){return e.dataSourceID==A.dataSourceID&&"grid"==e.controlType});if(g)r=$this.store[A.dataSourceID][g.dataFieldID];else{let t=[];var f=$this.store[A.dataSourceID],B=f.length;for(let e=0;e<B;e++){var H=f[e];const j=[];for(const M in H){var W={prop:M,val:H[M]};j.push(W)}t.push(j)}r=t}break}}0==t&&syn.$l.eventLog("$w.getterValue",'"{0}" List Input Mapping 확인 필요'.format(x),"Warning")}}for(const J in r){const R={};var q=r[J];for(let e=0;e<q.length;e++){var V=q[e];R[V.prop]=V.val}result.inputs.push(R)}}}}else e='"{0}" 거래 중복 또는 존재여부 확인 필요'.format(t),result.errors.push(e),syn.$l.eventLog("$w.getterValue",e,"Error")}else e="화면 매핑 정의 데이터가 없습니다",result.errors.push(e),syn.$l.eventLog("$w.getterValue",e,"Error");return result}syn.$l.eventLog("$w.getterValue",'functionID "{0}" 확인 필요'.format(t),"Warning")}catch(e){return syn.$l.eventLog("$w.getterValue",e,"Error"),result.errors.push(e.message),result}},setterValue(t,n){try{const y=$this.transaction[t];if(1!=$object.isNullOrUndefined(y)){1==$string.isNullOrEmpty(y.functionID)&&(y.functionID=t),syn.$w.tryAddFunction(y);let o="";const result={errors:[],outputs:[]};if($this&&$this.config&&$this.config.transactions){var e=$this.config.transactions.filter(function(e){return e.functionID==t});if(1==e.length){var r=e[0];const m=context[syn.$w.pageScript].context.synControls;var s=r.outputs.length;for(let e=0;e<s;e++){const h=r.outputs[e];var a=h.responseType+"Data"+e.toString();const $=n[e];if("Form"==h.responseType)if(1==$object.isNullOrUndefined($)||1==$object.isObjectEmpty($))result.outputs.push({fieldID:a,Count:0});else{result.outputs.push({fieldID:a,Count:1});for(const v in h.items){var i=h.items[v];const b=v;var l=i.fieldID,c=$[l];if(null!=c&&m&&0<m.length){let n=m.filter(function(e){return e.field==b&&e.formDataFieldID==h.dataFieldID});if(1==n.length){const w=n[0],D=syn.$w.getControlModule(w.module);0==$object.isNullOrUndefined(D)&&D.setValue&&D.setValue(w.id.replace("_hidden",""),c,i)}else{let t=!1;if(syn.uicontrols.$data&&0<syn.uicontrols.$data.storeList.length)for(let e=0;e<syn.uicontrols.$data.storeList.length;e++){const C=syn.uicontrols.$data.storeList[e];if(1==$object.isNullOrUndefined($this.store[C.dataSourceID])&&($this.store[C.dataSourceID]={}),"Form"==C.storeType&&C.dataSourceID==h.dataFieldID){t=!0,1==(n=C.columns.filter(function(e){return e.data==b})).length&&($this.store[C.dataSourceID][b]=c);break}}0==t&&(o='"{0}" Form Output Mapping 확인 필요'.format(b),result.errors.push(o),syn.$l.eventLog("$w.setterValue",o,"Error"))}}}}else if("Grid"==h.responseType)if($.length&&0<$.length){result.outputs.push({fieldID:a,Count:$.length});const I=h.dataFieldID;if(m&&0<m.length){var u=m.filter(function(e){return e.field==I});if(1==u.length){const S=u[0],E=syn.$w.getControlModule(S.module);0==$object.isNullOrUndefined(E)&&E.setValue&&E.setValue(S.id.replace("_hidden",""),$,h.items)}else{let t=!1;if(syn.uicontrols.$data&&0<syn.uicontrols.$data.storeList.length)for(let e=0;e<syn.uicontrols.$data.storeList.length;e++){const T=syn.uicontrols.$data.storeList[e];if(1==$object.isNullOrUndefined($this.store[T.dataSourceID])&&($this.store[T.dataSourceID]=[]),"Grid"==T.storeType&&T.dataSourceID==h.dataFieldID){t=!0;var d=syn.uicontrols.$data.bindingList.filter(function(e){return e.dataSourceID==T.dataSourceID&&"grid"==e.controlType}),g=$.length;for(let e=0;e<g;e++)$[e].Flag="R";if(0<d.length)for(let e=0;e<d.length;e++){var f=d[e];$this.store[T.dataSourceID][f.dataFieldID]=$}else $this.store[T.dataSourceID]=$;break}}0==t&&(o='"{0}" Grid Output Mapping 확인 필요'.format(I),result.errors.push(o),syn.$l.eventLog("$w.setterValue",o,"Error"))}}}else result.outputs.push({fieldID:a,Count:0});else if("Chart"==h.responseType)if($.length&&0<$.length){result.outputs.push({fieldID:a,Count:$.length});const L=h.dataFieldID;if(m&&0<m.length){var p=m.filter(function(e){return e.field==L});if(1==p.length){const O=p[0],x=syn.$w.getControlModule(O.module);0==$object.isNullOrUndefined(x)&&x.setValue&&x.setValue(O.id.replace("_hidden",""),$,h.items)}else o='"{0}" Chart Output Mapping 확인 필요'.format(L),result.errors.push(o),syn.$l.eventLog("$w.setterValue",o,"Error")}}else result.outputs.push({fieldID:a,Count:0})}}else o='"{0}" 거래 중복 또는 존재여부 확인 필요'.format(t),result.errors.push(o),syn.$l.eventLog("$w.setterValue",o,"Error")}else o="화면 매핑 정의 데이터가 없습니다",result.errors.push(o),syn.$l.eventLog("$w.setterValue",o,"Error");return result}syn.$l.eventLog("$w.setterValue",'functionID "{0}" 확인 필요'.format(t),"Warning")}catch(e){return syn.$l.eventLog("$w.setterValue",e,"Error"),result.errors.push(e.message),result}},scrollToTop(){if(doc?.documentElement&&context.requestAnimationFrame&&context.scrollTo){const t=()=>{var e=doc.documentElement.scrollTop||doc.body.scrollTop;0<e&&(context.requestAnimationFrame(t),context.scrollTo(0,e-e/8))};context.requestAnimationFrame(t)}},setFavicon(t){if(doc){let e=doc.querySelector('link[rel="icon"]');e?e.href=t:((e=doc.createElement("link")).rel="icon",e.href=t,doc.head?.appendChild(e))}},fileDownload(t,e){if(doc&&t){e=e||t.substring(t.lastIndexOf("/")+1).split(".")[0]||"download";const n=doc.createElement("a");n.href=t,n.download=e,n.style.display="none",doc.body.appendChild(n);try{n.click()}catch(e){syn.$l.eventLog("$w.fileDownload",t+" 다운로드 실행 오류: "+e,"Error")}finally{setTimeout(()=>doc.body.removeChild(n),100)}}},sleep(t,e){if("function"==typeof e)return setTimeout(e,t);if("undefined"!=typeof Promise)return new Promise(e=>setTimeout(e,t));syn.$l.eventLog("$w.sleep","콜백 또는 Promise 지원이 필요합니다.","Debug");for(var n=Date.now();Date.now()<n+t;);},purge(t){if(t){var n=t.attributes;if(n)for(let e=n.length-1;0<=e;e--){const o=n[e].name;if(o.startsWith("on")&&"function"==typeof t[o])try{t[o]=null}catch(e){}}let e=t.firstChild;for(;e;)syn.$w.purge(e),e=e.nextSibling;syn.$l?.events?.removeAllForElement&&syn.$l.events.removeAllForElement(t)}},setServiceObject(e){return syn.$w.serviceObject="string"==typeof e?e:JSON.stringify(e),this},setServiceClientHeader(e){return e.setRequestHeader("CertificationKey","SGFuZFN0YWNr"),!0},xmlParser(e){if("undefined"==typeof DOMParser)return syn.$l.eventLog("$w.xmlParser","이 환경에서는 DOMParser가 지원되지 않습니다.","Error"),null;try{const t=new DOMParser;return t.parseFromString(e,"text/xml")}catch(e){return syn.$l.eventLog("$w.xmlParser","XML 파싱 오류: "+e,"Error"),null}},apiHttp(c){return new Proxy({},{get(e,l){return async function(e,t){if(-1==["send"].indexOf(l))return Promise.resolve({error:l+" 메서드 확인 필요"});t=syn.$w.argumentsExtend({method:"GET"},t);var n,o=null;if(0==$object.isNullOrUndefined(e)&&0==$object.isString(e)){if("GET"==t.method||"HEAD"==t.method?t.method="POST":t.method=t.method||"POST",1==$object.isNullOrUndefined(t.headers)&&(t.headers=new Headers,e instanceof FormData||t.headers.append("Content-Type",t.contentType||"application/json")),syn.Environment&&(n=syn.Environment).Header)for(var r in n.Header)0==t.headers.has(r)&&t.headers.append(r,n.Header[r]);0==t.headers.has("OffsetMinutes")&&t.headers.append("OffsetMinutes",syn.$w.timezoneOffsetMinutes);var s={method:t.method,headers:t.headers,body:e instanceof FormData?e:JSON.stringify(e),redirect:"follow"},a=(0==$object.isNullOrUndefined(t.timeout)&&(i=new AbortController,o=setTimeout(()=>i.abort(),t.timeout),s.signal=i.signal),await fetch(c,s))}else{if(1==$object.isNullOrUndefined(t.headers)&&(t.headers=new Headers,t.headers.append("Content-Type",t.contentType||"application/json")),syn.Environment&&(n=syn.Environment).Header)for(var r in n.Header)0==t.headers.has(r)&&t.headers.append(r,n.Header[r]);0==t.headers.has("OffsetMinutes")&&t.headers.append("OffsetMinutes",syn.$w.timezoneOffsetMinutes);var i,s={method:t.method,headers:t.headers,redirect:"follow"},a=(0==$object.isNullOrUndefined(t.timeout)&&(i=new AbortController,o=setTimeout(()=>i.abort(),t.timeout),s.signal=i.signal),await fetch(c,s))}o&&clearTimeout(o);e={error:"요청 정보 확인 필요"};return 1==a.ok?e=1==(s=a.headers.get("Content-Type")||"").includes("application/json")?await a.json():1==s.includes("text/")?await a.text():await a.blob():(e={error:`상태: ${a.status}, 텍스트: `+await a.text()},syn.$l.eventLog("$w.apiHttp","API HTTP 오류: "+e.error,"Error")),Promise.resolve(e)}}})},xmlHttp(){return new globalRoot.XMLHttpRequest},loadScript(e,t,n){document.getElementsByTagName("head")||document.documentElement.insertBefore(document.createElement("head"),document.documentElement.firstChild);var o,r=document.getElementsByTagName("head")[0],t=t||"id_"+syn.$l.random();return document.getElementById(t)?n():((o=document.createElement("script")).setAttribute("type","text/javascript"),o.setAttribute("id",t),syn.Config&&1==$string.toBoolean(syn.Config.IsClientCaching)?o.setAttribute("src",e):o.setAttribute("src",e+(-1<e.indexOf("?")?"&":"?")+"noCache="+(new Date).getTime()),n&&"function"==typeof n&&(o.onload=function(){n()}),r.insertBefore(o,r.firstChild)),$webform},loadStyle(e,t,n){document.getElementsByTagName("head")||document.documentElement.insertBefore(document.createElement("head"),document.documentElement.firstChild);var o,r=document.getElementsByTagName("head")[0],t=t||"id_"+syn.$l.random();return document.getElementById("scriptID")||((o=document.createElement("link")).setAttribute("rel","stylesheet"),o.setAttribute("type","text/css"),o.setAttribute("id",t),syn.Config&&1==$string.toBoolean(syn.Config.IsClientCaching)?o.setAttribute("href",e):o.setAttribute("href",e+(-1<e.indexOf("?")?"&":"?")+"noCache="+(new Date).getTime()),r.appendChild(o)),n&&"function"==typeof n&&n(),$webform},async fetchScript(moduleUrl){var result=null,moduleName,moduleScript,moduleName=1<moduleUrl.split("/").length?(moduleName=moduleUrl.split("/")[location.pathname.split("/").length-1],2==moduleName.split(".").length?-1<moduleName.indexOf(".")?moduleName.substring(0,moduleName.indexOf(".")):moduleName:""):moduleUrl,module;if(moduleName=moduleName.replaceAll("-","_"),0==$string.isNullOrEmpty(moduleName))try{if("object"==eval("typeof $"+moduleName))var $module=new syn.module,module=$module.extend(eval("$"+moduleName));else{var moduleScript=syn.Config&&1==syn.Config.IsClientCaching?await syn.$w.fetchText(moduleUrl+".js"):await syn.$w.fetchText(moduleUrl+".js?tick="+(new Date).getTime()),isBase64=function(e){var t=!1;return e&&32<e.length&&(1==/^[A-Za-z0-9+/]+={0,2}$/.test(e.substring(0,32))&&(t=!0)),t},moduleFunction;if(1==isBase64(moduleScript)){var decodeError=null,decodeScript;try{decodeScript=syn.$c.LZString.decompressFromBase64(moduleScript),null==decodeScript&&(decodeError="LZString decompress 오류")}catch{decodeError="LZString decompress 오류"}if(decodeError)try{decodeScript=syn.$c.base64Decode(moduleScript),decodeError=null}catch{decodeError="base64Decode 오류"}decodeError?syn.$l.eventLog("$w.fetchScript",decodeError+` 오류, <script src="${moduleUrl}.js"></script> 문법 확인이 필요합니다`,"Error"):moduleScript=decodeScript}module=moduleScript?(moduleFunction="return (function(){var module={};(function(window,module){'use strict';"+moduleScript+";var $module=new syn.module();$module.extend($"+moduleName+");module.exports=$module;})(typeof window!=='undefined'?window:{},typeof module!=='undefined'?module:{});return module.exports;})();",new Function(moduleFunction).call(globalRoot)):new syn.module}if(module.extends&&1==$object.isArray(module.extends))for(var i=0;i<module.extends.length;i++){var name=module.extends[i],result=await syn.$w.fetchText(name+".js"),moduleText=result.substring(result.indexOf("{"),result.lastIndexOf("}")+1),base=eval("("+moduleText+")"),$base=new syn.module;$base.extend(base),module=syn.$w.argumentsExtend($base,module),module.config=syn.$w.argumentsExtend($base.config,module.config),module.prop=syn.$w.argumentsExtend($base.prop,module.prop),module.hook=syn.$w.argumentsExtend($base.hook,module.hook),module.event=syn.$w.argumentsExtend($base.event,module.event),module.model=syn.$w.argumentsExtend($base.model,module.model),module.transaction=syn.$w.argumentsExtend($base.transaction,module.transaction),module.method=syn.$w.argumentsExtend($base.method,module.method),module.message=syn.$w.argumentsExtend($base.message,module.message),$base.hook&&$base.hook.extendLoad&&base.hook.extendLoad(module)}result=module}catch(error){syn.$l.eventLog("$w.fetchScript","스크립트 로드 오류: "+error,"Warning"),moduleScript&&syn.$l.eventLog("$w.fetchScript",'<script src="{0}.js"><\/script> 문법 확인이 필요합니다'.format(moduleUrl),"Error")}return result},async fetchText(t){var e,n={method:"GET",mode:"cors",cache:"default",credentials:"same-origin",headers:{"Content-Type":"text/plain"},redirect:"follow",referrerPolicy:"no-referrer-when-downgrade"},n=syn.$w.getFetchClientOptions?syn.$w.getFetchClientOptions(n):n,o=!1===syn.Config?.IsClientCaching?`${t.includes("?")?"&":"?"} tick = `+Date.now():"",t=t+o;try{const r=await fetch(t,n);return r.ok?await r.text():(e=await r.text().catch(()=>`HTTP ${r.status} `+r.statusText),syn.$l.eventLog("$w.fetchText",t+` Fetch 실패: 상태 ${r.status}, 텍스트: `+e,"Warning"),null)}catch(e){throw syn.$l.eventLog("$w.fetchText",t+" Fetch 오류: "+e,"Error"),e}},async fetchJson(t){var e,n={method:"GET",mode:"cors",cache:"default",credentials:"same-origin",headers:{"Content-Type":"application/json",Accept:"application/json"},redirect:"follow",referrerPolicy:"no-referrer-when-downgrade"},n=syn.$w.getFetchClientOptions?syn.$w.getFetchClientOptions(n):n,o=!1===syn.Config?.IsClientCaching?`${t.includes("?")?"&":"?"} tick = `+Date.now():"",t=t+o;try{const r=await fetch(t,n);if(!r.ok)return e=await r.text().catch(()=>`HTTP ${r.status} `+r.statusText),syn.$l.eventLog("$w.fetchJson",t+` Fetch 실패: 상태 ${r.status}, 텍스트: `+e,"Warning"),null;const s=r.headers.get("Content-Type")||"";return s.includes("application/json")||syn.$l.eventLog("$w.fetchJson",t+`에서 JSON을 예상했지만 Content - Type: ${s}을 받았습니다.`,"Warning"),await r.json()}catch(e){return e instanceof SyntaxError?syn.$l.eventLog("$w.fetchJson",t+" JSON 파싱 오류: "+e,"Error"):syn.$l.eventLog("$w.fetchJson",t+" Fetch 오류: "+e,"Error"),null}},transactionObject(e,t="Json"){e={programID:"",businessID:"",systemID:"",transactionID:"",dataMapInterface:null,transactionResult:!0,functionID:e,screenID:"",startTraceID:"",requestID:null,returnType:t,resultAlias:[],inputsItemCount:[],inputs:[]};return syn.$w.setServiceObject&&syn.$w.setServiceObject(e),e},dynamicType:Object.freeze({DataSet:"0",Json:"1",Scalar:"2",NonQuery:"3",SQLText:"4",SchemeOnly:"5",CodeHelp:"6",Xml:"7",DynamicJson:"8"}),async executeTransaction(m,h,$,s,a){const v=h?.fallback||function(){};if(1==$object.isNullOrUndefined(m)||1==$object.isNullOrUndefined(h))"browser"===globalRoot.devicePlatform&&alert("서비스 호출에 필요한 거래 정보가 구성되지 않았습니다"),syn.$l.eventLog("$w.executeTransaction","서비스 호출에 필요한 거래 정보 확인 필요","Error"),v(m,h);else{var i=syn.Config.SystemID+syn.Config.Environment.substring(0,1)+(1==$string.isNullOrEmpty(syn.Config.LoadModuleID)?"":syn.Config.LoadModuleID);let o=null,r=syn.$w.getStorage("apiServices",!1);if("node"===globalRoot.devicePlatform?r&&(o=r[i])?1==$object.isNullOrUndefined(r.BearerToken)&&globalRoot.bearerToken&&(r.BearerToken=globalRoot.bearerToken,syn.$w.setStorage("apiServices",r,!1)):null!=syn.Config.DomainAPIServer?(o=syn.Config.DomainAPIServer,r=r||{},(a||globalRoot.bearerToken)&&(r.BearerToken=a||globalRoot.bearerToken),r[i]=o,syn.$w.setStorage("apiServices",r,!1)):(syn.$l.eventLog("$w.executeTransaction","서비스 호출에 필요한 DomainAPIServer 정보 확인 필요","Error"),v(m,h)):r&&(o=r[i])?null!=r.BearerToken&&null!=r.BearerToken||!window.bearerToken||(r.BearerToken=window.bearerToken,syn.$w.setStorage("apiServices",r,!1)):null!=syn.Config.DomainAPIServer?(o=syn.Config.DomainAPIServer,r=r||{},window.bearerToken&&(r.BearerToken=window.bearerToken),r[i]=o,syn.$w.setStorage("apiServices",r,!1)):(syn.$l.eventLog("$w.executeTransaction","서비스 호출에 필요한 DomainAPIServer 정보 확인 필요","Error"),v(m,h)),r=syn.$w.getStorage("apiServices",!1),null==(o=r?r[i]:o))syn.$l.eventLog("$w.executeTransaction","apiService 확인 필요","Fatal"),v(m,h);else if(o.exceptionText)syn.$l.eventLog("$w.executeTransaction","apiService 확인 필요 SystemID: {0}, ServerType: {1}, Message: {2}".format(m.systemID,syn.Config.Environment.substring(0,1),o.exceptionText),"Fatal"),v(m,h);else{let e=syn.$w.getStorage("ipAddress",!1),t=(1==$object.isNullOrUndefined(e)&&0==$string.isNullOrEmpty(syn.Config.FindClientIPServer)&&(e=await syn.$r.httpFetch(syn.Config.FindClientIPServer||"/checkip").send(null,{method:"GET",redirect:"follow",timeout:3e3})),1==$object.isNullOrUndefined(e)&&(e="localhost"),syn.$w.setStorage("ipAddress",e,!1),"");t=o.Port&&""!=o.Port?"{0}://{1}:{2}{3}".format(o.Protocol,o.IP,o.Port,o.Path):"{0}://{1}{2}".format(o.Protocol,o.IP,o.Path);var i=syn.$w.Variable&&syn.$w.Variable.InstallType?syn.$w.Variable.InstallType:"L",l=syn.Config&&syn.Config.Environment?syn.Config.Environment.substring(0,1):"D",c=syn.Config&&syn.Config.Transaction?syn.Config.Transaction.MachineTypeID.substring(0,1):"W",u=(syn.$w.Variable&&syn.$w.Variable.ProgramID?syn.$w.Variable.ProgramID:m.programID).padStart(8,"0"),d=m.businessID.padStart(3,"0").substring(0,3),g=h.transactionID.padStart(6,"0").substring(0,6),f=h.functionID.padStart(4,"0").substring(0,4),p=(syn.$w.User&&syn.$w.User.TokenID?syn.$w.User.TokenID:syn.$l.random(6)).padStart(6,"0").substring(0,6),i=(""+i+l+u+d+g+f+c+p+$date.toString(new Date,"s").substring(0,6)).toUpperCase();let n="";0==$string.isNullOrEmpty(syn.Config.FindGlobalIDServer)&&(o.GlobalID=await syn.$r.httpFetch(syn.Config.FindGlobalIDServer).send({applicationID:u,projectID:d,transactionID:g,serviceID:f,screenID:h.screenID,tokenID:p},{method:"POST",redirect:"follow",timeout:3e3})),n=0==$string.isNullOrEmpty(o.GlobalID)?o.GlobalID:i;const I={accessToken:a||globalRoot.bearerToken||r.BearerToken,action:"SYN",kind:"BIZ",clientTag:syn.Config.SystemID.concat("|",syn.Config.HostName,"|",syn.Config.Program.ProgramName,"|",syn.Config.Environment.substring(0,1)),loadOptions:{encryptionType:syn.Config.Transaction.EncryptionType,encryptionKey:syn.Config.Transaction.EncryptionKey,platform:"browser"==globalRoot.devicePlatform?syn.$b.platform:globalRoot.devicePlatform},requestID:i,version:syn.Config.Transaction.ProtocolVersion,environment:syn.Config.Environment.substring(0,1),system:{programID:m.programID,moduleID:h.moduleID||("browser"==globalRoot.devicePlatform?globalRoot[syn.$w.pageScript].config.moduleID:void 0)||("browser"==globalRoot.devicePlatform?location.pathname.split("/").filter(Boolean)[0]:void 0)||syn.Config.ModuleID,version:syn.Config.SystemVersion,routes:[{systemID:m.systemID,requestTick:(new Date).getTime()}],localeID:syn.Config.Program.LocaleID,hostName:"browser"==globalRoot.devicePlatform?location.host:syn.Config.HostName,pathName:"browser"==globalRoot.devicePlatform?location.pathname:""},interface:{devicePlatform:globalRoot.devicePlatform,interfaceID:syn.Config.Transaction.MachineTypeID,sourceIP:e,sourcePort:0,sourceMAC:"",connectionType:"node"==globalRoot.devicePlatform?"unknown":navigator.connection?.effectiveType,timeout:syn.Config.TransactionTimeout},transaction:{globalID:n,businessID:m.businessID,transactionID:h.transactionID,functionID:h.functionID,commandType:h.options&&h.options.commandType||"D",simulationType:syn.Config.Transaction.SimulationType,terminalGroupID:"browser"==globalRoot.devicePlatform?syn.$w.User?"{0}|{1}".format(syn.$w.User.CompanyID,syn.$w.User.DepartmentID):"":syn.Config.Program.BranchCode,operatorID:"browser"==globalRoot.devicePlatform?syn.$w.User?syn.$w.User.UserID:"":syn.Config.Program.ProgramName,screenID:h.screenID,startTraceID:h.startTraceID,dataFormat:syn.Config.Transaction.DataFormat,compressionYN:syn.Config.Transaction.CompressionYN},payLoad:{property:{},dataMapInterface:"",dataMapCount:[],dataMapSet:[]}};if(syn.$w.transactionLoadOptions&&syn.$w.transactionLoadOptions(I.loadOptions),0==$object.isNullOrUndefined(h.options)){for(const E in h.options){var y=h.options[E];if("encryptionType"==E||"encryptionKey"==E||"platform"==E)throw v(m,h),new Error("{0} 옵션 사용 불가".format(E));I.loadOptions[E]=y}l=I.loadOptions.dynamic,c=(0==$string.isNullOrEmpty(l)&&0==$string.toBoolean(l)&&(delete I.loadOptions.dynamic,delete I.loadOptions.authorize,delete I.loadOptions.commandType,delete I.loadOptions.returnType,delete I.loadOptions.transactionScope,delete I.loadOptions.transactionLog),I.loadOptions.action),u=(0==$string.isNullOrEmpty(c)&&(I.action=c,delete I.loadOptions.action),I.loadOptions.kind);0==$string.isNullOrEmpty(u)&&(I.kind=u,delete I.loadOptions.kind),delete I.loadOptions.message}const S=context[syn.$w.pageScript];if(S&&S.hook.payLoadProperty){let e={};e=S.hook.payLoadProperty(h.transactionID,h.functionID),1==$object.isNullOrUndefined(e)&&(e={}),I.payLoad.property=e}if(m.transactions){d=m.transactions.filter(function(e){return e.functionID==h.functionID});if(1==d.length){const T=d[0];g=T.inputs.map(function(e){return e.requestType}).join(","),f=T.outputs.map(function(e){return e.responseType}).join(",");I.payLoad.dataMapInterface="{0}|{1}".format(g,f)}}else h.dataMapInterface&&(I.payLoad.dataMapInterface=h.dataMapInterface);if("J"!=I.transaction.dataFormat&&"T"!=I.transaction.dataFormat)throw v(m,h),new Error("transaction.dataFormat 확인 필요: {0}".format(I.transaction.dataFormat));I.payLoad.dataMapCount=h.inputsItemCount,I.payLoad.dataMapSet=[],I.payLoad.dataMapSetRaw=[];var b=h.inputs.length;for(let e=0;e<b;e++){var w=h.inputs[e];const L=[];for(let e=0;e<w.length;e++){var D=w[e];L.push({id:D.prop,value:D.val})}"Y"==syn.Config.Transaction.CompressionYN?"J"==I.transaction.dataFormat?I.payLoad.dataMapSetRaw.push(syn.$c.LZString.compressToBase64(JSON.stringify(L))):I.payLoad.dataMapSetRaw.push(syn.$c.LZString.compressToBase64($object.toCSV(L,{delimeter:"｜",newline:"↵"}))):"J"==I.transaction.dataFormat?I.payLoad.dataMapSet.push(L):I.payLoad.dataMapSetRaw.push($object.toCSV(L,{delimeter:"｜",newline:"↵"}))}if("node"!=globalThis.devicePlatform&&"PSH"==I.action){p=new Blob([JSON.stringify(I)],{type:"application/json; charset=UTF-8"});navigator.sendBeacon(t,p),syn.$w.domainTransactionLoaderEnd&&syn.$w.domainTransactionLoaderEnd(),syn.$w.closeProgressMessage&&syn.$w.closeProgressMessage()}else{const O=syn.$w.xmlHttp();if(O.open(syn.$w.method,t,!0),O.setRequestHeader("Accept-Language",syn.$w.localeID),O.setRequestHeader("Server-SystemID",m.systemID||syn.Config.SystemID),O.setRequestHeader("Server-BusinessID",m.businessID),syn.Environment){var C=syn.Environment;if(C.Header)for(const x in C.Header)O.setRequestHeader(x,C.Header[x])}if(syn.$w.setServiceClientHeader&&0==syn.$w.setServiceClientHeader(O))syn.$l.eventLog("$w.executeTransaction","setServiceClientHeader 전송 안함","Warning"),v(m,h);else{if(void 0!==s&&1==O.async&&(O.async=s,0==O.async))return O.setRequestHeader("X-Requested-With","HandStack ServiceClient"),O.setRequestHeader("Content-Type","application/json"),O.send(I),O;O.onreadystatechange=function(){if(4===O.readyState)if(200!==O.status)0==O.status?syn.$l.eventLog("$w.executeTransaction","X-Requested 전송 오류","Fatal"):syn.$l.eventLog("$w.executeTransaction","응답 상태 - {0}: ".format(O.statusText)+O.responseText,"Error"),syn.$w.domainTransactionLoaderEnd&&syn.$w.domainTransactionLoaderEnd(),v(m,h);else if(syn.$w.clientTag&&syn.$w.serviceClientInterceptor&&!1===syn.$w.serviceClientInterceptor(syn.$w.clientTag,O))syn.$l.eventLog("$w.executeTransaction","serviceClientInterceptor 전송 안함","Warning"),v(m,h);else{try{var n=JSON.parse(O.responseText);if(1==h.transactionResult)if(1==n.acknowledge){const g=[];var t=n.message;if(null!=n.result.dataSet&&0<n.result.dataSet.length){var e=n.result.dataSet,o=e.length;for(let t=0;t<o;t++){const f=e[t];if(n.transaction.simulationType==syn.$w.dynamicType.CodeHelp)g.push({id:f.id,value:f.value});else if("J"==n.transaction.dataFormat)"Y"==n.transaction.compressionYN?g.push({id:f.id,value:JSON.parse(syn.$c.LZString.decompressFromBase64(f.value))}):g.push({id:f.id,value:f.value});else if(m.transactions){var r,s=m.transactions.find(function(e){return e.functionID==h.functionID});if(s){let e=null;0==$object.isEmpty(f.value)&&(e=("Y"==n.transaction.compressionYN?syn.$c.LZString.decompressFromBase64(f.value):f.value).split("＾"),r=$string.toParameterObject(e[0]),e=$string.toJson(e[1],{delimeter:"｜",newline:"↵",meta:r}),"Form"==s.outputs[t].responseType?(e=e[0],1==$object.isNullOrUndefined(e)&&(e={})):1==$object.isNullOrUndefined(e)&&(e=[])),g.push({id:f.id,value:e})}}else{let e=("Y"==n.transaction.compressionYN?syn.$c.LZString.decompressFromBase64(f.value):f.value).split("＾");var a=$string.toParameterObject(e[0]);e=$string.toJson(e[1],{delimeter:"｜",newline:"↵",meta:a}),1==f.id.startsWith("Form")&&(e=e[0],1==$object.isNullOrUndefined(e)?e={}:1==$object.isNullOrUndefined(e)&&(e=[])),g.push({id:f.id,value:e})}}}if($){const p={};if(t.additions&&0<t.additions.length)for(let e=0;e<t.additions.length;e++){var i=t.additions[e];"F"==i.code&&1==$object.isNullOrUndefined(p[i.code])?p[i.code]=i.text:"P"!=i.code&&i.code}try{$(g,p,n.correlationID)}catch(e){syn.$l.eventLog("$w.executeTransaction callback","executeTransaction 콜백 오류: "+e,"Error"),v(m,h)}}}else{var l=n.exceptionText,c="거래: {0}, 기능: {1} 수행중 오류가 발생하였습니다\nGlobalID: {2}".format(I.transaction.transactionID,I.transaction.functionID,I.transaction.globalID);if(syn.$w.serviceClientException&&syn.$w.serviceClientException("요청오류",c,l),syn.$l.eventLog("$w.executeTransaction","거래 실행 오류: "+l,"Warning"),v(m,h),"browser"===globalRoot.devicePlatform)$this&&$this.hook&&$this.hook.frameEvent&&$this.hook.frameEvent("transactionException",{transactionID:I.transaction.transactionID,functionID:I.transaction.functionID,errorText:l,errorMessage:c});else if($)try{$([],null,n.correlationID)}catch(e){syn.$l.eventLog("$w.executeTransaction callback","executeTransaction 콜백 오류: "+e,"Error")}}else if($){if(n&&n.acknowledge&&1==n.acknowledge)try{if(null!=n.result.dataSet&&0<n.result.dataSet.length){var u=n.result.dataSet,d=u.length;for(let e=0;e<d;e++){const y=u[e];"J"==n.transaction.dataFormat?"Y"==n.transaction.compressionYN&&(y.value=JSON.parse(syn.$c.LZString.decompressFromBase64(y.value))):y.value="Y"==n.transaction.compressionYN?syn.$c.LZString.decompressFromBase64(y.value):y.value}}}catch(e){syn.$l.eventLog("$w.executeTransaction","executeTransaction 오류: "+e,"Error"),v(m,h)}try{$(n,null,n.correlationID)}catch(e){syn.$l.eventLog("$w.executeTransaction callback","executeTransaction 콜백 오류: "+e,"Error"),v(m,h)}}}catch(e){l="거래: {0}, 기능: {1} 수행중 오류가 발생하였습니다\nGlobalID: {2}".format(I.transaction.transactionID,I.transaction.functionID,I.transaction.globalID);if(syn.$w.serviceClientException&&syn.$w.serviceClientException("요청오류",l,e.stack),syn.$l.eventLog("$w.executeTransaction","executeTransaction 오류: "+e,"Error"),v(m,h),"browser"===globalRoot.devicePlatform)$this&&$this.hook&&$this.hook.frameEvent&&$this.hook.frameEvent("transactionError",{transactionID:I.transaction.transactionID,functionID:I.transaction.functionID,errorText:e.message,errorMessage:l});else if($)try{$([],null)}catch(e){syn.$l.eventLog("$w.executeTransaction callback","executeTransaction 콜백 오류: "+e,"Error"),v(m,h)}}syn.$w.domainTransactionLoaderEnd&&syn.$w.domainTransactionLoaderEnd()}},syn.$l.eventLog("$w.executeTransaction","거래 GlobalID: "+I.transaction.globalID,"Verbose"),O.setRequestHeader("X-Requested-With","HandStack ServiceClient"),O.setRequestHeader("Content-Type","application/json"),O.timeout=syn.Config.TransactionTimeout,O.send(JSON.stringify(I))}}}}},pseudoStyle(e,t,n){var o,r=document.head||(0==document.getElementsByTagName("head").length?null:document.getElementsByTagName("head")[0]);r&&(""==(o=document.getElementById(e)||document.createElement("style")).id&&(o.id=e),o.innerHTML=t+"{"+n+"}",r.appendChild(o))},pseudoStyles(e,t){var n=document.head||(0==document.getElementsByTagName("head").length?null:document.getElementsByTagName("head")[0]);if(n&&1==$object.isArray(t)&&0<t.length){for(var o=document.getElementById(e)||document.createElement("style"),r=(""==o.id&&(o.id=e),[]),s=0,a=t.length;s<a;s++){var i=t[s];r.push(i.selector+"{"+i.cssText+"}")}o.innerHTML=r.join("\n"),n.appendChild(o)}}}),syn&&!syn.Config&&(syn.Config={}),context.$webform=syn.$w=$webform,"node"===globalRoot.devicePlatform){var fs=require("fs"),path=require("path"),filePath,data;process.env.SYN_CONFIG?syn.Config=JSON.parse(process.env.SYN_CONFIG):(filePath=path.join(process.cwd(),"node.config.json"),1==fs.existsSync(filePath)?(data=fs.readFileSync(filePath,"utf8"),syn.Config=JSON.parse(data),process.env.SYN_LogMinimumLevel=syn.Config.LogMinimumLevel||"trace",process.env.SYN_FileLogBasePath=syn.Config.FileLogBasePath||path.join(process.cwd(),"..","log","function","javascript"),process.env.SYN_LocalStoragePath=syn.Config.LocalStoragePath||path.join(process.cwd(),"..","cache","function")):console.error("Node.js 환경설정 파일이 존재하지 않습니다. 파일 경로: {0}".format(filePath))),syn.Config&&1==$string.isNullOrEmpty(syn.Config.DataSourceFilePath)&&(syn.Config.DataSourceFilePath=path.join(process.cwd(),"..","modules","dbclient","module.json"));const browserOnlyMethods=["activeControl","contentLoaded","addReadyCount","removeReadyCount","createSelection","getTriggerOptions","scrollToTop","setFavicon","fileDownload","pseudoStyle","pseudoStyles","isPageLoad","pageReadyTimeout","eventAddReady","eventRemoveReady","moduleReadyIntervalID","remainingReadyIntervalID","remainingReadyCount","defaultControlOptions","mappingModule"];browserOnlyMethods.forEach(e=>{delete $webform[e]})}else{const pathname=location.pathname,pathSegments=pathname.split("/").filter(Boolean);if(0<pathSegments.length){const filename=pathSegments[pathSegments.length-1],pageProject=pathSegments[pathSegments.length-2]||"",pageScript="$"+(filename.includes(".")?filename.substring(0,filename.indexOf(".")):filename);$webform.extend({pageProject:pageProject,pageScript:pageScript})}syn.$l.addEvent(context,"load",()=>{const e=context[$webform.pageScript];e?.hook?.windowLoad?.()});var urlArgs="true"==syn.$r.getCookie("syn.iscache")?"":"?tick="+(new Date).getTime(),isAsyncLoad=0==syn.$b.isIE;if(globalRoot.isLoadConfig=!1,context.synConfig?(syn.Config=syn.$w.argumentsExtend(syn.Config,synConfig),context.synConfig=void 0,globalRoot.isLoadConfig=!0,setTimeout(async function(){await $webform.contentLoaded()})):$webform.loadJson("/"+(context.synConfigName||"syn.config.json")+urlArgs,null,function(e,t){syn.Config=syn.$w.argumentsExtend(syn.Config,t),globalRoot.isLoadConfig=!0,setTimeout(async function(){await $webform.contentLoaded()})},null,isAsyncLoad),context.Configuration&&(syn.Environment=context.Configuration,syn.$l.deepFreeze(syn.Environment),delete context.Configuration),syn.Environment){var environment=syn.Environment;if(environment.Cookie)for(var item in environment.Cookie){var value=syn.$r.getCookie(item);1==$object.isNullOrUndefined(value)&&syn.$r.setCookie(item,environment.Cookie[item])}}"browser"===globalRoot.devicePlatform&&(syn.$b.appName=syn.Config.HostName,syn.$b.appCodeName=syn.Config.ApplicationID)}}(globalRoot),!function(e){"use strict";var d=e.$print||new syn.module;d.extend({base64ExcelFile:null,reportName:`report-${$date.toString(new Date,"d")}.pdf`,datetimeFormat:"yyyy-MM-dd",boolTrue:"○",boolFalse:"×",workItems:[],workActions:[],workData:null,reportifyServer:"",reportifyPath:"/reportify/api/brief",reportifyTemplateUrl:"/reportify/api/index/download-template?reportFileID=",pageExportScheme:"export-scheme",pageExcelToPdf:"excel-to-pdf",concreate(){"browser"==globalRoot.devicePlatform?(1!=$string.toBoolean(syn.Config.IsReportifyModule)||window.PDFObject||syn.$w.loadScript("/lib/pdfobject/pdfobject.min.js"),1!=$string.toBoolean(syn.Config.IsReportifyModule)||window.printJS||syn.$w.loadScript("/lib/print-js/print.min.js")):"node"==globalRoot.devicePlatform&&(d.reportifyServer="http://localhost:8000")},getReportifyUrl(e){return""+d.reportifyServer+d.reportifyPath+"/"+e},getDocumentTemplateUrl(e){return""+d.reportifyServer+d.reportifyTemplateUrl+e},formatDate(e,t){const n={yyyy:e.getFullYear(),MM:("0"+(e.getMonth()+1)).slice(-2),dd:("0"+e.getDate()).slice(-2),HH:("0"+e.getHours()).slice(-2),mm:("0"+e.getMinutes()).slice(-2),ss:("0"+e.getSeconds()).slice(-2)};return t.replace(/yyyy|MM|dd|HH|mm|ss/gi,e=>n[e])},updateOptions(e){e&&(0==$string.isNullOrEmpty(e.base64ExcelFile)&&(d.base64ExcelFile=e.base64ExcelFile),0==$string.isNullOrEmpty(e.reportName)&&(d.reportName=e.reportName),0==$string.isNullOrEmpty(e.datetimeFormat)&&(d.datetimeFormat=e.datetimeFormat),0==$string.isNullOrEmpty(e.boolTrue)&&(d.boolTrue=e.boolTrue),0==$string.isNullOrEmpty(e.boolFalse)&&(d.boolFalse=e.boolFalse))},async generate(e,t){var n={templateID:e,reportName:d.reportName,datetimeFormat:d.datetimeFormat,boolTrue:d.boolTrue,boolFalse:d.boolFalse,workItems:d.workItems,workActions:d.workActions};0==$string.isNullOrEmpty(t)&&(0==(1==t.startsWith("http:")||1==t.startsWith("https:"))&&(t=""+d.reportifyServer+t),d.base64ExcelFile=await d.getUrlToBase64(t)),0==$string.isNullOrEmpty(d.base64ExcelFile)&&(n.base64ExcelFile=d.base64ExcelFile);for(var o=0,r=n.workItems.length;o<r;o++){var s=n.workItems[o];s.options&&1==$object.isObject(s.options)&&(s.options=JSON.stringify(s.options))}for(o=0,r=n.workActions.length;o<r;o++){var a=n.workActions[o];a.options&&1==$object.isObject(a.options)&&(a.options=JSON.stringify(a.options))}return n},addWorkItem(e="workItems",t,n,o,r,s,a,i,l,c){var u;1==$object.isNumber(t)?t||n||o||r||s?syn.$l.eventLog("addWorkItem","document, worksheet, bind, row, col 필수 항목 필요","Warning"):(u={document:t,worksheet:n,bind:o,row:r,col:s,type:a,data:i,step:c},l&&(u.overtake=l),d[e].push(u)):1==$object.isObject(t)&&(t.document&&t.worksheet&&t.bind&&t.row&&t.col?(u={document:t.document,worksheet:t.worksheet,bind:t.bind,row:t.row,col:t.col,type:t.type,data:t.data,step:t.step},t.overtake&&(u.overtake=t.overtake),d[e].push(u)):syn.$l.eventLog("addWorkItem","document, worksheet, bind, row, col 필수 항목 필요","Warning"))},addAtWorkItem(e="workItems",t,n,o,r,s){var a,i;s=s||!0,-1===d[e].findIndex(e=>e.document===t&&e.worksheet===n&&e.datafield===o)?syn.$l.eventLog("addAtWorkItem",`document: ${t}, worksheet: ${n}, datafield: ${o} 항목 확인 필요`,"Warning"):-1===(i=d[e].findIndex(e=>e.document===r.document&&e.worksheet===r.worksheet&&0==$string.isNullOrEmpty(r.datafield)&&e.datafield===r.datafield))?syn.$l.eventLog("addAtWorkItem",`datafield: ${r.datafield} 중복 항목 확인 필요`,"Warning"):(a={document:r.document,worksheet:r.worksheet,datafield:r.datafield,bind:r.bind,row:r.row,col:r.col,type:r.type,data:r.data},r.overtake&&(a.overtake=r.overtake),1==$string.toBoolean(s)?d[e].splice(i+1,0,a):d[e].splice(i,0,a))},removeWorkItem(e="workItems",t,n,o){var r=d[e].findIndex(e=>e.document===t&&e.worksheet===n&&e.datafield===o);-1<r?d[e].splice(r,1):syn.$l.eventLog("removeWorkItem",`document: ${t}, worksheet: ${n}, datafield: ${o} 항목 확인 필요`,"Warning")},updateWorkItem(e="workItems",t,n,o,r){e=d[e].find(e=>e.document===t&&e.worksheet===n&&e.datafield===o);e?Object.assign(e,r):syn.$l.eventLog("updateWorkItem",`document: ${t}, worksheet: ${n}, datafield: ${o} 항목 확인 필요`,"Warning")},bindingWorkItems(e="workItems",t,n){var o,r=JSON.parse(JSON.stringify(t));for(o in n){var s=n[o];if(s)for(var a=0,i=r.length;a<i;a++){var l,c=r[a];1==$object.isNullOrUndefined(c.bind)&&(c.bind="cell"),1==["cell"].includes(c.bind)&&1==s.hasOwnProperty(c.datafield)&&0==Array.isArray(s)?(1==(l=c.bind.split(":")).length||1<l.length&&l[1]==o)&&(c.data=s[c.datafield]||""):1==["item","list"].includes(c.bind.split(":")[0])&&1==Array.isArray(s)&&(1==(l=c.bind.split(":")).length||1<l.length&&l[1]==o)&&(c.data=s.map(t=>c.datafield.map(e=>t[e]||""))),c.bind=c.bind.split(":")[0]}}return d[e]=r},addItem(e,t,n,o,r,s,a,i,l){d.addWorkItem("workItems",e,t,n,o,r,s,a,i,l)},addAtItem(e,t,n,o,r){d.addAtWorkItem("workItems",e,t,n,o,r)},removeItem(e,t,n){d.removeWorkItem("workItems",e,t,n)},updateItem(e,t,n,o){d.updateWorkItem("workItems",e,t,n,o)},bindingItems(e,t){d.bindingWorkItems("workItems",e,t)},addAction(e,t,n,o,r,s,a,i,l){d.addWorkItem("workActions",e,t,n,o,r,s,a,i,l)},addAtAction(e,t,n,o,r){d.addAtWorkItem("workActions",e,t,n,o,r)},removeAction(e,t,n){d.removeWorkItem("workActions",e,t,n)},updateAction(e,t,n,o){d.updateWorkItem("workActions",e,t,n,o)},bindingActions(e,t){d.bindingWorkItems("workActions",e,t)},transformWorkData(e,n){return e.map(t=>n.map(e=>t[e]))},splitDataChunks(e,t,n){var o=[];0<t&&t<=e.length&&o.push(e.slice(0,t));for(var r=t,s=e.length;r<s;r+=n)o.push(e.slice(r,r+n));return o},async renderViewer(e,t,n){(t=syn.$l.getElement(t))&&(parent.syn&&parent.syn.$w.progressMessage&&parent.syn.$w.progressMessage(),n=syn.$w.argumentsExtend({width:"100%",height:"100%",forcePDFJS:!0,PDFJS_URL:"/reportify/lib/pdfjs/web/viewer.html",pdfOpenParams:{navpanes:0,toolbar:0,statusbar:0,view:"FitH"},fallbackLink:'<p>이 브라우저는 인라인 PDF를 지원하지 않습니다. 내용을 확인하려면 PDF를 다운로드하세요. <a href="[url]"> PDF 다운로드 </a> </ p>',excelUrl:"",workData:null},n),e=await d.generate(e,n.excelUrl),null!=n.workItems&&(e.workItems=n.workItems),null!=n.workActions&&(e.workActions=n.workActions),null!=n.workData&&(e.workData=n.workData),(e=await syn.$r.httpRequest("POST",d.getReportifyUrl(d.pageExcelToPdf),e,null,{responseType:"blob"}))&&200==e.status&&(e=syn.$r.createBlobUrl(e.response),PDFObject.embed(e,t,n)),parent.syn&&parent.syn.$w.progressMessage&&parent.syn.$w.closeProgress())},async renderPrint(e,t){parent.syn&&parent.syn.$w.progressMessage&&parent.syn.$w.progressMessage(),t=syn.$w.argumentsExtend({excelUrl:"",workData:null},t);var e=await d.generate(e,t.excelUrl),t=(null!=t.workItems&&(e.workItems=t.workItems),null!=t.workActions&&(e.workActions=t.workActions),null!=t.workData&&(e.workData=t.workData),await syn.$r.httpRequest("POST",d.getReportifyUrl(d.pageExcelToPdf),e,null,{responseType:"blob"}));t&&200==t.status&&(e=syn.$r.createBlobUrl(t.response),printJS(e)),parent.syn&&parent.syn.$w.progressMessage&&parent.syn.$w.closeProgress()},async getUrlToBase64(e){var t=null,e=await syn.$r.httpFetch(e).send();return t=e&&e.error?t:await syn.$l.blobToBase64(e,!0)},async getSchemeText(e,t,n){var o="",e=await d.getUrlToBase64(e);if(e){var r=d.getReportifyUrl(d.pageExportScheme),e={body:{base64ExcelFile:e,indent:$string.toBoolean(n),formatted:$string.toBoolean(t)}},n=await syn.$r.httpRequest("POST",r,e);if(n&&200==n.status){var s,a,o=n.response;if(window.ClipboardJS)return""==(s=syn.$l.get("btn-clipboard-text")||document.createElement("button")).id&&(s.id="btn-clipboard-text",s.style.display="none"),s.setAttribute("data-clipboard-text",o),document.body.appendChild(s),a=new ClipboardJS(s),new Promise((t,n)=>{a.on("success",e=>{a.destroy(),document.body.removeChild(s),t(!0)}),a.on("error",e=>{a.destroy(),document.body.removeChild(s),n(!1)}),s.click()})}else syn.$l.eventLog("getSchemeText","작업 항목 요청 오류: "+r,"Error")}return o},requestReportValue(r,e,t,s){var n={REPORT_ID:"",COMPANY_NO:"",DOCUMENT_FORM_ID:"",DOCUMENT_NO:"",EMPLOYEE_NO:"",PRINT_TYPE:"",ENV:"D"};syn.Config&&syn.Config.Environment&&(n.ENV=syn.Config.Environment.substring(0,1)),e=syn.$w.argumentsExtend(n,e);const a={programID:syn.Config.ApplicationID,businessID:t.businessID||syn.Config.ProjectID||"RPT",transactionID:t.transactionID||e.REPORT_ID,functionID:t.functionID||"PD01",dataMapInterface:t.dataMapInterface||"Row|Form",inputObjects:Object.entries(e).map(([e,t])=>({prop:e,val:t}))};try{syn.$w.transactionDirect(a,function(e){var t={};if(e&&0<e.length)for(var n=0;n<e.length;n++){var o=e[n];t[o.id]=o.value}else syn.$l.moduleEventLog(r,"requestReportValue","보고서 요청 오류, directObject: {0}".format(JSON.stringify(a)),"Error");s(null,t)})}catch(e){s(e,null)}}}),e.$print=syn.$p=d,"node"===globalRoot.devicePlatform&&(delete syn.$p.renderViewer,delete syn.$p.renderPrint,delete syn.$p.getSchemeText)}(globalRoot),!function(e){"use strict";var t=e.$system||new syn.module;t.extend({getDataSource(e,n,o){if(!o)throw new Error("callback 함수 정의 필요");try{var r,t,s=syn.getModuleLibrary(e);s?(r=s.config,1==(t=require("fs")).existsSync(syn.Config.DataSourceFilePath)?t.readFile(syn.Config.DataSourceFilePath,function(e,t){e?o(e,null):(e=JSON.parse(t).ModuleConfig.DataSource,0==$object.isArray(e)?e.DataSourceID===n&&e.ApplicationID===r.ApplicationID&&(e.ProjectID.includes("*")||-1<e.ProjectID.split(",").indexOf(r.ProjectID))?(1==$string.toBoolean(e.IsEncryption)&&(e.ConnectionString=syn.$s.decryptConnectionString(e),e.IsEncryption=!1),o(null,{connectionString:e.ConnectionString,provider:e.DataProvider})):o("DataSourceID: {0}, ApplicationID: {1}, ProjectID: {2} 환경 설정 확인 필요".format(n,r.ApplicationID,r.ProjectID),null):(t=e.find(function(e){return e.DataSourceID==n&&e.ApplicationID===r.ApplicationID&&(e.ProjectID.includes("*")||-1<e.ProjectID.split(",").indexOf(r.ProjectID))}))?(1==$string.toBoolean(t.IsEncryption)&&(t.ConnectionString=syn.$s.decryptConnectionString(t),t.IsEncryption=!1),o(null,{connectionString:t.ConnectionString,provider:t.DataProvider})):o("DataSourceID: {0}, ApplicationID: {1}, ProjectID: {2} 환경 설정 확인 필요".format(n,r.ApplicationID,r.ProjectID),null))}):o("DataSource 설정 파일 경로 확인 필요",null)):o("ModuleID 확인 필요",null)}catch(e){o(e,null)}},decryptConnectionString(t){var e="";if(t&&t.ConnectionString)try{var n,o=$string.split(t.ConnectionString,"."),r=o[0],s=o[1],a=o[2],i=o[3];syn.$c.sha256(r+`.${s}.`+a)===i&&(n=syn.$c.base64Decode(s).padEnd(32,"0").substring(0,32),e=syn.$c.aesDecode(r,n))}catch(e){syn.$l.eventLog("decryptConnectionString",JSON.stringify(t)+" 확인 필요","Error")}return e},getStatement(e,t,n){var o=null,e=syn.getModuleLibrary(e);if(e)try{var r,s=e.featureSQLPath;s&&1==fs.existsSync(s)?((r=require("mybatis-mapper")).createMapper([s]),r.featureSQLPath=s,o=r.getStatement("feature",t,n)):syn.$l.eventLog("getStatement","featureSQLPath - {0} 확인 필요".format(s),"Error")}catch(e){syn.$l.eventLog("getStatement",e,"Error")}else syn.$l.eventLog("getStatement","ModuleID 확인 필요","Error");return o},executeQuery(u,d,g,f){var e=syn.getModuleLibrary(u);e?(e=e.config,syn.$s.getDataSource(u,e.DataSourceID,function(e,t){if(e)f&&f(e,null);else if("SqlServer"==t.provider)(o=require("mssql")).connect(t.connectionString,function(e){if(e)f&&f(e,null);else{var t="";try{null==(t=syn.$s.getStatement(u,d,g))&&(n="moduleID: {0}, statementID: {1}- 쿼리 매핑 확인 필요".format(u,d),syn.$l.eventLog("getStatement",n,"Error"),f&&f(n,null)),t=t.replace(/\\\"/g,'"'),1==$string.isNullOrEmpty(t.trim())&&(n="moduleID: {0}, statementID: {1}- SQL 내용 없음".format(u,d,e.message),syn.$l.eventLog("getStatement",n,"Error"),f&&f(n,null))}catch(e){o.close();var n="moduleID: {0}, statementID: {1}- {2}".format(u,d,e.message);syn.$l.eventLog("getStatement",n,"Error"),f&&f(n,null)}f?o.query(t,function(e,t){o.close(),e?(e="moduleID: {0}, statementID: {1}- {2}".format(u,d,e.message),syn.$l.eventLog("getStatement",e,"Error"),f&&f(e,null)):f(null,t)}):o.query(t,function(e,t){o.close(),e&&(e="moduleID: {0}, statementID: {1}- {2}".format(u,d,e.message),syn.$l.eventLog("getStatement",e,"Error"))})}});else if("MySQL"==t.provider){for(var o,e=require("mysql"),n=t.connectionString.split(";"),r={host:"localhost",user:"",password:"",database:"",multipleStatements:!0},s=n.length,a=0;a<s;a++)-1<(i=n[a]).indexOf("Server=")?r.host=i.substring(7):-1<i.indexOf("Uid=")?r.user=i.substring(4):-1<i.indexOf("Pwd=")?r.password=i.substring(4):-1<i.indexOf("Database=")?r.database=i.substring(9):-1<i.indexOf("Timeout=")&&(r.connectTimeout=i.substring(8));(o=e.createConnection(r)).connect(function(e){if(e)f&&f(e,null);else{var t="";try{t=(t=syn.$s.getStatement(u,d,g)).replace(/\\\"/g,'"'),1==$string.isNullOrEmpty(t.trim())&&(n="moduleID: {0}, statementID: {1}- SQL 내용 없음".format(u,d,e.message),syn.$l.eventLog("getStatement",n,"Error"),f&&f(n,null))}catch(e){o.end();var n="moduleID: {0}, statementID: {1}- {2}".format(u,d,e.message);syn.$l.eventLog("getStatement",n,"Error"),f&&f(n,null)}f?o.query(t,function(e,t){o.end(),e?(e="moduleID: {0}, statementID: {1}- {2}".format(u,d,e.message),syn.$l.eventLog("getStatement",e,"Error"),f&&f(e,null)):f(null,t)}):o.query(t,function(e,t){o.end(),e&&(e="moduleID: {0}, statementID: {1}- {2}".format(u,d,e.message),syn.$l.eventLog("getStatement",e,"Error"))})}})}else if("Oracle"==t.provider){for(var i,e=require("oracledb"),l=t.connectionString.split(";"),c={user:"",password:"",connectString:t.connectionString},s=l.length,a=0;a<s;a++)-1<(i=l[a]).indexOf("User Id=")?c.user=i.substring(8):-1<i.indexOf("Password=")&&(c.password=i.substring(9));e.getConnection(c,function(e,n){if(e)f&&f(e,null);else{var t="";try{t=(t=syn.$s.getStatement(u,d,g)).replace(/\\\"/g,'"'),1==$string.isNullOrEmpty(t.trim())&&(o="moduleID: {0}, statementID: {1}- SQL 내용 없음".format(u,d,e.message),syn.$l.eventLog("getStatement",o,"Error"),f&&f(o,null))}catch(e){n.close();var o="moduleID: {0}, statementID: {1}- {2}".format(u,d,e.message);syn.$l.eventLog("getStatement",o,"Error"),f&&f(o,null)}f?n.execute(t,function(e,t){n.close(),e?(e="moduleID: {0}, statementID: {1}- {2}".format(u,d,e.message),syn.$l.eventLog("getStatement",e,"Error"),f&&f(e,null)):f(null,t)}):n.execute(t,function(e,t){n.close(),e&&(e="moduleID: {0}, statementID: {1}- {2}".format(u,d,e.message),syn.$l.eventLog("getStatement",e,"Error"))})}})}else f('데이터 원본 "{0}" 확인 필요'.format(t.provider),null)})):f("ModuleID 확인 필요",null)}}),e.$system=syn.$s=t}(globalRoot),"node"===globalRoot.devicePlatform&&(fs=require("fs"),path=require("path"),"undefined"!=typeof localStorage&&null!==localStorage||(LocalStorage=require("node-localstorage").LocalStorage,globalRoot.localStorage=new LocalStorage(process.env.SYN_LocalStoragePath||"../cache/function")),moduleLogDirectory=path.join(process.env.SYN_FileLogBasePath||"../log/function/javascript",syn.Config.ApplicationID,syn.Config.ProjectID),0==fs.existsSync(moduleLogDirectory)&&fs.mkdirSync(moduleLogDirectory,{recursive:!0}),void 0!==globalRoot.$logger&&null!==globalRoot.$logger||(options={logDirectory:moduleLogDirectory,fileNamePattern:"{0}_function_<DATE>.log".format(syn.Config.ApplicationID),dateFormat:"YYYYMMDD"},logger=require("simple-node-logger").createRollingFileLogger(options),logger.setLevel(process.env.SYN_LogMinimumLevel||"trace"),globalRoot.$logger=logger),syn&&!syn.initializeModuleScript&&(syn.initializeModuleScript=function(functionID,moduleFileName){var result=null;if(moduleFileName)try{var fileDirectory=path.dirname(moduleFileName),fileDirectoryName=path.basename(fileDirectory),moduleID=functionID,functionModule=syn.functionModules[moduleID],functionModule,featureSQLPath,moduleLogDirectory,options,logger,result=(null==functionModule&&(functionModule={path:fileDirectory,config:eval("("+fs.readFileSync(moduleFileName.replace("featureMain.js","featureMeta.json"),"utf8")+")").Header,featureSQLPath:null,logger:null},featureSQLPath=path.join(fileDirectory,"featureSQL.xml"),1==fs.existsSync(featureSQLPath)&&(functionModule.featureSQLPath=featureSQLPath),moduleLogDirectory=path.join(process.env.SYN_FileLogBasePath||"../log/function/javascript",functionModule.config.ApplicationID,functionModule.config.ProjectID,fileDirectoryName),0==fs.existsSync(moduleLogDirectory)&&fs.mkdirSync(moduleLogDirectory,{recursive:!0}),options={logDirectory:moduleLogDirectory,fileNamePattern:"{0}_<DATE>.log".format(fileDirectoryName),dateFormat:"YYYYMMDD"},logger=require("simple-node-logger").createRollingFileLogger(options),logger.setLevel(process.env.SYN_LogMinimumLevel||"trace"),functionModule.logger=logger,syn.functionModules[moduleID]=functionModule),moduleID)}catch(error){console.log(error)}else console.log(moduleFileName+" 모듈 확인 필요");return result}),syn&&!syn.getModuleLibrary&&(syn.getModuleLibrary=function(e,t){var n=null,n=syn.functionModules[e];return 1==$object.isNullOrUndefined(n)&&t&&(syn.initializeModuleScript(e,t),n=syn.functionModules[e]),n}),globalRoot.XMLHttpRequest=require("xmlhttprequest").XMLHttpRequest,syn.functionModules={});