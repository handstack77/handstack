const getGlobal=()=>{if("undefined"!=typeof globalThis)return globalThis;if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;if(void 0!==this)return this;throw new Error("전역 객체를 찾을 수 없습니다")},globalRoot=getGlobal();globalRoot.devicePlatform="browser","AndroidScript"in globalRoot?globalRoot.devicePlatform="android":"webkit"in globalRoot?globalRoot.devicePlatform="ios":"process"in globalRoot&&"object"==typeof module&&(globalRoot.devicePlatform="node");class Module{constructor(e){e&&this.extend(e)}concreate(){}extend(r,t){if(1<arguments.length){const n=this[r];if(n&&"function"==typeof t&&(!n.valueOf||n.valueOf()!==t.valueOf())&&/\bbase\b/.test(t)){const o=t.valueOf();(t=(...e)=>{var t=this.base||Module.prototype.base,e=(this.base=n,o.apply(this,e));return this.base=t,e}).valueOf=e=>"object"===e?t:o,t.toString=Module.toString}"config"===r?this[r]=(e=>{const t={};for(const n of e)for(const r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r]);return t})([this[r],t]):this[r]=t}else if(r){let n=Module.prototype.extend;Module.prototyping||"function"==typeof this||(n=this.extend||n);const a={toSource:null},e=["constructor","toString","valueOf","concreate"];e.forEach((e,t)=>{!Module.prototyping&&0===t||r[e]===a[e]||n.call(this,e,r[e])});for(const i in r)!a[i]&&Object.prototype.hasOwnProperty.call(r,i)&&n.call(this,i,r[i]);const s=r.concreate;s&&s.call(this,r)}return this}base(){}static extend(e,t){Module.prototyping=!0;const n=new this,r=(n.extend(e),n.base=()=>{},delete Module.prototyping,n.constructor),o=n.constructor=function(...e){if(!Module.prototyping)if(this.constructing||this.constructor===o)this.constructing=!0,r.apply(this,e),delete this.constructing;else if(null!=e[0])return(e[0].extend||Module.prototype.extend).call(e[0],n)};return o.ancestor=this,o.extend=this.extend,o.each=this.each,o.implement=this.implement,o.prototype=n,o.toString=this.toString,o.valueOf=e=>"object"===e?o:r.valueOf(),o.extend(t),"function"==typeof o.init&&o.init(),o}static each(e,t,n){if("function"==typeof t&&0!==t.length)for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&"object"==typeof e[r]&&null!==e[r]&&t.apply(e[r],n)}static implement(...e){return e.forEach(e=>{"function"==typeof e?e(this.prototype):this.prototype.extend(e)}),this}static toString(){return String(this.valueOf())}}Module.ancestor=Object,Module.version="v2025.3.12";const syn={Module:Module};var fs,path,LocalStorage,moduleLogDirectory,options,logger;syn.Config={SystemID:"HANDSTACK",ApplicationID:"HDS",ProjectID:"SYS",SystemVersion:"1.0.0",TransactionTimeout:18e4,HostName:"WebClient",UIEventLogLevel:"Verbose",IsLocaleTranslations:!1,LocaleAssetUrl:"/assets/shared/language/",AssetsCachingID:"cache-id",IsClientCaching:!0,IsDebugMode:!1,IsBundleLoad:!1,ContractRequestPath:"view",TenantAppRequestPath:"app",SharedAssetUrl:"/assets/shared/",IsApiFindServer:!1,DiscoveryApiServerUrl:"",ReportServer:"",FileManagerServer:"http://localhost:8000",FindClientIPServer:"/checkip",FindGlobalIDServer:"",FileServerType:"L",FileBusinessIDSource:"None",CookiePrefixName:"HandStack",Environment:"Development",DomainAPIServer:{ServerID:"SERVERD01",ServerType:"D",Protocol:"http",IP:"localhost",Port:"8000",Path:"/transact/api/transaction/execute",ClientIP:"localhost"},Program:{ProgramName:"ack",ProgramVersion:"1.0.0",LanguageID:"ko",LocaleID:"ko-KR",BranchCode:""},Transaction:{ProtocolVersion:"001",SimulationType:"P",DataFormat:"J",MachineTypeID:"WEB",EncryptionType:"P",EncryptionKey:"G",CompressionYN:"N"},EnvironmentSetting:{Application:{LoaderPath:"/js/syn.domain.js"}}},syn.module=Module,globalRoot.syn=syn,"undefined"!=typeof module&&module.exports&&(module.exports=syn),!function(e){"use strict";const s=e.$cryptography||new syn.module,a=new TextEncoder,i=new TextDecoder;s.extend({base64Encode(e){if("node"===globalRoot.devicePlatform)return Buffer.from(e,"utf8").toString("base64");try{var t=a.encode(String(e));return btoa(String.fromCharCode(...t))}catch(e){return syn.$l.eventLog("$c.base64Encode","Base64 인코딩 실패: "+e,"Error"),null}},base64Decode(e){if("node"===globalRoot.devicePlatform)return Buffer.from(e,"base64").toString("utf8");try{var t=atob(String(e)),n=new Uint8Array([...t].map(e=>e.charCodeAt(0)));return i.decode(n)}catch(e){return syn.$l.eventLog("$c.base64Encode","Base64 디코딩 실패: "+e,"Error"),null}},utf8Encode(e){if("string"!=typeof e)throw new TypeError("매개변수가 문자열이 아닙니다.");try{return a.encode(e)}catch(e){syn.$l.eventLog("$c.base64Encode","UTF-8 인코딩 실패: "+e,"Error")}return null},utf8Decode(e){if("string"!=typeof e)throw new TypeError("매개변수가 UTF-8 문자열이 아닙니다.");try{return i.decode(this.convertToBuffer(e.split(",").map(Number)))}catch(e){syn.$l.eventLog("$c.base64Encode","UTF-8 디코딩 실패: "+e,"Error")}return null},convertToBuffer(t){var e=new ArrayBuffer(t.length);let n=new Uint8Array(e);for(let e=0;e<t.length;e++)n[e]=t[e];return e},isWebCryptoSupported(){return!!e.crypto?.subtle},padKey(e,t){if("string"!=typeof e)return null;let n=a.encode(e);if(n.length>=t)return n.slice(0,t);const r=new Uint8Array(t);return r.set(n),r},async generateHMAC(e,t){e=a.encode(e),t=a.encode(t),e=await crypto.subtle.importKey("raw",e,{name:"HMAC",hash:"SHA-256"},!1,["sign"]),e=await crypto.subtle.sign("HMAC",e,t);return Array.from(new Uint8Array(e)).map(e=>e.toString(16).padStart(2,"0")).join("")},async verifyHMAC(e,t,n){return await s.generateHMAC(e,t)===n},async generateRSAKey(){return await window.crypto.subtle.generateKey({name:"RSA-OAEP",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:"SHA-256"},!0,["encrypt","decrypt"])},async exportCryptoKey(e,t){let n="";var r=1==(t=$string.toBoolean(t))?"PUBLIC":"PRIVATE",t=await window.crypto.subtle.exportKey(1==t?"spki":"pkcs8",e),e=String.fromCharCode.apply(null,new Uint8Array(t)),t=window.btoa(e);const o=(n=`-----BEGIN ${r} KEY-----
${t}
-----END ${r} KEY-----`).split("\n");return(n=o.map(e=>e.match(/.{1,64}/g).join("\n"))).join("\n")},async importCryptoKey(e,t){var n=1==(t=$string.toBoolean(t))?"PUBLIC":"PRIVATE",e=e.substring(`-----BEGIN ${n} KEY-----`.length,e.length-`-----END ${n} KEY-----`.length).replaceAll("\n",""),n=window.atob(e),e=syn.$l.stringToArrayBuffer(n);return await crypto.subtle.importKey(1==t?"spki":"pkcs8",e,{name:"RSA-OAEP",hash:"SHA-256"},!0,1==t?["encrypt"]:["decrypt"])},async rsaEncode(e,t){e=a.encode(e),t=await crypto.subtle.encrypt({name:"RSA-OAEP"},t,e);return s.base64Encode(new Uint8Array(t))},async rsaDecode(e,t){e=new Uint8Array(s.base64Decode(e).split(",").map(Number)),t=await crypto.subtle.decrypt({name:"RSA-OAEP"},t,e);return i.decode(t)},generateIV(e,t){let n;return t=t||16,n=e&&"$RANDOM$"==e.toUpperCase()?window.crypto.getRandomValues(new Uint8Array(t)):(e=e||"",s.padKey(e,t))},async aesEncode(e,t,n,r){t=t||"",r=r||256;var o="AES-GCM"===(n=n||"AES-CBC")?12:16,o=s.generateIV(t,o),e=a.encode(e),t=await window.crypto.subtle.importKey("raw",s.padKey(t,r/8),{name:n},!1,["encrypt"]),r=await window.crypto.subtle.encrypt({name:n,iv:o},t,e);return{iv:s.base64Encode(o),encrypted:s.base64Encode(new Uint8Array(r))}},async aesDecode(e,t,n,r){let o=null;var a;return t=t||"",n=n||"AES-CBC",r=r||256,e&&e.iv&&e.encrypted&&(a=new Uint8Array(s.base64Decode(e.iv).split(",").map(Number)),e=new Uint8Array(s.base64Decode(e.encrypted).split(",").map(Number)),t=await window.crypto.subtle.importKey("raw",s.padKey(t,r/8),{name:n},!1,["decrypt"]),r=await window.crypto.subtle.decrypt({name:n,iv:a},t,e),o=i.decode(r)),o},async sha(e,t){t=t||"SHA-1";e=a.encode(e),t=await crypto.subtle.digest(t,e);return Array.from(new Uint8Array(t)).map(e=>e.toString(16).padStart(2,"0")).join("")},sha256(e){const b=(e,t)=>{var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n},w=(e,t)=>e>>>t|e<<32-t,D=(e,t)=>e>>>t;{var n=((n,e)=>{var r,o,a,s,i=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];const l=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],c=new Array(64);let d,u,g,p,f,y,m,h,$,v;n[e>>5]|=128<<24-e%32,n[15+(e+64>>9<<4)]=e;for(let t=0;t<n.length;t+=16){d=l[0],u=l[1],g=l[2],p=l[3],f=l[4],y=l[5],m=l[6],h=l[7];for(let e=0;e<64;e++)e<16?c[e]=n[e+t]:c[e]=b(b(b((s=c[e-2],w(s,17)^w(s,19)^D(s,10)),c[e-7]),(s=c[e-15],w(s,7)^w(s,18)^D(s,3))),c[e-16]),$=b(b(b(b(h,(s=f,w(s,6)^w(s,11)^w(s,25))),(r=f,o=y,a=m,r&o^~r&a)),i[e]),c[e]),v=b((o=d,w(o,2)^w(o,13)^w(o,22)),(r=d,a=u,o=g,r&a^r&o^a&o)),h=m,m=y,y=f,f=b(p,$),p=g,g=u,u=d,d=b($,v);l[0]=b(d,l[0]),l[1]=b(u,l[1]),l[2]=b(g,l[2]),l[3]=b(p,l[3]),l[4]=b(f,l[4]),l[5]=b(y,l[5]),l[6]=b(m,l[6]),l[7]=b(h,l[7])}return l})((t=>{const n=[];for(let e=0;e<8*t.length;e+=8)n[e>>5]|=(255&t.charCodeAt(e/8))<<24-e%32;return n})(e),8*e.length);const r="0123456789abcdef";let t="";for(let e=0;e<4*n.length;e++)t+=r.charAt(n[e>>2]>>8*(3-e%4)+4&15)+r.charAt(n[e>>2]>>8*(3-e%4)&15);return t}},encrypt(e,t){if(null==e)return null;var n=t?t.length:6,t=this.sha256(t||"").substring(0,n),n=((t,n)=>{const r=[];var o=n.length;for(let e=0;e<t.length;e++){var a=e%o,a=t.charCodeAt(e)+n.charCodeAt(a);r.push(a)}return JSON.stringify(r)})(String(e),t);return encodeURIComponent(this.base64Encode(n+"."+t))},decrypt(e,n){if(null==e)return null;try{const t=this.base64Decode(decodeURIComponent(e));if(!t||-1===t.indexOf("."))return null;var[r,o]=t.split(".");{var a=r;var s=o;var i=n?n.length:6;if(s!==this.sha256(n||"").substring(0,i))return"";var l=JSON.parse(a),c=s.length;let t="";for(let e=0;e<l.length;e++){var d=e%c,d=l[e]-s.charCodeAt(d);t+=String.fromCharCode(d)}return t;return}}catch(e){return syn.$l.eventLog("$c.decrypt",e,"Error"),null}},LZString:function(){const m=String.fromCharCode,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",o={};function a(t,e){if(!o[t]){o[t]={};for(let e=0;e<t.length;e++)o[t][t.charAt(e)]=e}return o[t][e]}const s={compressToBase64(e){if(null==e)return"";var t=s._compress(e,6,e=>n.charAt(e));switch(t.length%4){case 0:return t;case 1:return t+"===";case 2:return t+"==";case 3:return t+"="}},decompressFromBase64(t){return null==t?"":""==t?null:s._decompress(t.length,32,e=>a(n,t.charAt(e)))},compressToUTF16(e){return null==e?"":s._compress(e,15,e=>m(e+32))+" "},decompressFromUTF16(t){return null==t?"":""==t?null:s._decompress(t.length,16384,e=>t.charCodeAt(e)-32)},compressToUint8Array(e){const n=s.compress(e),r=new Uint8Array(2*n.length);for(let e=0,t=n.length;e<t;e++){var o=n.charCodeAt(e);r[2*e]=o>>>8,r[2*e+1]=o%256}return r},decompressFromUint8Array(n){if(null==n)return s.decompress(null);if(!n?.length)return s.decompress("");const r=new Array(n.length/2);for(let e=0,t=r.length;e<t;e++)r[e]=256*n[2*e]+n[2*e+1];const e=r.map(e=>m(e));return s.decompress(e.join(""))},compressToEncodedURIComponent(e){return null==e?"":s._compress(e,6,e=>r.charAt(e))},decompressFromEncodedURIComponent(t){return null==t?"":""==t?null:(t=t.replace(/ /g,"+"),s._decompress(t.length,32,e=>a(r,t.charAt(e))))},compress(e){return s._compress(e,16,e=>m(e))},_compress(e,t,n){if(null==e)return"";let r,o,a={},s={},i,l,c="",d=2,u=3,g=2,p=[],f=0,y=0,m;for(m=0;m<e.length;m+=1)if(i=e.charAt(m),Object.prototype.hasOwnProperty.call(a,i)||(a[i]=u++,s[i]=!0),l=c+i,Object.prototype.hasOwnProperty.call(a,l))c=l;else{if(Object.prototype.hasOwnProperty.call(s,c)){if(c.charCodeAt(0)<256){for(r=0;r<g;r++)f<<=1,y==t-1?(y=0,p.push(n(f)),f=0):y++;for(o=c.charCodeAt(0),r=0;r<8;r++)f=f<<1|1&o,y==t-1?(y=0,p.push(n(f)),f=0):y++,o>>=1}else{for(o=1,r=0;r<g;r++)f=f<<1|o,y==t-1?(y=0,p.push(n(f)),f=0):y++,o=0;for(o=c.charCodeAt(0),r=0;r<16;r++)f=f<<1|1&o,y==t-1?(y=0,p.push(n(f)),f=0):y++,o>>=1}0==--d&&(d=Math.pow(2,g),g++),delete s[c]}else for(o=a[c],r=0;r<g;r++)f=f<<1|1&o,y==t-1?(y=0,p.push(n(f)),f=0):y++,o>>=1;0==--d&&(d=Math.pow(2,g),g++),a[l]=u++,c=String(i)}if(""!==c){if(Object.prototype.hasOwnProperty.call(s,c)){if(c.charCodeAt(0)<256){for(r=0;r<g;r++)f<<=1,y==t-1?(y=0,p.push(n(f)),f=0):y++;for(o=c.charCodeAt(0),r=0;r<8;r++)f=f<<1|1&o,y==t-1?(y=0,p.push(n(f)),f=0):y++,o>>=1}else{for(o=1,r=0;r<g;r++)f=f<<1|o,y==t-1?(y=0,p.push(n(f)),f=0):y++,o=0;for(o=c.charCodeAt(0),r=0;r<16;r++)f=f<<1|1&o,y==t-1?(y=0,p.push(n(f)),f=0):y++,o>>=1}0==--d&&(d=Math.pow(2,g),g++),delete s[c]}else for(o=a[c],r=0;r<g;r++)f=f<<1|1&o,y==t-1?(y=0,p.push(n(f)),f=0):y++,o>>=1;0==--d&&(d=Math.pow(2,g),g++)}for(o=2,r=0;r<g;r++)f=f<<1|1&o,y==t-1?(y=0,p.push(n(f)),f=0):y++,o>>=1;for(;;){if(f<<=1,y==t-1){p.push(n(f));break}y++}return p.join("")},_decompress(e,t,n){const r=[];let o=4,a=4,s=3,i="",l=[],c,d,u,g,p,f;const y={val:n(0),position:t,index:1};for(let e=0;e<3;e+=1)r[e]=e;for(d=0,g=Math.pow(2,2),p=1;p!=g;)u=y.val&y.position,y.position>>=1,0==y.position&&(y.position=t,y.val=n(y.index++)),d|=(0<u?1:0)*p,p<<=1;switch(d){case 0:for(d=0,g=Math.pow(2,8),p=1;p!=g;)u=y.val&y.position,y.position>>=1,0==y.position&&(y.position=t,y.val=n(y.index++)),d|=(0<u?1:0)*p,p<<=1;f=m(d);break;case 1:for(d=0,g=Math.pow(2,16),p=1;p!=g;)u=y.val&y.position,y.position>>=1,0==y.position&&(y.position=t,y.val=n(y.index++)),d|=(0<u?1:0)*p,p<<=1;f=m(d);break;case 2:return""}for(r[3]=f,c=f,l.push(f);;){if(y.index>e)return"";for(d=0,g=Math.pow(2,s),p=1;p!=g;)u=y.val&y.position,y.position>>=1,0==y.position&&(y.position=t,y.val=n(y.index++)),d|=(0<u?1:0)*p,p<<=1;switch(f=d){case 0:for(d=0,g=Math.pow(2,8),p=1;p!=g;)u=y.val&y.position,y.position>>=1,0==y.position&&(y.position=t,y.val=n(y.index++)),d|=(0<u?1:0)*p,p<<=1;r[a++]=m(d),f=a-1,o--;break;case 1:for(d=0,g=Math.pow(2,16),p=1;p!=g;)u=y.val&y.position,y.position>>=1,0==y.position&&(y.position=t,y.val=n(y.index++)),d|=(0<u?1:0)*p,p<<=1;r[a++]=m(d),f=a-1,o--;break;case 2:return l.join("")}if(0==o&&(o=Math.pow(2,s),s++),r[f])i=r[f];else{if(f!==a)return null;i=c+c.charAt(0)}l.push(i),r[a++]=c+i.charAt(0),o--,c=i,0==o&&(o=Math.pow(2,s),s++)}}};return s}()}),e.$cryptography=syn.$c=s}(globalRoot),!function(e){"use strict";const s=e.$date||new syn.module,t=e.$array||new syn.module,a=e.$string||new syn.module,n=e.$number||new syn.module,w=e.$object||new syn.module;Function.prototype.clone||(Function.prototype.clone=function(){function e(){return n.apply(this,arguments)}var t,n=this;for(t in this)e[t]=this[t];return e}),Object.assign||(Object.assign=function(e){if(null===e||"object"!=typeof e)return e;var t,n=e.constructor();for(t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}),Object.entries||(Object.entries=function(e){for(var t=Object.keys(e),n=t.length,r=new Array(n);n--;)r[n]=[t[n],e[t[n]]];return r}),String.prototype.trim||(String.prototype.trim=function(){for(var e=this.replace(/^\s+/,""),t=e.length-1;0<t;t--)if(/\S/.test(e.charAt(t))){e=e.substring(0,t+1);break}return e}),String.prototype.includes||(String.prototype.includes=function(e){return-1!==this.indexOf(e)}),String.prototype.format||(String.prototype.format=function(){for(var e=this,t=0,n=arguments.length;t<n;t++)var r=new RegExp("{"+t.toString()+"+?}","g"),e=e.replace(r,arguments[t]);return e}),"node"!==globalRoot.devicePlatform&&(Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(e){var t=this;do{if(t.matches(e))return t}while(null!==(t=t.parentElement||t.parentNode)&&1===t.nodeType);return null})),s.extend({interval:Object.freeze({year:31536e6,week:6048e5,day:864e5,hour:36e5,minute:6e4,second:1e3}),now(){return new Date},clone(e){if(e instanceof Date)return new Date(e.getTime());if(w.isString(e))try{return new Date(e)}catch{}return null},isBetween(e,t,n){if(!(e instanceof Date&&t instanceof Date&&n instanceof Date))return!1;e=e.getTime();return e>=t.getTime()&&e<=n.getTime()},equals(e,t){return e instanceof Date&&t instanceof Date&&e.getTime()===t.getTime()},equalDay(e,t){return e instanceof Date&&t instanceof Date&&e.toDateString()===t.toDateString()},isToday(e){return e instanceof Date&&this.equalDay(e,new Date)},toString(e,t,n={}){let r=e;if(w.isString(e)&&this.isDate(e)&&(r=new Date(e)),!w.isDate(r)||isNaN(r))return"";var o=r.getFullYear(),a=r.getMonth()+1,s=r.getDate(),i=r.getHours(),l=r.getMinutes(),c=r.getSeconds(),d=r.getMilliseconds(),u=["일","월","화","수","목","금","토"][r.getDay()],g=(e,t=2)=>String(e).padStart(t,"0");switch(t){case"d":return`${o}-${g(a)}-`+g(s);case"t":return`${g(i)}:${g(l)}:`+g(c);case"a":return`${o}-${g(a)}-${g(s)} ${g(i)}:${g(l)}:`+g(c);case"i":return`${o}-${g(a)}-${g(s)}T${g(i)}:${g(l)}:${g(c)}.${g(d,3)} Z`;case"f":return""+o+g(a)+g(s)+g(i)+g(l)+g(c)+g(d,3);case"s":return""+g(i)+g(l)+g(c)+g(d,3);case"n":return`${o}년 ${g(a)}월 ${g(s)} 일(${u})`;case"nt":return`${o}년 ${g(a)}월 ${g(s)} 일(${u}), ${g(i)}:${g(l)}:`+g(c);case"mdn":return`${g(a)}월 ${g(s)} 일`;case"w":var p={weekStartSunday:!0,...n},f=r.getFullYear(),y=r.getMonth()+1,m=this.weekOfMonth(f,y,p.weekStartSunday),h=parseInt(""+f+g(y)+g(s),10);for(let e=0;e<m.length;e++){const b=m[e];var $=parseInt(b.weekStartDate.replace(/-/g,""),10),v=parseInt(b.weekEndDate.replace(/-/g,""),10);if($<=h&&h<=v)return e+1}return 1;case"wn":return u;case"m":return g(a);case"y":return String(o);case"ym":return o+"-"+g(a);default:return g(s)}},addSecond(e,t){return e instanceof Date&&!isNaN(t)?new Date(e.getTime()+t*this.interval.second):null},addMinute(e,t){return e instanceof Date&&!isNaN(t)?new Date(e.getTime()+t*this.interval.minute):null},addHour(e,t){return e instanceof Date&&!isNaN(t)?new Date(e.getTime()+t*this.interval.hour):null},addDay(e,t){if(!(e instanceof Date)||isNaN(t))return null;const n=new Date(e.getTime());return n.setDate(e.getDate()+t),n},addWeek(e,t){return this.addDay(e,7*t)},addMonth(e,t){if(!(e instanceof Date)||isNaN(t))return null;const n=new Date(e.getTime());e=e.getMonth()+t;return n.setMonth(e),n.getMonth()!==(e%12+12)%12&&n.setDate(0),n},addYear(e,t){if(!(e instanceof Date)||isNaN(t))return null;const n=new Date(e.getTime());return n.setFullYear(e.getFullYear()+t),1===e.getMonth()&&29===e.getDate()&&29!==n.getDate()&&n.setDate(0),n},getFirstDate(e){return e instanceof Date?new Date(e.getFullYear(),e.getMonth(),1):null},getLastDate(e){return e instanceof Date?new Date(e.getFullYear(),e.getMonth()+1,0):null},diff(e,t,n="day"){return e instanceof Date&&t instanceof Date?"month"===n?12*(t.getFullYear()-e.getFullYear())+(t.getMonth()-e.getMonth()):this.interval[n]?(t=t.getTime()-e.getTime(),Math.floor(t/this.interval[n])):0:0},toTicks(e){return e instanceof Date?1e4*e.getTime()+621355968e9:0},isDate(e){if(e instanceof Date&&!isNaN(e))return!0;if(w.isString(e)){var t=new Date(e);if(!isNaN(t))return!0;if(/^\d{4}-\d{2}-\d{2}$/.test(e)){t=e.split("-");if(1<=t[1]&&t[1]<=12&&1<=t[2]&&t[2]<=31)return e=new Date(t[0],t[1]-1,t[2]),!isNaN(e)}}return!1},isISOString(e){return w.isString(e)&&$validation.regexs.isoDate.test(e)},weekOfMonth(e,t,n=!0){const r=[];var o="boolean"==typeof n?n:"true"===n,n=t||(new Date).getMonth()+1,a=o?7:8;const s=new Date(e,n-1),i=new Date(s.getFullYear(),s.getMonth(),1),l=new Date(s.getFullYear(),s.getMonth()+1,0);var c=(e,t)=>String(e).padStart(t,"0");let d=!0;var u=i.getDay();for(let e=1;e<=6&&l.getMonth()===i.getMonth();e++){const g={};i.getDay()<=1&&(0!==i.getDay()||o||i.setDate(i.getDate()+1),g.weekStartDate=`${i.getFullYear()}-${c(i.getMonth()+1,2)}-`+c(i.getDate(),2)),u<a?d?((a-i.getDay()==1||1<a-i.getDay())&&i.setDate(i.getDate()+(a-i.getDay())-1),d=!1):i.setDate(i.getDate()+6):i.setDate(i.getDate()+(6-i.getDay())+a),g.weekStartDate&&(g.weekEndDate=`${i.getFullYear()}-${c(i.getMonth()+1,2)}-`+c(i.getDate(),2),r.push(g)),i.setDate(i.getDate()+1)}return r},timeAgo(e){let t;if(w.isString(e)&&this.isDate(e))t=new Date(e);else{if(!(e instanceof Date))return"";t=e}var n=Math.floor((new Date-t)/1e3);if(n<0)return"in the future";for(const o of[{label:"년",seconds:31536e3},{label:"달",seconds:2592e3},{label:"주",seconds:604800},{label:"일",seconds:86400},{label:"시간",seconds:3600},{label:"분",seconds:60},{label:"초",seconds:1}]){var r=Math.floor(n/o.seconds);if(1<=r)return""+r+o.label+" 전"}return"방금 전"}}),e.$date=s,a.extend({toValue(e,t=""){return null==e?String(t):String(e)},br(e){return String(e).replace(/(\r\n|\r|\n)/g,"<br />")},interpolate(t,e,n={}){if(null==e||"string"!=typeof t)return t;const{defaultValue:o=null,separator:r="\n"}=n,a=(e,r)=>e.replace(/#\{([^{}]*)\}/g,(e,t)=>{const n=r[t];return void 0!==n&&null!==n?Array.isArray(n)?n.join(", "):n instanceof Date?s.toString(n,"a"):String(n):null!==o?o:e});return Array.isArray(e)?e.map(e=>a(t,e)).join(r):"object"==typeof e?a(t,e):t},isNullOrEmpty(e){return null==e||""===String(e).trim()},sanitizeHTML(e,t=!1){if("string"!=typeof e)return"";let n=e.replace(/<[^>]*>/g,"").replace(/&nbsp;|&#160;/gi," ");return(n=t?n.replace(/[.,;:'"!?%#$*_+=\-\\/()[\]{}<>~`“”’]/g,""):n).trim()},cleanHTML(e){if("string"!=typeof e||"node"===globalRoot.devicePlatform)return e;try{const t=document.createElement("div");return t.innerHTML=e.replace(/<br\s*\/?>/gi,"\n"),t.textContent||t.innerText||""}catch{return e}},toHtmlChar(e,t="&'<>!\"#%()*+,./;=@[]^`{|}~"){if("string"!=typeof e)return"";const n={"&":"&amp;","'":"&#39;","<":"&lt;",">":"&gt;",'"':"&quot;","!":"&#33;","#":"&#35;","%":"&#37;","(":"&#40;",")":"&#41;","*":"&#42;","+":"&#43;",",":"&#44;",".":"&#46;","/":"&#47;",";":"&#59;","=":"&#61;","@":"&#64;","[":"&#91;","\\":"&#92;","]":"&#93;","^":"&#94;","`":"&#96;","{":"&#123;","|":"&#124;","}":"&#125;","~":"&#126;"};t=t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"),t=new RegExp(`[${t}]`,"g");return e.replace(t,e=>n[e]||e)},toCharHtml(e,t="&(amp|#39|lt|gt|quot|#33|#35|#37|#40|#41|#42|#43|#44|#46|#47|#59|#61|#64|#91|#92|#93|#94|#96|#123|#124|#125|#126);"){if("string"!=typeof e)return"";const n={"&amp;":"&","&#39;":"'","&lt;":"<","&gt;":">","&quot;":'"',"&#33;":"!","&#35;":"#","&#37;":"%","&#40;":"(","&#41;":")","&#42;":"*","&#43;":"+","&#44;":",","&#46;":".","&#47;":"/","&#59;":";","&#61;":"=","&#64;":"@","&#91;":"[","&#92;":"\\","&#93;":"]","&#94;":"^","&#96;":"`","&#123;":"{","&#124;":"|","&#125;":"}","&#126;":"~"};t=new RegExp(t,"g");return e.replace(t,e=>n[e]||e)},length(t){if("string"!=typeof t)return 0;let n=0;for(let e=0;e<t.length;e++){var r=t.charCodeAt(e);n+=r<=127?1:r<=2047?2:r<=65535?3:4}return n},split(e,t=","){return"string"==typeof e?e.split(t).filter(e=>""!==e.trim()):[]},isNumber(e){if(null==e||""===String(e).trim())return!1;const t=String(e).trim();return!!/^-?(\d+|\d{1,3}(,\d{3})*)(\.\d+)?$/.test(t)&&(e=t.replace(/,/g,""),!isNaN(parseFloat(e)))},toNumber(e){var t=0;try{t=parseFloat(0===(1==w.isNullOrUndefined(e)?0:e)||""===e?"0":e.toString().replace(/,/g,""))}catch(e){syn.$l.eventLog("$string.toNumber",e,"Warning")}return t},capitalize(e){return"string"==typeof e?e.replace(/\b([a-z])/g,e=>e.toUpperCase()):""},toJson(e,t={}){if("string"!=typeof e)return[];var{delimiter:n=",",newline:t="\n",meta:r={}}=t;const o=e.split(t);if(o.length<1)return[];var a=o[0].split(n).map(e=>e.trim().replace(/^"|"$/g,"")),s=a.length;const i=[];for(let e=1;e<o.length;e++){const d=o[e];if(d.trim()){const u=d.split(n),g={};for(let e=0;e<s;e++){var l=a[e],c=u[e]?.trim()??"";g[l]=r[l]?this.toParseType(c,r[l]):this.toDynamic(c)}i.push(g)}}return i},toParameterObject(e){return(e.match(/([^?:;]+)(:([^;]*))/g)||[]).reduce(function(e,t){return e[t.slice(0,t.indexOf(":")).replace("@","")]=t.slice(t.indexOf(":")+1),e},{})},toUrlObject(e){return((e=e||"").match(/([^?=&]+)(=([^&]*))/g)||[]).reduce(function(e,t){return e[t.slice(0,t.indexOf("="))]=t.slice(t.indexOf("=")+1),e},{})},toBoolean(e){return"true"===e||"True"===e||"TRUE"===e||"Y"===e||"1"==e},toDynamic(e,t=!1){const n=String(e).trim();if(t&&""===n)return null;if(""===n)return"";if(/^(true|y|1)$/i.test(n))return!0;if(/^(false|n|0)$/i.test(n))return!1;t=n.replace(/,/g,"");if($validation.regexs.float.test(t)){t=parseFloat(t);if(!isNaN(t))return t}if($validation.regexs.isoDate.test(n)){t=new Date(n);if(!isNaN(t))return t}return e},toParseType(e,t="string",n=!1){const r=String(e).trim();if(n&&""===r)return null;switch(String(t).toLowerCase()){case"string":return r;case"bool":case"boolean":return this.toBoolean(r);case"number":case"numeric":case"int":var o=r.replace(/,/g,"");return $validation.regexs.float.test(o)?(o=parseFloat(o),isNaN(o)?n?null:0:o):n?null:0;case"date":case"datetime":return $validation.regexs.isoDate.test(r)?(o=new Date(r),isNaN(o)?null:o):s.isDate(r)?(o=new Date(r),isNaN(o)?null:o):null;default:return r}},toNumberString(e){return"string"==typeof e?e.trim().replace(/[^\d.-]/g,""):""},toCurrency(e,t,n={}){e=this.toNumber(e);if(isNaN(e))return null;if(t&&"undefined"!=typeof Intl&&Intl.NumberFormat){n={style:"currency",currency:"KRW",...n};try{return new Intl.NumberFormat(t,n).format(e)}catch(e){syn.$l.eventLog("$string.toCurrency",`Intl formatting error for locale ${t}: `+e,"Warning")}}const[r,o]=String(e).split(".");n=r.replace(/\B(?=(\d{3})+(?!\d))/g,",");return o?n+"."+o:n},pad(e,t,n="0",r=!0){e=String(e),t=Math.max(0,t-e.length),n=String(n).repeat(t);return a.toBoolean(r)?n+e:e+n}}),e.$string=a,t.extend({distinct(e){return Array.isArray(e)?[...new Set(e)]:[]},sort(e,n=!0){return Array.isArray(e)?[...e].sort((e,t)=>e<t?n?-1:1:t<e?n?1:-1:0):[]},objectSort(e,n,r=!0){return Array.isArray(e)&&n?[...e].sort((e,t)=>{e=e[n],t=t[n];return e<t?r?-1:1:t<e?r?1:-1:0}):[]},groupBy(e,t){if(!Array.isArray(e))return{};const r="function"==typeof t?t:e=>e[t];return e.reduce((e,t)=>{var n=r(t);return(e[n]=e[n]||[]).push(t),e},{})},shuffle(e){if(!Array.isArray(e))return[];const t=[...e];for(let e=t.length-1;0<e;e--){var n=Math.floor(Math.random()*(e+1));[t[e],t[n]]=[t[n],t[e]]}return t},addAt(e,t,n){if(!Array.isArray(e))return[];const r=[...e];e=Math.max(0,Math.min(t,r.length));return r.splice(e,0,n),r},removeAt(e,t){if(!Array.isArray(e))return[];const n=[...e];return 0<=t&&t<n.length&&n.splice(t,1),n},contains(e,t){return Array.isArray(e)&&e.includes(t)},merge(e,t,n=(e,t)=>e===t){if(!Array.isArray(e)||!Array.isArray(t))return e||[];const r=[...e];return t.forEach(t=>{r.some(e=>n(t,e))||r.push(t)}),r},union(e,t){return Array.isArray(e)&&Array.isArray(t)?[...new Set([...e,...t])]:[]},difference(e,t){if(!Array.isArray(e)||!Array.isArray(t))return[];const n=new Set(t);return e.filter(e=>!n.has(e))},intersect(e,t){if(!Array.isArray(e)||!Array.isArray(t))return[];const n=new Set(t);return e.filter(e=>n.has(e))},symmetryDifference(e,t){if(!Array.isArray(e)||!Array.isArray(t))return[];const n=new Set(e),r=new Set(t);e=e.filter(e=>!r.has(e)),t=t.filter(e=>!n.has(e));return[...e,...t]},getValue(e,t,n,r,o){var a,s=null;return e&&0<e.length&&(a=null,(a=r?e.find(function(e){return e[r]==t}):e.find(function(e){return e.ParameterName==t||e.parameterName==t}))&&(s=o?a[o]:a.Value||a.value)),s=null==s?void 0===n?"":n:s},ranks(e,n=!1){if(!Array.isArray(e))return[];const t=e.map((e,t)=>({value:a.toNumber(e),index:t})),r=(t.sort((e,t)=>n?e.value-t.value:t.value-e.value),new Array(e.length));let o=1;for(let e=0;e<t.length;e++)0<e&&t[e].value!==t[e-1].value&&(o=e+1),r[t[e].index]=o;return r},split(e,t=","){return"string"!=typeof e?[]:e.split(t).map(e=>e.trim()).filter(e=>0<e.length)}}),e.$array=t,n.extend({duration(e){if("number"!=typeof e||isNaN(e))return{};var e=Math.abs(e),t=Math.floor(e/1e3),n=Math.floor(t/60),r=Math.floor(n/60),o=Math.floor(r/24);return{year:Math.floor(o/365),week:Math.floor(o%365/7),day:o,hour:r%24,minute:n%60,second:t%60,millisecond:e%1e3}},toByteString(e,t=3,n=!0){if("number"!=typeof e||isNaN(e))return`0${n?" ":""}B`;var r=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],o=Math.abs(e);if(o<1)return e+(n?" ":"")+r[0];var a=Math.min(Math.floor(Math.log(o)/Math.log(1024)),r.length-1);const s=o/Math.pow(1024,a);return(e<0?"-":"")+Number(s.toPrecision(t))+(n?" ":"")+r[a]},random(e=0,t=10){var n=Math.ceil(Math.min(e,t)),e=Math.floor(Math.max(e,t));return Math.floor(Math.random()*(e-n+1))+n},isRange(e,t,n){return"number"==typeof e&&t<=e&&e<=n},limit(e,t,n){return"number"==typeof e?Math.max(t,Math.min(e,n)):t},percent(e,t,n=0){if("number"!=typeof e||"number"!=typeof t||0===t)return 0;n=Math.pow(10,n);return Math.round(100*e/t*n)/n}}),e.$number=n,w.extend({isNullOrUndefined(e){return null==e},toCSV(e,t={}){if("object"!=typeof e||null===e)return null;const{scopechar:s="/",delimiter:r=",",newline:o="\n"}=t,n=Array.isArray(e)?e:[e];if(0===n.length)return"";const i=[],l=new Set,a=(n.forEach(e=>{const t={},n=[[e,""]];for(;0<n.length;){const[o,a]=n.pop();var r;null===o||"object"!=typeof o||Array.isArray(o)||o instanceof Date?(r=a||"value",l.add(r),t[r]=Array.isArray(o)||o instanceof Date?JSON.stringify(o):o??""):Object.entries(o).forEach(([e,t])=>{n.push([t,a?""+a+s+e:e])})}i.push(t)}),Array.from(l).sort()),c=a.join(r);t=i.map(n=>a.map(e=>{let t=String(n[e]??"");return t=t.includes(r)||t.includes(o)||t.includes('"')?`"${t.replace(/"/g,'""')}"`:t}).join(r));return[c,...t].join(o)},toParameterString(e){return e&&"object"==typeof e?Object.entries(e).map(([e,t])=>`@${e}:`+a.toValue(a.toDynamic(t),"")).join(";"):""},getType(e){var t=typeof e;return"object"==t?null===e?"null":Array.isArray(e)?"array":e instanceof Date?"date":"node"!==globalRoot.devicePlatform&&e instanceof HTMLElement?"element":"object":t},defaultValue(e){switch(String(e).toLowerCase()){case"boolean":return!1;case"function":return()=>{};case"null":return null;case"number":case"numeric":case"int":return 0;case"object":return{};case"date":case"datetime":return new Date;case"string":return"";case"symbol":return Symbol();case"undefined":return;case"array":return[];default:return""}},isDefined(e){return void 0!==e},isNull(e){return null===e},isArray(e){return Array.isArray(e)},isDate(e){return e instanceof Date&&!isNaN(e.getTime())},isString(e){return"string"==typeof e},isNumber(e){return"number"==typeof e&&!isNaN(e)},isFunction(e){return"function"==typeof e},isObject(e){return"object"==typeof e&&null!==e},isObjectEmpty(e){return"object"==typeof e&&null!==e&&0===Object.keys(e).length&&e.constructor===Object},isBoolean(e){if("boolean"==typeof e)return!0;if(null==e)return!1;e=String(e).toUpperCase();return["TRUE","FALSE","Y","N","1","0"].includes(e)},isEmpty(e){return null==e||(!("number"!=typeof e||!isNaN(e))||("string"==typeof e&&""===e.trim()||(!(!Array.isArray(e)||0!==e.length)||!("object"!=typeof e||e instanceof Date||0!==Object.keys(e).length||e.constructor!==Object))))},clone(t,e=!0){if("object"!=typeof t||null===t)return t;if(t instanceof Date)return new Date(t.getTime());if(Array.isArray(t))return e?t.map(e=>this.clone(e,!0)):[...t];if(t instanceof HTMLElement&&"function"==typeof t.cloneNode)return t.cloneNode(e);if("object"!=typeof t)return t;{const n=Object.create(Object.getPrototypeOf(t));return e?Object.keys(t).forEach(e=>{n[e]=this.clone(t[e],!0)}):Object.assign(n,t),n}},extend(o,e,a=!0){return e&&"object"==typeof e&&Object.entries(e).forEach(([e,t])=>{var n=o[e],r=Object.prototype.hasOwnProperty.call(o,e);!this.isObject(t)||null===t||this.isDate(t)||Array.isArray(t)||t instanceof HTMLElement?!a&&r||(o[e]=this.clone(t,!1)):(r&&this.isObject(n)||(o[e]={}),this.extend(o[e],t,a))}),o}}),e.$object=w}(globalRoot),!function(d){"use strict";const t=d.$library||new syn.module;let u=null;"node"!==globalRoot.devicePlatform&&(u=d.document,"function"!=typeof d.CustomEvent&&((e=function(e,t={}){const n=u.createEvent("CustomEvent");var{bubbles:t=!1,cancelable:r=!1,detail:o=void 0}=t;return n.initCustomEvent(e,t,r,o),n}).prototype=d.Event.prototype,d.CustomEvent=e));var e=(()=>{const s=[];return Object.freeze({add(t,n,r,o=!1){return!(!t||!n||"function"!=typeof r)&&(!s.some(e=>e.el===t&&e.type===n&&e.handler===r&&e.capture===o)&&(s.push({el:t,type:n,handler:r,capture:o}),!0))},remove(t,n,r,o=!1){var e=s.length;for(let e=s.length-1;0<=e;e--){var a=s[e];a.el===t&&a.type===n&&a.handler===r&&a.capture===o&&s.splice(e,1)}return s.length<e},removeAllForElement(t){for(let e=s.length-1;0<=e;e--)s[e].el===t&&s.splice(e,1)},findByArgs(t,n,r,o=!1){return s.filter(e=>e.el===t&&e.type===n&&e.handler===r&&e.capture===o)},findAllByArgs(t,n){return s.filter(e=>e.el===t&&e.type===n)},getAll(){return[...s]},flush(){this.getAll().forEach(({el:e,type:t,handler:n,capture:r})=>{e.removeEventListener&&e.removeEventListener(t,n,r)}),s.length=0}})})();if(t.extend({prefixs:Object.freeze(["webkit","moz","ms","o",""]),eventMap:Object.freeze({mousedown:"touchstart",mouseup:"touchend",mousemove:"touchmove"}),events:e,concreate(){"node"!==globalRoot.devicePlatform&&u.addEventListener("DOMContentLoaded",()=>{this.addEvent(d,"unload",()=>this.events.flush())},{once:!0})},guid(){if(d.crypto?.randomUUID)return d.crypto.randomUUID();if("undefined"!=typeof crypto&&crypto.getRandomValues){const e=new Uint8Array(16),t=(crypto.getRandomValues(e),e[6]=15&e[6]|64,e[8]=63&e[8]|128,Array.from(e,e=>e.toString(16).padStart(2,"0")));return`${t.slice(0,4).join("")}-${t.slice(4,6).join("")}-${t.slice(6,8).join("")}-${t.slice(8,10).join("")}-`+t.slice(10,16).join("")}return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;const n="x"===e?t:3&t|8;return n.toString(16)})},getElement(e){return $object.isString(e)?this.get(e):e},stringToArrayBuffer(e){return encoder.encode(e).buffer},arrayBufferToString(e){if(!(e instanceof ArrayBuffer))return"";try{return decoder.decode(e)}catch(e){return syn.$l.eventLog("$c.base64Encode","ArrayBuffer 에서 문자열 변환 실패: "+e,"Error"),""}},random(t=8,e=!1){let n="";var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";if(d.crypto?.getRandomValues){var o=new Uint32Array(t);d.crypto.getRandomValues(o);for(let e=0;e<t;e++)n+=r[o[e]%r.length]}else for(let e=0;e<t;e++)n+=r.charAt(Math.floor(Math.random()*r.length));return e?n.toLowerCase():n.toUpperCase()},execPrefixFunc(t,n){if(t&&n)for(const r of this.prefixs){let e=n;if(void 0!==t[e=r?r+n.charAt(0).toUpperCase()+n.slice(1):n.charAt(0).toLowerCase()+n.slice(1)])return"function"==typeof t[e]?t[e]():t[e]}},dispatchClick(e,t={}){if((e=this.getElement(e))&&"node"!==globalRoot.devicePlatform&&u?.createEvent)try{var n={bubbles:!0,cancelable:!0,view:d,detail:1,screenX:0,screenY:0,clientX:0,clientY:0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,button:0,relatedTarget:null,...t},r=new MouseEvent("click",n);e.dispatchEvent(r)}catch(e){syn.$l.eventLog("$l.dispatchClick","클릭 디스패치 오류: "+e,"Warning")}},addEvent(e,t,n){return(e=this.getElement(e))&&"function"==typeof n&&(this.events.add(e,t,n,!1)&&e.addEventListener&&e.addEventListener(t,n,!1),$object.isString(t)&&"resize"===t.toLowerCase()&&n()),this},addEvents(e,n,r){if("function"==typeof r){let t=[];$object.isString(e)?t=this.querySelectorAll(e):Array.isArray(e)?(e.forEach(e=>{$object.isString(e)?t=t.concat(this.querySelectorAll(e)):$object.isObject(e)&&t.push(e)}),t=[...new Set(t)]):$object.isObject(e)&&(t=[e]),t.forEach(e=>this.addEvent(e,n,r))}return this},addLive(n,e,r){return"node"!==globalRoot.devicePlatform&&this.addEvent(u,e,e=>{var t=e.target.closest(n);t&&(r.call(t,e),e.preventDefault(),e.stopPropagation())}),this},removeEvent(e,t,n){return(e=this.getElement(e))&&"function"==typeof n&&this.events.remove(e,t,n,!1)&&e.removeEventListener&&e.removeEventListener(t,n,!1),this},hasEvent(e,t,n){return!!(e=this.getElement(e))&&("function"==typeof n?0<this.events.findByArgs(e,t,n,!1).length:0<this.events.findAllByArgs(e,t).length)},trigger(t,n,r){if(!(t=this.getElement(t)))return!1;let o=!1;const e=this.events.findAllByArgs(t,n);return e.forEach(({handler:e})=>{try{e.call(t,r),o=!0}catch(e){syn.$l.eventLog("$l.trigger",`"${n}" 이벤트 핸들러 실행 오류: `+e,"Warning")}}),o},triggerEvent(t,n,r){if((t=this.getElement(t))&&"node"!==globalRoot.devicePlatform)try{let e;"function"==typeof d.CustomEvent?e=new CustomEvent(n,{detail:r,bubbles:!0,cancelable:!0}):u.createEvent&&(e=u.createEvent("HTMLEvents")).initEvent(n,!0,!0),e&&t.dispatchEvent(e)}catch(e){syn.$l.eventLog("$l.triggerEvent",`"${n}" 이벤트 디스패치 오류: `+e,"Warning")}return this},getValue(t,e=""){if($this?.context?.synControls){const r=$this.context.synControls,o=r.find(e=>e.id===t||e.id===t+"_hidden");if(o?.module){const a=$webform.getControlModule(o.module);if(a?.getValue)try{return a.getValue(o.id.replace("_hidden",""),o)??e}catch(e){syn.$l.eventLog("$l.getValue",`"${t}" 값 가져오기 오류: `+e,"Warning")}}else if(u){var n=this.get(t);if(n)return n.value??e}}return e},get(...e){if("node"===globalRoot.devicePlatform||!u)return 1===e.length?null:[];var t=e.map(e=>$object.isString(e)?u.getElementById(e):null).filter(e=>null!==e);return 1===e.length?t[0]||null:t},querySelector(...e){if("node"===globalRoot.devicePlatform||!u)return 1===e.length?null:[];const r=[];return e.forEach(t=>{if($object.isString(t))try{if(t.startsWith("//")||t.startsWith(".//")){const n=u.evaluate(t,u,null,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null);for(let e=0;e<n.snapshotLength;e++)r.push(n.snapshotItem(e))}else{var e=u.querySelector(t);e&&r.push(e)}}catch(e){syn.$l.eventLog("$l.querySelector",`잘못된 셀렉터 "${t}": `+e,"Warning")}}),1===e.length?r[0]||null:r},getTagName(...e){if("node"===globalRoot.devicePlatform||!u)return[];let t=[];return e.forEach(e=>{$object.isString(e)&&(t=t.concat(Array.from(u.getElementsByTagName(e))))}),t},querySelectorAll(...e){if("node"===globalRoot.devicePlatform||!u)return[];let r=[];return e.forEach(t=>{if($object.isString(t))try{if(t.startsWith("//")||t.startsWith(".//")){const n=u.evaluate(t,u,null,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null);for(let e=0;e<n.snapshotLength;e++)r.push(n.snapshotItem(e))}else r=r.concat(Array.from(u.querySelectorAll(t)))}catch(e){syn.$l.eventLog("$l.querySelectorAll",`잘못된 셀렉터 "${t}": `+e,"Warning")}}),r},toEnumValue(e,t){if(!$object.isObject(e))return null;e=Object.entries(e).find(([e])=>e===t);return e?e[1]:null},toEnumText(e,t){if(!$object.isObject(e))return null;e=Object.entries(e).find(([,e])=>e===t);return e?e[0]:null},prettyTSD(t,n=!1){if("string"!=typeof t)return t;try{var r=t.split("＾");let e;const o={delimiter:"｜",newline:"↵"};return e=1<r.length?(o.meta=$string.toParameterObject(r[0]),$string.toJson(r[1],o)):$string.toJson(r[0],o),$string.toBoolean(n)?JSON.stringify(e,null,2):e}catch(e){return syn.$l.eventLog("$l.prettyTSD","TSD 파싱 오류: "+e,"Error"),"TSD 파싱 오류: "+e.message}},text2Json(e,t=",",n="\n"){if("string"!=typeof e)return[];const r=e.trim().split(n);if(r.length<2)return[];const o=r[0].split(t).map(e=>e.trim());return r.slice(1).map(e=>{const r=e.split(t);return o.reduce((e,t,n)=>(e[t]=r[n]?.trim()??"",e),{})}).filter(e=>0<Object.keys(e).length)},json2Text(e,t,r=",",o="\n"){if(!Array.isArray(e)||!Array.isArray(t))return"";const n=t.join(r);e=e.map(n=>t.map(e=>{let t=n[e]??"";return t=(t=String(t)).includes(r)||t.includes(o)||t.includes('"')?`"${t.replace(/"/g,'""')}"`:t}).join(r));return[n,...e].join(o)},nested2Flat(e,t,n,r="items"){var o,a=[];return e?(1==$object.isNullOrUndefined(r)&&(r="items"),delete(o=$object.clone(e,!1))[r],o[n]=null,a.push(o),syn.$l.parseNested2Flat(e,a,t,n,r)):syn.$l.eventLog("$l.nested2Flat","필수 데이터 확인 필요","Warning"),a},parseNested2Flat(e,t,n,r,o="items"){var a=e[o=1==$object.isNullOrUndefined(o)?"items":o];if(e&&a)for(var s=0;s<a.length;s++){var i=a[s],l=$object.clone(i,!1);delete l[o],l[r]=e[n],t.push(l),i[o]&&0<i[o].length&&syn.$l.parseNested2Flat(i,t,n,r,o)}return null},flat2Nested(e,t,n,r="items"){var o,a=null;return e&&t&&n?(o=e.find(function(e){return null==e[n]}),e=syn.$l.parseFlat2Nested(e,o,[],t,n,r),o[r]=e[r],a=o):syn.$l.eventLog("$l.flat2Nested","필수 데이터 확인 필요","Warning"),a},parseFlat2Nested(e,t,n,r,o,a="items"){var s=e.filter(function(e){return e[o]==t[r]});if(0<s.length){n[a]||(n[a]=[]);for(var i=0;i<s.length;i++)n[a].push($object.clone(s[i])),syn.$l.parseFlat2Nested(e,s[i],n[a][i],r,o,a)}return n},findNestedByID(e,t,n,r="items"){if(e&&n)for(const a of Array.isArray(e)?e:[e]){if(a[n]==t)return a;if(Array.isArray(a[r])){var o=this.findNestedByID(a[r],t,n,r);if(o)return o}}return null},deepFreeze(t){return!t||"object"!=typeof t||Object.isFrozen(t)?t:(Object.getOwnPropertyNames(t).forEach(e=>{e=t[e];"object"==typeof e&&null!==e&&this.deepFreeze(e)}),Object.freeze(t))},createBlob(e,t){try{return new Blob([e],{type:t})}catch{try{const n=d.BlobBuilder||d.WebKitBlobBuilder||d.MozBlobBuilder||d.MSBlobBuilder;if(!n)throw new Error("BlobBuilder가 지원되지 않습니다.");const r=new n;return r.append(e.buffer||e),r.getBlob(t)}catch(e){return syn.$l.eventLog("$l.createBlob","Blob 생성 실패: "+e,"Error"),null}}},dataUriToBlob(e){if(!e||"string"!=typeof e||!e.startsWith("data:"))return null;try{const r=e.split(","),o=r[0].split(":")[1].split(";");var t=o[0];const a=(o.includes("base64")?atob:decodeURIComponent)(r[1]),s=new Array(a.length);for(let e=0;e<a.length;e++)s[e]=a.charCodeAt(e);var n=new Uint8Array(s);return new Blob([n],{type:t})}catch(e){return syn.$l.eventLog("$l.dataUriToBlob","Data URI -> Blob 변환 오류: "+e,"Warning"),null}},dataUriToText(e){if(!e||"string"!=typeof e||!e.startsWith("data:"))return null;try{const n=e.split(","),r=n[0].split(":")[1].split(";");var t=r[0];return{value:r.includes("base64")?$cryptography.base64Decode(n[1]):decodeURIComponent(n[1]),mime:t}}catch(e){return syn.$l.eventLog("$l.dataUriToText","Data URI -> Text 변환 오류: "+e,"Warning"),null}},blobToDataUri(e,t){if(e instanceof Blob&&"function"==typeof t){const n=new FileReader;n.onloadend=()=>{n.error?syn.$l.eventLog("$l.blobToDataUri","FileReader 오류: "+n.error,"Error"):t(n.result)},n.onerror=()=>{var e=n.error||new Error("알 수 없는 FileReader 오류");syn.$l.eventLog("$l.blobToDataUri","FileReader 오류: "+e,"Error")},n.readAsDataURL(e)}else syn.$l.eventLog("$l.blobToDataUri","잘못된 Blob 또는 콜백 함수가 제공되었습니다.","Warning"),t&&t(new Error("잘못된 입력값"),null)},blobToDownload(e,n){if("node"!==globalRoot.devicePlatform)if(e instanceof Blob&&n)if(d.navigator&&d.navigator.msSaveOrOpenBlob)try{d.navigator.msSaveOrOpenBlob(e,n)}catch(e){syn.$l.eventLog("$l.blobToDownload","msSaveOrOpenBlob 실패: "+e,"Error")}else{let t=null;try{t=URL.createObjectURL(e);const r=u.createElement("a");r.href=t,r.download=n,u.body.appendChild(r),r.click(),u.body.removeChild(r),setTimeout(()=>URL.revokeObjectURL(t),100)}catch(e){syn.$l.eventLog("$l.blobToDownload","다운로드 실패: "+e,"Error"),t&&URL.revokeObjectURL(t)}}else syn.$l.eventLog("$l.blobToDownload","잘못된 Blob 또는 파일 이름이 제공되었습니다.","Warning")},blobUrlToBlob(t,n){"function"!=typeof n?syn.$l.eventLog("$l.blobUrlToBlob","콜백 함수 확인 필요","Warning"):t&&"string"==typeof t?fetch(t).then(e=>{if(e.ok)return e.blob();throw new Error(`HTTP 오류! 상태: ${e.status} `+e.statusText)}).then(e=>n(e)).catch(e=>{syn.$l.eventLog("$l.blobUrlToBlob",`url: ${t}, 오류: `+e,"Warning")}):syn.$l.eventLog("$l.blobUrlToBlob","URL 확인 필요","Warning")},blobUrlToDataUri(e,t){"function"!=typeof t?syn.$l.eventLog("$l.blobUrlToDataUri","콜백 함수 확인 필요","Warning"):e&&"string"==typeof e?this.blobUrlToBlob(e,e=>{e?this.blobToDataUri(e,t):syn.$l.eventLog("$l.blobUrlToDataUri","URL에서 Blob 가져오기 실패","Warning")}):syn.$l.eventLog("$l.blobUrlToDataUri","URL 확인 필요","Warning")},async blobToBase64(e,a=!1){if(!(e instanceof Blob))return null;if("node"!==globalRoot.devicePlatform||"undefined"==typeof Buffer)return"undefined"!=typeof FileReader?new Promise((n,r)=>{const o=new FileReader;o.onloadend=()=>{if(o.error)r(o.error);else{const t=o.result;var e;a?(e=t.split(";base64,")[1]||null,n(e)):n(t)}},o.onerror=e=>r(e),o.readAsDataURL(e)}):null;try{var t=await e.arrayBuffer();const r=Buffer.from(t);var n=r.toString("base64");return a?n:`data:${e.type||"application/octet-stream"};base64,`+n}catch(e){return syn.$l.eventLog("$l.blobToBase64 (Node)","Blob -> Base64 변환 오류(Node): "+e,"Error"),null}},base64ToBlob(e,t="",n=512){if(!e||"string"!=typeof e)return null;try{const r=atob(e),o=[];for(let e=0;e<r.length;e+=n){const a=r.slice(e,e+n),s=new Array(a.length);for(let e=0;e<a.length;e++)s[e]=a.charCodeAt(e);o.push(new Uint8Array(s))}return new Blob(o,{type:t})}catch(e){return syn.$l.eventLog("$l.base64ToBlob","Base64 디코딩 또는 Blob 생성 실패: "+e,"Error"),null}},async blobToFile(e,t,n){if(!(e instanceof Blob))return null;n=n||e.type||"application/octet-stream";return new File([e],t||"blob-"+$date.toString(new Date,"f"),{type:n})},async fileToBase64(r){if("node"!==globalRoot.devicePlatform)return r instanceof File&&"undefined"!=typeof FileReader?new Promise((e,t)=>{const n=new FileReader;n.onloadend=()=>e(n.result),n.onerror=e=>t(e),n.readAsDataURL(r)}):(syn.$l.eventLog("$l.fileToBase64","잘못된 입력 또는 환경입니다.","Warning"),null);{const i=require("fs").promises,l=require("path"),c=require("node-fetch");try{let e,t="application/octet-stream";if("string"==typeof r&&(r.startsWith("http:")||r.startsWith("https:"))){const d=await c(r);if(!d.ok)throw new Error("HTTP 오류! 상태: "+d.status);t=d.headers.get("content-type")||t,e=Buffer.from(await d.arrayBuffer())}else{if("string"!=typeof r)throw new Error("Node.js에서 fileToBase64에 잘못된 입력 유형입니다.");var n=r,o=(e=await i.readFile(n),l.extname(n).toLowerCase()),a={".jpg":"image/jpeg",".jpeg":"image/jpeg",".png":"image/png",".gif":"image/gif",".pdf":"application/pdf",".txt":"text/plain",".html":"text/html",".json":"application/json"};t=a[o]||t}var s=e.toString("base64");return`data:${t};base64,`+s}catch(e){return syn.$l.eventLog("$l.fileToBase64 (Node)","파일 -> Base64 변환 오류(Node): "+e,"Error"),null}}},async fileToBlob(e){const t=await this.fileToBase64(e);if(!t)return null;e=t.match(/^data:(.+?);base64,(.+)$/);if(!e)return null;var n=e[1],e=e[2];return this.base64ToBlob(e,n)},async resizeImage(t,e){var n;if(!("node"!==globalRoot.devicePlatform&&t instanceof Blob&&t.type.startsWith("image/")))return n="node"===globalRoot.devicePlatform?"Node.js 환경에서는 이미지 크기 조정을 지원하지 않습니다.":"잘못된 입력: 이미지 Blob이 아닙니다.",syn.$l.eventLog("$l.resizeImage",n,"Warning"),Promise.reject(new Error(n));const l="number"==typeof e&&0<e?e:80;return new Promise((r,o)=>{const e=new FileReader,a=new Image,s=document.createElement("canvas"),i=s.getContext("2d");a.onload=()=>{let{width:t,height:n}=a;t>n?t>l&&(n=Math.round(n*(l/t)),t=l):n>l&&(t=Math.round(t*(l/n)),n=l),s.width=t,s.height=n,i.drawImage(a,0,0,t,n),s.toBlob(e=>{e?r({blob:e,width:t,height:n}):o(new Error("캔버스 -> Blob 변환 실패."))},"image/jpeg",.9)},a.onerror=()=>o(new Error("이미지 로드 실패")),e.onload=e=>a.src=e.target.result,e.onerror=()=>o(new Error("Blob 읽기 실패")),e.readAsDataURL(t)})},logLevel:Object.freeze({Verbose:0,Debug:1,Information:2,Warning:3,Error:4,Fatal:5}),start:Date.now(),eventLogTimer:null,eventLogCount:0,eventLog(e,t,n="Verbose"){var r=t instanceof Error?t.message:String(t),t=t instanceof Error?t.stack:void 0;let o;o="string"==typeof n&&this.logLevel.hasOwnProperty(n)?this.logLevel[n]:"number"==typeof n?n:this.logLevel.Verbose;n=syn.Config?.UIEventLogLevel||"Verbose",n=this.logLevel[n]??this.logLevel.Verbose;if(!(o<n)){const s=this.toEnumText(this.logLevel,o)||"Unknown",i=(Date.now()-this.start)/1e3;var n=i.toFixed(3),a=`${this.eventLogCount}@${n} [${s}] [${e}]`+" "+(t?r+`
`+t:r);if("node"===globalRoot.devicePlatform&&globalRoot.$logger){n=s.toLowerCase();"function"==typeof globalRoot.$logger[n]?globalRoot.$logger[n](a):globalRoot.$logger.trace(a),d.console&&console.log(a)}else if(d.console){switch(o){case this.logLevel.Error:case this.logLevel.Fatal:console.error(a);break;case this.logLevel.Warning:console.warn(a);break;case this.logLevel.Information:console.info(a);break;case this.logLevel.Debug:console.debug(a);break;default:console.log(a)}if(!0===syn.Config?.IsDebugMode&&"Development"===syn.Config?.Environment&&(o,this.logLevel.Warning),u&&!d.console){const l=u.createElement("div"),c=(l.textContent=a,u.getElementById("eventlogs"));c?(c.appendChild(l),clearTimeout(this.eventLogTimer),this.eventLogTimer=setTimeout(()=>{c.scrollTop=c.scrollHeight},10)):u.body?.appendChild(l)}if(d.bound?.browserEvent)try{d.bound.browserEvent("browser",{ID:"EventLog",Data:a},(e,t)=>{e&&console.log("browserEvent EventLog 콜백 오류: "+e)})}catch(e){console.log("bound.browserEvent 호출 오류: "+e)}}this.eventLogCount++}},getBasePath(e,t){if("node"!==globalRoot.devicePlatform)return e||t||"";const n=require("path");var r=process.cwd();let o="";return o=e?n.isAbsolute(e)?e:n.resolve(r,e):t?n.resolve(r,t):r},moduleEventLog(t,n,r,o="Verbose"){if("node"===globalRoot.devicePlatform&&t){var a=r instanceof Error?r.message:String(r),r=r instanceof Error?r.stack:void 0;let e;e="string"==typeof o&&this.logLevel.hasOwnProperty(o)?this.logLevel[o]:"number"==typeof o?o:this.logLevel.Verbose;o=syn.Config?.UIEventLogLevel||"Verbose",o=this.logLevel[o]??this.logLevel.Verbose;if(!(e<o)){const s=this.toEnumText(this.logLevel,e)||"Unknown",i=(Date.now()-this.start)/1e3;o=i.toFixed(3),o=this.eventLogCount+`@${o} [${n}]`+" "+(r?a+`
`+r:a);const l=(syn.getModuleLibrary?syn.getModuleLibrary(t):null)?.logger;l?(n=s.toLowerCase(),"function"==typeof l[n]?l[n](o):l.trace(o),d.console&&console.log(`[${t}] ${s}: `+o)):console.log(`모듈 로거 오류: ModuleID "${t}"에 대한 로거를 찾을 수 없습니다. 메시지: `+o),this.eventLogCount++}}}}),"node"===globalRoot.devicePlatform){const n=["addEvent","addEvents","addLive","removeEvent","hasEvent","trigger","triggerEvent","getValue","get","querySelector","getTagName","querySelectorAll","dispatchClick"];n.forEach(e=>{delete t[e]})}else{const r=["getBasePath","moduleEventLog"];r.forEach(e=>{delete t[e]})}d.$library=syn.$l=t}(globalRoot),!function(e){"use strict";const r=e.$request||new syn.module;let i=null,t="",n="";"node"!==globalRoot.devicePlatform&&(i=e.document,t=e.location?.pathname??"",n=e.location?.href??""),r.extend({params:{},path:t,query(e,t){return function(e){let t=(1==(e=e.split("?")).length?e[0]:e[1]).split("&");for(let e=0;e<t.length;e++){var n=t[e].indexOf("="),r=t[e].substring(0,n),n=t[e].substring(n+1);syn.$r.params[r]=n}return syn.$r.params}(t=t||n)[e]},url(){var e,t=syn.$r.path.split("?");let n="";for(e in n=syn.$r.path+(0<syn.$r.path.length&&1<t.length?"&":"?"),r.params)"string"==typeof syn.$r.params[e]&&(n+=e+"="+syn.$r.params[e]+"&");return syn.Config&&0==$string.toBoolean(syn.Config.IsClientCaching)&&(n+="&noCache="+(new Date).getTime()),encodeURI(n.substring(0,n.length-1))},toQueryString(e,t){const n=e?Object.entries(e).reduce((e,t,n)=>{var r=t[0],t=t[1];return e+=`&${r}=`+$string.toValue(t,"")},""):"";return n=0==$string.isNullOrEmpty(n)&&1==$string.toBoolean(t)?"?"+n.substring(1):n},toUrlObject(e){return((e=e||location.href).match(/([^?=&]+)(=([^&]*))/g)||[]).reduce((e,t)=>(e[t.slice(0,t.indexOf("="))]=t.slice(t.indexOf("=")+1),e),{})},async isCorsEnabled(t){if(!t||"node"===globalRoot.devicePlatform)return!0;try{var e=await fetch(t,{method:"HEAD",mode:"cors",cache:"no-cache",signal:AbortSignal.timeout(2e3)}),n=e.ok;return n||syn.$l.eventLog("$r.isCorsEnabled",`${t}, Status: ${e.status} `+e.statusText,"Warning"),n}catch(e){return syn.$l.eventLog("$r.isCorsEnabled",t+", Error: "+e.message,"AbortError"===e.name?"Warning":"Error"),!1}},httpFetch(d){return new Proxy({},{get(e,c){return async function(e,n){if(-1==["send"].indexOf(c))return Promise.resolve({error:c+" 메서드 확인 필요"});n=syn.$w.argumentsExtend({method:"GET"},n);let r=null,o=null;if(0==$object.isNullOrUndefined(e)&&0==$object.isString(e)){if(n.method=n.method||"POST",1==$object.isNullOrUndefined(n.headers)&&(n.headers=new Headers,e instanceof FormData||n.headers.append("Content-Type",n.contentType||"application/json")),syn.Environment){var a=syn.Environment;if(a.Header)for(var s in a.Header)0==n.headers.has(s)&&n.headers.append(s,a.Header[s])}0==n.headers.has("OffsetMinutes")&&n.headers.append("OffsetMinutes",syn.$w.timezoneOffsetMinutes);let t={method:n.method,headers:n.headers,body:e instanceof FormData?e:JSON.stringify(e),redirect:"follow"};if(0==$object.isNullOrUndefined(n.timeout)){let e=new AbortController;o=setTimeout(()=>e.abort(),n.timeout),t.signal=e.signal}r=await fetch(d,t),o&&clearTimeout(o)}else{if(1==$object.isNullOrUndefined(n.headers)&&(n.headers=new Headers,n.headers.append("Content-Type",n.contentType||"application/json")),syn.Environment){var i=syn.Environment;if(i.Header)for(var l in i.Header)0==n.headers.has(l)&&n.headers.append(l,i.Header[l])}0==n.headers.has("OffsetMinutes")&&n.headers.append("OffsetMinutes",syn.$w.timezoneOffsetMinutes);let t={method:n.method,headers:n.headers,redirect:"follow"};if(0==$object.isNullOrUndefined(n.timeout)){let e=new AbortController;o=setTimeout(()=>e.abort(),n.timeout),t.signal=e.signal}r=await fetch(d,t),o&&clearTimeout(o)}let t={error:"요청 정보 확인 필요"};if(1==r.ok){let e=r.headers.get("Content-Type")||"";t=1==e.includes("application/json")?await r.json():1==e.includes("text/")?await r.text():await r.blob()}else t={error:`status: ${r.status}, text: `+await r.text()},syn.$l.eventLog("$r.httpFetch",""+t.error,"Error");return Promise.resolve(t)}}})},httpRequest(e,n,r,t,o){o=syn.$w.argumentsExtend({timeout:0,responseType:"text"},o),1==$object.isNullOrUndefined(r)&&(r={});let a=syn.$w.xmlHttp(),s=(a.open(e,n,!0),a.timeout=o.timeout,a.responseType=o.responseType,a.setRequestHeader("OffsetMinutes",syn.$w.timezoneOffsetMinutes),null);if(0==$object.isNullOrUndefined(r.body)){let t=r.body;if("GET"==e.toUpperCase()){let e=n+(1<n.split("?").length?"&":"?");for(var i in t)e+=i+"="+t[i].toString()+"&";n=encodeURI(e.substring(0,e.length-1))}else for(var l in s=new FormData,t)s.append(l,t[l].toString())}else a.setRequestHeader("Content-Type",o.contentType||"application/json");if(!syn.$w.setServiceClientHeader||0!=syn.$w.setServiceClientHeader(a))if(t)a.onreadystatechange=function(){4===a.readyState&&(200!==a.status?0==a.status?syn.$l.eventLog("$r.httpRequest","X-Requested transport error","Fatal"):syn.$l.eventLog("$r.httpRequest","response status - {0}".format(a.statusText)+a.response,"Error"):t&&t({status:a.status,response:a.response}))},null==s?r!={}?a.send(JSON.stringify(r)):a.send():a.send(s);else{if(globalRoot.Promise)return new Promise(function(e){a.onload=function(){return e({status:a.status,response:a.response})},a.onerror=function(){return e({status:a.status,response:a.response})},null==s?r!={}?a.send(JSON.stringify(r)):a.send():a.send(s)});syn.$l.eventLog("$w.httpRequest","지원하지 않는 기능. 매개변수 확인 필요","Error")}},httpSubmit(e,t,n){if(0==document.forms.length)return!1;0<document.forms.length&&1==$object.isNullOrUndefined(t)&&(t=document.forms[0].id);let r=document.forms[t];if(!r)return!1;r.method=n||"POST",r.action=e,r.submit()},httpDataSubmit(t,e,n,r){r=syn.$w.argumentsExtend({timeout:0,responseType:"text"},r);let o=syn.$w.xmlHttp();if(o.open("POST",e,!0),o.timeout=r.timeout,o.responseType=r.responseType,o.setRequestHeader("OffsetMinutes",syn.$w.timezoneOffsetMinutes),!syn.$w.setServiceClientHeader||0!=syn.$w.setServiceClientHeader(o))if(n)o.onreadystatechange=function(){4===o.readyState&&(200!==o.status?0==o.status?syn.$l.eventLog("$r.httpDataSubmit","X-Requested transfort error","Fatal"):syn.$l.eventLog("$r.httpDataSubmit","response status - {0}".format(o.statusText)+o.response,"Error"):n&&n({status:o.status,response:o.response}))},o.send(t);else{if(globalThis.Promise)return new Promise(function(e){o.onload=function(){return e({status:o.status,response:o.response})},o.onerror=function(){return e({status:o.status,response:o.response})},o.send(t)});syn.$l.eventLog("$r.httpDataSubmit","지원하지 않는 기능. 매개변수 확인 필요","Error")}},createBlobUrl:e.URL?.createObjectURL?.bind(e.URL)??e.webkitURL?.createObjectURL?.bind(e.webkitURL),revokeBlobUrl:e.URL?.revokeObjectURL?.bind(e.URL)??e.webkitURL?.revokeObjectURL?.bind(e.webkitURL),getCookie(e){if("node"!==globalRoot.devicePlatform&&i?.cookie)for(const t of i.cookie.split("; ")){const[n,...r]=t.split("=");if(n===e)return decodeURIComponent(r.join("="))}},setCookie(t,n,r,o="/",a,s=!1){if("node"!==globalRoot.devicePlatform&&i){let e=t+"="+encodeURIComponent(n);r instanceof Date?e+="; expires="+r.toUTCString():"number"==typeof r&&(e+="; max-age="+r),e+="; path="+o,a&&(e+="; domain="+a),s&&(e+="; secure"),e+="; SameSite=Lax",i.cookie=e}return this},deleteCookie(e,t="/",n){return this.setCookie(e,"",new Date(0),t,n),this}}),e.$request=syn.$r=r}(globalRoot),!function(context){"use strict";const $webform=context.$webform||new syn.module;let doc=null;if("node"!==globalRoot.devicePlatform&&($webform.context=context,$webform.document=context.document,doc=context.document),$webform.extend({localeID:"ko-KR",cookiePrefixName:"HandStack",timezoneOffsetMinutes:-(new Date).getTimezoneOffset(),method:"POST",isPageLoad:!1,transactionLoaderID:null,pageReadyTimeout:6e4,eventAddReady:"node"===globalRoot.devicePlatform?null:new CustomEvent("addready"),eventRemoveReady:"node"===globalRoot.devicePlatform?null:new CustomEvent("removeready"),mappingModule:!0,moduleReadyIntervalID:null,remainingReadyIntervalID:null,remainingReadyCount:0,defaultControlOptions:{value:"",dataType:"string",belongID:null,controlText:null,validators:["require","unique","numeric","ipaddress","email","date","url"],transactConfig:null,triggerConfig:null,getter:!1,setter:!1,bindingID:"",resourceKey:"",localeID:"ko-KR",required:!1,tooltip:""},setStorage(e,t,n=!1,r){var o,a=JSON.stringify(t);if("node"===globalRoot.devicePlatform)n?localStorage.setItem(e,a):(r=r??12e5,o=Date.now(),localStorage.setItem(e,JSON.stringify({value:t,expiry:o+r,ttl:r})));else{const s=n?localStorage:sessionStorage;s.setItem(e,a)}return this},getStorage(t,e=!1){if("node"===globalRoot.devicePlatform){if(e)return(n=localStorage.getItem(t))?JSON.parse(n):null;var n=localStorage.getItem(t);if(!n)return null;try{var r=JSON.parse(n),o=Date.now();if(o>r.expiry)return localStorage.removeItem(t),null;var a={...r,expiry:o+r.ttl};return localStorage.setItem(t,JSON.stringify(a)),r.value}catch(e){return syn.$l.eventLog("$w.getStorage (Node)",`키 "${t}"에 대한 스토리지 항목 파싱 오류: `+e,"Error"),localStorage.removeItem(t),null}}else{const s=e?localStorage:sessionStorage;n=s.getItem(t);try{return n?JSON.parse(n):null}catch(e){return syn.$l.eventLog("$w.getStorage (Browser)",`키 "${t}"에 대한 스토리지 항목 파싱 오류: `+e,"Error"),s.removeItem(t),null}}},removeStorage(e,t=!1){if("node"===globalRoot.devicePlatform)localStorage.removeItem(e);else{const n=t?localStorage:sessionStorage;n.removeItem(e)}return this},activeControl(e){e=e||context.event||null;let t=null;return e?t=e.target||e.srcElement||e||null:doc&&(t=doc.activeElement||null),(t=!t&&globalRoot.$this?.context?$this.context.focusControl||null:t)&&globalRoot.$this?.context&&($this.context.focusControl=t),t},async contentLoaded(){if(syn.$l.addEvent(document,"addready",function(){syn.$w.remainingReadyCount++}),syn.$l.addEvent(document,"removeready",function(){syn.$w.remainingReadyCount--}),syn.$l.get("moduleScript"))syn.$w.extend({pageScript:syn.$l.get("moduleScript").value});else{var pathname=location.pathname,filename,input=(0<pathname.split("/").length&&(filename=pathname.split("/")[pathname.split("/").length-1],$webform.extend({pageProject:pathname.split("/")[pathname.split("/").length-2],pageScript:"$"+(-1<filename.indexOf(".")?filename.substring(0,filename.indexOf(".")):filename)})),document.createElement("input"));if(input.id="moduleScript",input.type="hidden",input.value=syn.$w.pageScript,document.body.appendChild(input),document.forms)for(var i=0;i<document.forms.length;i++)syn.$l.addEvent(document.forms[i],"submit",function(e){var t=!1,n=e.target||e.srcElement;if($this&&$this.hook&&$this.hook.frameEvent&&(t=$this.hook.frameEvent("beforeSubmit",{el:n,evt:e}),1!=$object.isNullOrUndefined(t)&&0!=$string.toBoolean(t)||(t=!1)),0==t)return e.returnValue=!1,e.cancel=!0,e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation(),!1})}var pageLoad=function(){context.domainPageLoad&&context.domainPageLoad();var e,n=context[syn.$w.pageScript];if(n&&n.hook.pageLoad&&n.hook.pageLoad(),n&&n.hook.pageMatch&&(e=function(e){var t="xs";switch(e.media){case"(min-width: 576px)":t="sm";break;case"(min-width: 768px)":t="md";break;case"(min-width: 992px)":t="lg";break;case"(min-width: 1200px)":t="xl";break;case"(min-width: 1400px)":t="xxl"}document.dispatchEvent(new CustomEvent("mediaquery",{detail:t})),n.hook.pageMatch(t),context.domainPageMediaQuery&&context.domainPageMediaQuery(t)},syn.$l.addEvent(matchMedia("(min-width: 0px)"),"change",e),syn.$l.addEvent(matchMedia("(min-width: 576px)"),"change",e),syn.$l.addEvent(matchMedia("(min-width: 768px)"),"change",e),syn.$l.addEvent(matchMedia("(min-width: 992px)"),"change",e),syn.$l.addEvent(matchMedia("(min-width: 1200px)"),"change",e),syn.$l.addEvent(matchMedia("(min-width: 1400px)"),"change",e)),1==$object.isNullOrUndefined(syn.$w.User)&&(e={TokenID:"",UserNo:0,UserID:"",UserName:"",BusinessPhoneNo:"",BusinessEmail:"",DepartmentID:"",DepartmentName:"",PositionID:"",PositionName:"",CompanyNo:"",CompanyName:"",Roles:[],Claims:[]},syn.$w.getSSOInfo?syn.$w.User=syn.$w.getSSOInfo()||e:syn.$w.User=e),0==$object.isNullOrUndefined(syn.$w.User)&&syn.$l.deepFreeze(syn.$w.User),0==$object.isNullOrUndefined(syn.$w.Variable)&&syn.$l.deepFreeze(syn.$w.Variable),n&&n.context.synControls&&(1==$object.isNullOrUndefined(n.context.tabOrderControls)||0==n.context.tabOrderControls.length)){var t=[],r=document.body.outerHTML.match(/<(syn_).+?>/gi);if(r)for(var o=r.length,a=0;a<o;a++){var s=r[a],i=s.substring(1,s.indexOf(" ")).toUpperCase();t.push(i)}for(var t=$array.distinct(t),l=document.querySelectorAll("input,select,textarea,button"+(0<t.length?","+t.join(","):"")),c=[],d=l.length,u=0;u<d;u++)(g=l[u])&&g.style&&"none"==g.style.display||"hidden"==g.type?g.id&&"SELECT"==g.tagName.toUpperCase()&&0==$string.isNullOrEmpty(g.getAttribute("syn-datafield"))&&c.push(g):(g.id&&0==g.id.includes("btn_syneditor_")&&0==g.id.includes("chk_syngrid_")&&0==g.id.includes("_hidden")||g.id&&"SELECT"==g.tagName.toUpperCase()&&0==$string.isNullOrEmpty(g.getAttribute("syn-datafield"))||g.id&&1==g.tagName.includes("SYN_"))&&c.push(g);for(var g,p,f,y,m,h=[],a=0,d=c.length,u=0;u<d;u++)(g=c[u]).id&&0==g.id.includes("btn_syneditor_")&&0==g.id.includes("chk_syngrid_")&&0==g.id.includes("_hidden")?(f=g.id,y=syn.$d.offset(g),(m=g.getAttribute("baseID"))&&(f=m),(m=n.context.synControls.find(function(e){return e.id==f}))&&("datepicker"==m.type?y=syn.$d.offset(g.parentElement):"colorpicker"==m.type&&(y=syn.$d.offset(g.parentElement.parentElement)),h.push({elID:g.id,tagName:g.tagName,formID:m.formDataFieldID,type:m.type,top:y.top,left:y.left}))):g.id&&"SELECT"==g.tagName.toUpperCase()&&0==$string.isNullOrEmpty(g.getAttribute("syn-datafield"))?(y=null,!1===g.getAttribute("multiple")?(p=syn.uicontrols.$select.getControl(g.id))&&(y=syn.$d.offset(p.picker.select)):(p=syn.uicontrols.$multiselect.getControl(g.id))&&(y=syn.$d.offset(p.picker.select)),y&&(m=n.context.synControls.find(function(e){return e.id==g.id}))&&h.push({elID:g.id,tagName:g.tagName,formID:m.formDataFieldID,type:m.type,top:y.top,left:y.left})):g.id&&1==g.tagName.includes("SYN_")&&(f=g.id.replace("_hidden",""),"SYN_DATEPICKER"!=g.tagName&&g.tagName,(y=null)&&(m=n.context.synControls.find(function(e){return e.id==f}))&&h.push({elID:f,tagName:g.tagName,formID:m.formDataFieldID,type:m.type,top:y.top,left:y.left})),a+=1;n.context.focusControl=null,n.context.tabOrderFocusID=null,n.context.tabOrderControls=h,n&&n.hook.frameEvent&&n.hook.frameEvent("tabOrderControls",n.context.tabOrderControls),0<n.context.tabOrderControls.length&&(n.config?(1==$string.isNullOrEmpty(n.context.tapOrderFlow)&&(n.context.tapOrderFlow="html"),"tdlr"==n.context.tapOrderFlow?n.context.tabOrderControls.sort(function(e,t){return e.top===t.top?e.left-t.left:e.top>t.top?1:-1}):"lrtd"==n.context.tapOrderFlow&&n.context.tabOrderControls.sort(function(e,t){return e.left===t.left?e.top-t.top:e.left>t.left?1:-1})):n.context.tabOrderControls.sort(function(e,t){return e.top===t.top?e.left-t.left:e.top>t.top?1:-1}));var $=syn.$l.querySelector("[autofocus]");$&&$.id&&$.tagName&&(i=$.tagName.toUpperCase(),-1<"input,select,textarea,button".toUpperCase().split(",").indexOf(i)&&(n.context.focusControl=$,n.context.tabOrderFocusID=$.id,setTimeout(function(){$.focus()})))}n&&n.hook.pageComplete&&n.hook.pageComplete(),context.domainPageComplete&&context.domainPageComplete()},pageFormInit=async()=>{var mod=context[syn.$w.pageScript];if(mod.config&&0==$string.isNullOrEmpty(mod.config.layoutPage)){var masterLayout=await syn.$w.fetchText(mod.config.layoutPage);if(masterLayout){var parser=new DOMParser,masterPage=parser.parseFromString(masterLayout,"text/html");if(masterPage){document.body.style.visibility="hidden";for(var heads=syn.$l.querySelectorAll("syn-head"),i=0,length=heads.length;i<length;i++){var head=heads[i];document.head.insertAdjacentHTML("afterbegin",head.innerHTML)}for(var sections=syn.$l.querySelectorAll("syn-section"),i=0,length=sections.length;i<length;i++){var section=sections[i],componentSection=masterPage.querySelector(section.getAttribute("selector"));componentSection&&(componentSection.innerHTML=section.innerHTML)}for(var bodys=syn.$l.querySelectorAll("syn-body"),i=0,length=bodys.length;i<length;i++){var body=bodys[i],position=body.getAttribute("position");0==$string.isNullOrEmpty(position)&&-1<["beforebegin","afterbegin","beforeend","afterend"].indexOf(position)&&masterPage.body.insertAdjacentHTML(position,body.innerHTML)}document.body.innerHTML=masterPage.body.innerHTML}}}if(mod&&mod.hook.pageFormInit&&await mod.hook.pageFormInit(),context.domainLibraryLoad){var isContinue=domainLibraryLoad();if(0==$object.isNullOrUndefined(isContinue)&&!1===isContinue)return!1}for(var getTagModule=e=>{var t=null;if(syn.uicontrols){var n="";if(-1<e.indexOf("SYN_"))var r=e.substring(4).toLowerCase(),t=syn.uicontrols["$"+r],n=r;else switch(e){case"BUTTON":t=syn.uicontrols.$button,n="button";break;case"INPUT":switch(n=(synControl.getAttribute("type")||"text").toLowerCase()){case"hidden":case"text":case"password":case"color":case"email":case"number":case"search":case"tel":case"url":t=syn.uicontrols.$textbox;break;case"submit":case"reset":case"button":t=syn.uicontrols.$button;break;case"radio":t=syn.uicontrols.$radio;break;case"checkbox":t=syn.uicontrols.$checkbox}break;case"TEXTAREA":t=syn.uicontrols.$textarea,n="textarea";break;case"SELECT":n=null==synControl.getAttribute("multiple")?(t=syn.uicontrols.$select,"select"):(t=syn.uicontrols.$multiselect,"multiselect");break;default:t=syn.uicontrols.$element,n="element"}}return{module:t,type:n}},synControlList=[],synControls=document.querySelectorAll('[tag^="syn_"],[syn-datafield],[syn-options],[syn-events]'),i=0;i<synControls.length;i++){var synControl=synControls[i];if(synControl.tagName){var tagName=synControl.tagName.toUpperCase(),dataField=synControl.getAttribute("syn-datafield"),elementID=synControl.getAttribute("id"),formDataField=synControl.closest("form")?synControl.closest("form").getAttribute("syn-datafield"):"",controlOptions=synControl.getAttribute("syn-options")||null;if(null!=controlOptions)try{controlOptions=eval("("+controlOptions+")")}catch(error){syn.$l.eventLog("$w.contentLoaded",'elID: "{0}" syn-options 확인 필요: '.format(elementID)+error.message,"Warning")}else controlOptions={};var tagModule=getTagModule(tagName);tagModule.module?tagModule.module.controlLoad(elementID,controlOptions):$this.hook.controlLoad&&$this.hook.controlLoad(elementID,controlOptions)}}for(var synControls=document.querySelectorAll('[tag^="syn_"],[syn-datafield],[syn-options],[syn-events]'),i=0;i<synControls.length;i++){var synControl=synControls[i];if(synControl.tagName){var tagName=synControl.tagName.toUpperCase(),dataField=synControl.getAttribute("syn-datafield"),elementID=synControl.getAttribute("id"),formDataField=synControl.closest("form")?synControl.closest("form").getAttribute("syn-datafield"):"",controlOptions=synControl.getAttribute("syn-options")||null;if(null!=controlOptions)try{controlOptions=eval("("+controlOptions+")")}catch(error){syn.$l.eventLog("$w.contentLoaded",'elID: "{0}" syn-options 확인 필요: '.format(elementID)+error.message,"Warning")}else controlOptions={};syn.$l.addEvent(synControl.id,"focus",function(e){$this.context.focusControl=e.target||e.currentTarget||e.srcElement,$this.context.focusControl?$this.context.tabOrderFocusID=$this.context.focusControl.id:$this.context.tabOrderFocusID=null});var tagModule=getTagModule(tagName);tagModule.module?tagModule.module.addModuleList&&tagModule.module.addModuleList(synControl,synControlList,controlOptions,tagModule.type):elementID&&dataField&&synControlList.push({id:elementID,formDataFieldID:formDataField,field:dataField,module:null,type:tagModule.type||synControl.tagName.toLowerCase()})}}for(var synEventControls=document.querySelectorAll("[syn-events]"),i=0;i<synEventControls.length;i++){var synControl=synEventControls[i],elEvents=null;try{elEvents=eval("("+synControl.getAttribute("syn-events")+")")}catch(error){syn.$l.eventLog("$w.contentLoaded",'elID: "{0}" syn-events 확인 필요: '.format(synControl.id)+error.message,"Warning")}if(elEvents&&$this.event)for(var length=elEvents.length,j=0;j<length;j++){var elEvent=elEvents[j],func=$this.event[synControl.id+"_"+elEvent];func&&syn.$l.addEvent(synControl.id,elEvent,func)}}for(var synOptionControls=document.querySelectorAll("[syn-options]"),i=0;i<synOptionControls.length;i++){var synControl=synOptionControls[i],elID=synControl.id.replace("_hidden",""),options=null;try{var el=syn.$l.get(synControl.id+"_hidden")||syn.$l.get(synControl.id),synOptions=el.getAttribute("syn-options")||null;null!=synOptions&&(options=eval("("+synOptions+")"))}catch(error){syn.$l.eventLog("$w.contentLoaded",'elID: "{0}" syn-options 확인 필요: '.format(synControl.id)+error.message,"Warning")}if(options&&options.transactConfig&&options.transactConfig.triggerEvent)if(1==$object.isString(options.transactConfig.triggerEvent))syn.$l.addEvent(elID,options.transactConfig.triggerEvent,function(evt){var el=syn.$w.activeControl(evt),synOptions=el.getAttribute("syn-options")||null,transactConfig=(null!=synOptions&&(options=eval("("+synOptions+")")),null);options&&options.transactConfig&&(transactConfig=options.transactConfig),transactConfig&&syn.$w.transactionAction(transactConfig,transactConfig.options)});else if(1==$object.isArray(options.transactConfig.triggerEvent)){var triggerFunction=function(evt){var el=syn.$w.activeControl(evt),synOptions=el.getAttribute("syn-options")||null,transactConfig=(null!=synOptions&&(options=eval("("+synOptions+")")),null);options&&options.transactConfig&&(transactConfig=options.transactConfig),transactConfig&&syn.$w.transactionAction(transactConfig,transactConfig.options)},key;for(key in options.transactConfig.triggerEvent){var eventName=options.transactConfig.triggerEvent[key];syn.$l.addEvent(elID,eventName,triggerFunction)}}if(options&&options.triggerConfig&&options.triggerConfig.triggerEvent)if(1==$object.isString(options.triggerConfig.triggerEvent))syn.$l.addEvent(elID,options.triggerConfig.triggerEvent,function(evt){var triggerConfig=null,el=syn.$w.activeControl(evt),synOptions=el.getAttribute("syn-options")||null;null!=synOptions?options=eval("("+synOptions+")"):(synOptions=el.parentElement.getAttribute("syn-options")||null,null!=synOptions&&(options=eval("("+synOptions+")"))),options&&options.triggerConfig&&(triggerConfig=options.triggerConfig),triggerConfig&&syn.$w.triggerAction(triggerConfig)});else if(1==$object.isArray(options.triggerConfig.triggerEvent)){var triggerFunction=function(evt){var triggerConfig=null,el=syn.$w.activeControl(evt),synOptions=el.getAttribute("syn-options")||null;null!=synOptions?options=eval("("+synOptions+")"):(synOptions=el.parentElement.getAttribute("syn-options")||null,null!=synOptions&&(options=eval("("+synOptions+")"))),options&&options.triggerConfig&&(triggerConfig=options.triggerConfig),triggerConfig&&syn.$w.triggerAction(triggerConfig)},key;for(key in options.triggerConfig.triggerEvent){var eventName=options.triggerConfig.triggerEvent[key];syn.$l.addEvent(elID,eventName,triggerFunction)}}}var elem=document.createElement("input");elem.type="hidden",elem.id="synControlList",elem.textContent=JSON.stringify(synControlList),document.body.appendChild(elem),mod?mod.context.synControls=synControlList:context.synControls=synControlList,syn.$w.remainingReadyIntervalID=setInterval(function(){0==$object.isNullOrUndefined(syn.$w.remainingReadyIntervalID)&&0==syn.$w.remainingReadyCount&&(clearInterval(syn.$w.remainingReadyIntervalID),syn.$w.remainingReadyIntervalID=null,pageLoad(),syn.$w.isPageLoad=!0)},25),setTimeout(function(){0==$object.isNullOrUndefined(syn.$w.remainingReadyIntervalID)&&(clearInterval(syn.$w.remainingReadyIntervalID),syn.$w.remainingReadyIntervalID=null,syn.$l.eventLog("pageLoad","화면 초기화 오류, remainingReadyCount: {0} 확인 필요".format(syn.$w.remainingReadyCount),"Fatal"))},syn.$w.pageReadyTimeout)},module,mod;1==syn.$w.mappingModule?(module={},syn.$l.get("moduleScript")&&syn.$w.extend({pageScript:syn.$l.get("moduleScript").value}),0==$string.toBoolean(window.noPageScript)&&(module=await syn.$w.fetchScript(syn.$w.pageScript.replace("$",""))),mod=context[syn.$w.pageScript]||new syn.module,mod.config={programID:syn.Config.ApplicationID,moduleID:("browser"==globalRoot.devicePlatform?location.pathname.split("/").filter(Boolean)[0]:void 0)||syn.Config.ModuleID,businessID:syn.$w.pageProject||syn.Config.ProjectID,systemID:syn.Config.SystemID,transactionID:syn.$w.pageScript.replace("$",""),transactions:[],dataSource:{},actionButtons:[]},mod.prop={},mod.model={},mod.hook={},mod.event={},mod.translate={},mod.transaction={},mod.method={},mod.store={},mod.context={},mod.extend(module),context[syn.$w.pageScript]=mod,context.$this=mod,window.synLoader?(syn.$l.addEvent(document,"pageReady",pageFormInit),context.pageFormReady=!0,setTimeout(function(){syn.$l.removeEvent(document,"pageReady",pageFormInit),null!=syn.$w.remainingReadyIntervalID&&syn.$l.eventLog("pageReady","화면 초기화 오류, loader 또는 dispatchEvent 확인 필요","Fatal")},syn.$w.pageReadyTimeout)):setTimeout(async()=>{await pageFormInit()},25)):(pageLoad(),syn.$w.isPageLoad=!0)},addReadyCount(){syn.$w.eventAddReady&&0==syn.$w.isPageLoad&&doc.dispatchEvent(syn.$w.eventAddReady)},removeReadyCount(){syn.$w.eventRemoveReady&&0==syn.$w.isPageLoad&&doc.dispatchEvent(syn.$w.eventRemoveReady)},createSelection(e,t,n){const r=syn.$l.getElement(e);if(r)try{if(r.setSelectionRange&&"email"!==r.type)r.setSelectionRange(t,n);else if(r.createTextRange){const o=r.createTextRange();o.collapse(!0),o.moveStart("character",t),o.moveEnd("character",n-t),o.select()}r.focus()}catch(e){syn.$l.eventLog("$w.createSelection",r.id+"의 선택 영역 설정 오류: "+e,"Warning")}},argumentsExtend(...e){return Object.assign({},...e)},loadJson(t,n,r,o,e=!0,a=!1){const s=new XMLHttpRequest;if(s.open("GET",t,e),syn.$w.setServiceClientHeader&&!this.setServiceClientHeader(s))syn.$l.eventLog("$w.loadJson",`URL ${t}에 대한 setServiceClientHeader 실패`,"Error"),o&&a&&o();else{const i=()=>{if(200===s.status)try{var e=JSON.parse(s.responseText);r&&r(n,e)}catch(e){syn.$l.eventLog("$w.loadJson",`URL: ${t}, 상태: ${s.status}, 오류: ${e}에 대한 JSON 파싱 오류`,"Error")}finally{o&&o()}else syn.$l.eventLog("$w.loadJson",`URL: ${t}, 상태: ${s.status}, 응답 텍스트: ${s.responseText} HTTP 오류`,"Error"),o&&a&&o()};if(e)s.onreadystatechange=()=>{s.readyState===XMLHttpRequest.DONE&&i()},s.onerror=()=>{syn.$l.eventLog("$w.loadJson",`URL ${t} 네트워크 오류`,"Error"),o&&a&&o()},s.send();else try{s.send(),i()}catch(e){syn.$l.eventLog("$w.loadJson",`URL: ${t}, 오류: ${e}에 대한 동기 요청 중 오류 발생`,"Error"),o&&a&&o()}}},getTriggerOptions(e){const t=syn.$l.getElement(e);e=t?.getAttribute("triggerOptions");if(!e)return null;try{return JSON.parse(e)}catch(e){return syn.$l.eventLog("$w.getTriggerOptions",`엘리먼트 ${t?.id}의 triggerOptions 파싱 실패: `+e,"Warning"),null}},triggerAction(n){if($this){let e=!0;const o=syn.$w.argumentsExtend({arguments:[],options:{}},n.params);if((e=$this.hook?.beforeTrigger?$this.hook.beforeTrigger(n.triggerID,n.action,o):e)??!0){const a=syn.$l.get(n.triggerID);let e=null,t=null;try{if(n.action?.startsWith("syn.uicontrols.$")?t=n.action.split(".").slice(1).reduce((e,t)=>e?.[t],syn):n.triggerID&&n.action&&$this.event?t=$this.event[n.triggerID+"_"+n.action]:n.method&&(t=new Function(`return (${n.method})`)()),"function"!=typeof t)throw new Error(`액션: ${n.action||n.method}에 대한 트리거 함수를 찾을 수 없거나 유효하지 않습니다.`);if(a&&n.action?.startsWith("syn.uicontrols.$"))a.setAttribute("triggerOptions",JSON.stringify(o.options||{})),o.arguments.unshift(n.triggerID),e=t.apply(a,o.arguments);else if(a&&n.triggerID&&n.action&&$this.event)e=t.apply(a,o.arguments);else{if(!n.method)throw new Error("트리거 컨텍스트 불일치 또는 잘못된 설정입니다.");e=t.apply($this,o.arguments)}$this.hook?.afterTrigger&&$this.hook.afterTrigger(null,n.action,{elID:n.triggerID,result:e})}catch(e){var r="트리거 실행 실패: "+e.message;syn.$l.eventLog("$w.triggerAction",r,"Error"),$this.hook?.afterTrigger&&$this.hook.afterTrigger(r,n.action,null)}}else $this.hook?.afterTrigger&&$this.hook.afterTrigger("hook.beforeTrigger가 false를 반환했습니다",n.action,null)}},getControlModule(t){if(!t)return null;try{return t.split(".").reduce((e,t)=>e?.[t],context)}catch(e){return syn.$l.eventLog("$w.getControlModule",`모듈 경로 "${t}" 접근 오류: `+e,"Warning"),null}},tryAddFunction(d){if(d&&$this?.config)try{d.noProgress=d.noProgress??!1,$this.config.transactions=$this.config.transactions||[];const t=$this.config.transactions;var e=t.findIndex(e=>e.functionID===d.functionID);-1<e&&t.splice(e,1);const u=$this.context?.synControls??[],g=doc?.forms?.[0]?.getAttribute("syn-datafield")??"",p={functionID:d.functionID,transactionResult:d.transactionResult??!0,inputs:[],outputs:[]};(d.inputs||[]).forEach(e=>{const o={requestType:e.type,dataFieldID:e.dataFieldID||g,items:{}},a=e=>!!e&&(Array.isArray(e)?e.includes(d.functionID):d.functionID===e);var t=(e,t)=>e?.storeType===t&&e.dataSourceID===o.dataFieldID&&((e.columns||[]).forEach(e=>{a(e.belongID)&&(o.items[e.data]={fieldID:e.data,dataType:e.dataType||"string"})}),!0);if("Row"===e.type){const r=u.filter(e=>e.formDataFieldID===o.dataFieldID&&!e.type?.includes("grid")&&!e.type?.includes("chart")&&!e.type?.includes("data"));if(0<r.length)r.forEach(t=>{const e=syn.$l.get(t.id+" _hidden")||syn.$l.get(t.id);var n=e?.getAttribute("syn-options")||"{}";try{var r=new Function(`return (${n})`)();r&&t.field&&a(r.belongID)&&(o.items[t.field]={fieldID:t.field,dataType:r.dataType||"string"})}catch(e){syn.$l.eventLog("$w.tryAddFunction.input",t.id+"의 syn - options 파싱 오류: "+e,"Warning")}});else{let e=!1;if(syn.uicontrols?.$data?.storeList)for(const s of syn.uicontrols.$data.storeList)if(t(s,"Form")){e=!0;break}if(!e){var n=u.find(e=>e.field===o.dataFieldID&&(e.type?.includes("grid")||e.type?.includes("chart")));const i=n?syn.$w.getControlModule(n.module):null;i?.setTransactionBelongID?.(n.id,o,d)}}}else if("List"===e.type){n=u.find(e=>e.field===o.dataFieldID&&(e.type?.includes("grid")||e.type?.includes("chart")));const l=n?syn.$w.getControlModule(n.module):null;if(l?.setTransactionBelongID)l.setTransactionBelongID(n.id,o,d);else if(syn.uicontrols?.$data?.storeList){let e=!1;for(const c of syn.uicontrols.$data.storeList)if(t(c,"Grid")){e=!0;break}e||syn.$l.eventLog("$w.tryAddFunction.input",`dataFieldID "${o.dataFieldID}"에 대한 목록(List) 소스를 찾을 수 없습니다.`,"Warning")}}p.inputs.push(o)}),(d.outputs||[]).forEach(a=>{const s={responseType:a.type,dataFieldID:a.dataFieldID||"",items:{}};var t=(e,t)=>e?.storeType===t&&e.dataSourceID===s.dataFieldID&&((e.columns||[]).forEach(e=>{s.items[e.data]={fieldID:e.data,dataType:e.dataType||"string"}}),a.clear&&$this?.store?.[e.dataSourceID]&&(Array.isArray($this.store[e.dataSourceID])?$this.store[e.dataSourceID].length=0:$this.store[e.dataSourceID]={}),!0);if("Form"===a.type){const n=u.filter(e=>e.formDataFieldID===s.dataFieldID&&!e.type?.includes("grid")&&!e.type?.includes("chart")&&!e.type?.includes("data"));if(0<n.length)n.forEach(t=>{const e=syn.$l.get(t.id+" _hidden")||syn.$l.get(t.id);var n=e?.getAttribute("syn-options")||"{}";try{var r=new Function(`return (${n})`)();r&&t.field&&(s.items[t.field]={fieldID:t.field,dataType:r.dataType||"string"})}catch(e){syn.$l.eventLog("$w.tryAddFunction.output",t.id+"의 syn - options 파싱 오류: "+e,"Warning")}if(a.clear){const o=syn.$w.getControlModule(t.module);o?.clear?.(t.id)}});else if(syn.uicontrols?.$data?.storeList){let e=!1;for(const r of syn.uicontrols.$data.storeList)if(t(r,"Form")){e=!0;break}e||syn.$l.eventLog("$w.tryAddFunction.output",`dataFieldID "${s.dataFieldID}"에 대한 폼(Form) 소스를 찾을 수 없습니다.`,"Warning")}}else if("Grid"===a.type){var e=u.find(e=>e.field===s.dataFieldID&&(e.type?.includes("grid")||e.type?.includes("chart")));const o=e?syn.$w.getControlModule(e.module):null;if(o?.setTransactionBelongID)o.setTransactionBelongID(e.id,s),a.clear&&o.clear?.(e.id);else if(syn.uicontrols?.$data?.storeList){let e=!1;for(const i of syn.uicontrols.$data.storeList)if(t(i,"Grid")){e=!0;break}e||syn.$l.eventLog("$w.tryAddFunction.output",`dataFieldID "${s.dataFieldID}"에 대한 그리드(Grid) 소스를 찾을 수 없습니다.`,"Warning")}}p.outputs.push(s)}),t.push(p)}catch(e){syn.$l.eventLog("$w.tryAddFunction",`함수 ${d.functionID} 처리 중 오류 발생: `+e,"Error")}else syn.$l.eventLog("$w.tryAddFunction",`functionID: ${d?.functionID}에 대해 transactConfig가 유효하지 않거나 $this.config가 없습니다.`,"Warning")},transactionAction(e,t){let a=e;if("string"==typeof e){if(!(a=$this?.transaction?.[e]))return void syn.$l.eventLog("$w.transactionAction",`functionID "${e}"에 대한 거래 설정을 찾을 수 없습니다.`,"Warning");a.functionID=a.functionID||e}if(a&&$this?.config)try{let e=!0;var n;(e=$this.hook?.beforeTransaction?$this.hook.beforeTransaction(a):e)??!0?(n=syn.$w.argumentsExtend({message:"",dynamic:"Y",authorize:"N",commandType:"D",returnType:"Json",transactionScope:"N",transactionLog:"Y"},t),a.noProgress=a.noProgress??!1,syn.$w.progressMessage&&!a.noProgress&&syn.$w.progressMessage(n.message),syn.$w.tryAddFunction(a),syn.$w.transaction(a.functionID,(t,n,r)=>{let o=null;if(0<t?.errorText?.length)o=t.errorText[0],syn.$l.eventLog("$w.transactionAction.callback","거래 오류: "+o,"Error");else{let e=null;if("function"==typeof a.callback)try{e=a.callback(o,t,n,r)}catch(e){syn.$l.eventLog("$w.transactionAction.callbackExec","콜백 실행 오류: "+e,"Error")}else Array.isArray(a.callback)&&2===a.callback.length&&setTimeout(()=>{syn.$l.trigger(a.callback[0],a.callback[1],{error:o,result:t,additionalData:n,correlationID:r})},0);null===e||!0===e||Array.isArray(a.callback)?$this.hook?.afterTransaction&&$this.hook.afterTransaction(null,a.functionID,t,n,r):!1===e&&$this.hook?.afterTransaction&&$this.hook.afterTransaction("callbackResult가 false를 반환했습니다",a.functionID,null,null,r)}},n)):(syn.$w.closeProgressMessage&&syn.$w.closeProgressMessage(),$this.hook?.afterTransaction&&$this.hook.afterTransaction("beforeTransaction이 false를 반환했습니다",a.functionID,null,null))}catch(e){syn.$l.eventLog("$w.transactionAction","거래 액션 실행 중 오류 발생: "+e,"Error"),syn.$w.closeProgressMessage&&syn.$w.closeProgressMessage()}else syn.$l.eventLog("$w.transactionAction","거래 설정이 유효하지 않거나 $this 컨텍스트가 없습니다.","Warning")},transactionDirect(e,n,t){if(e){syn.$w.progressMessage&&!0!==e.noProgress&&syn.$w.progressMessage();const r=syn.$w.transactionObject(e.functionID,"Json");r.programID=e.programID||syn.Config.ApplicationID,r.moduleID=e.moduleID||("browser"===globalRoot.devicePlatform?location.pathname.split("/").filter(Boolean)[0]:void 0)||syn.Config.ModuleID,r.businessID=e.businessID||syn.Config.ProjectID,r.systemID=e.systemID||globalRoot.$this?.config?.systemID||syn.Config.SystemID,r.transactionID=e.transactionID,r.dataMapInterface=e.dataMapInterface||"Row|Form",r.transactionResult=e.transactionResult??!0,r.screenID="node"===globalRoot.devicePlatform?e.screenID||e.transactionID:syn.$w.pageScript?.replace("$","")??"",r.startTraceID=e.startTraceID||t?.startTraceID||"";t=syn.$w.argumentsExtend({message:"",dynamic:"Y",authorize:"N",commandType:"D",returnType:"Json",transactionScope:"N",transactionLog:"Y"},t);r.options=t,0<e.inputLists?.length?(r.inputs.push(...e.inputLists),r.inputsItemCount.push(e.inputLists.length)):e.inputObjects&&(r.inputs.push(e.inputObjects),r.inputsItemCount.push(1)),syn.$w.executeTransaction(e,r,(e,t)=>{if(n)try{n(e,t)}catch(e){syn.$l.eventLog("$w.transactionDirect.callback","콜백 오류: "+e,"Error")}})}else syn.$l.eventLog("$w.transactionDirect","directObject 파라미터가 필요합니다.","Error")},transaction(s,r,t){const l={errorText:[],outputStat:[]};try{syn.$w.domainTransactionLoaderStart&&syn.$w.domainTransactionLoaderStart();var e=syn.$w.argumentsExtend({message:"",dynamic:"Y",authorize:"N",commandType:"D",returnType:"Json",transactionScope:"N",transactionLog:"Y"},t);if(syn.$w.progressMessage&&syn.$w.progressMessage(e.message),!$this?.config?.transactions)throw new Error("거래 설정($this.config.transactions)이 없습니다.");var n=$this.config.transactions.filter(e=>e.functionID===s);if(1!==n.length)throw new Error(`functionID "${s}"에 대한 거래 정의를 찾을 수 없거나 중복됩니다.`);const o=n[0],y=syn.$w.transactionObject(o.functionID,"Json"),m=(y.programID=$this.config.programID,y.businessID=$this.config.businessID,y.systemID=$this.config.systemID,y.transactionID=$this.config.transactionID,y.screenID=syn.$w.pageScript?.replace("$","")??"",y.startTraceID=e.startTraceID||"",y.options=e,$this.context?.synControls??[]);o.inputs.forEach(t=>{let e=[];const i=t.dataFieldID,l=(e,t,n)=>{var r;return!t?.validators||!$validation?.transactionValidate||(r=syn.$w.getControlModule(e.module),$validation.transactionValidate(r,e,t,n))};if("Row"===t.requestType){const c=[],d=m.filter(e=>e.field===i||e.formDataFieldID===i);if(0<d.length){const r=d.find(e=>e.type?.includes("grid")||e.type?.includes("chart"));if(r&&r.field===i){const o=syn.$w.getControlModule(r.module);var n=o?.getValue?.(r.id.replace("_hidden",""),"Row",t.items);e=n?.[0]??[]}else Object.entries(t.items).forEach(([t,e])=>{var n=d.find(e=>e.field===t&&e.formDataFieldID===i);const r=n?syn.$l.get(n.id+" _hidden")||syn.$l.get(n.id):null;var o=r?.getAttribute("syn-options")||"{}";try{var a=new Function(`return (${o})`)();if(!l(n,a,"Row"))throw new Error("컨트롤 유효성 검사 실패: "+n?.id);var s=((e,t)=>{if(!e)return t?.dataType?.includes("num")?0:"";const n=syn.$w.getControlModule(e.module);let r=n?.getValue?.(e.id.replace("_hidden",""),t);return r=void 0!==r&&null!==r?r:t?.dataType?.includes("num")?0:""})(n,e);c.push({prop:e.fieldID,val:s})}catch(e){throw new Error(`행(Row) 컨트롤 ${t} 처리 오류: `+e.message)}}),e=c}else if(syn.uicontrols?.$data?.storeList){const a=syn.uicontrols.$data.storeList.find(e=>"Form"===e.storeType&&e.dataSourceID===i);a&&$this.store?.[a.dataSourceID]?(Object.entries(t.items).forEach(([e,t])=>{e=$this.store[a.dataSourceID]?.[e]??(t.dataType?.includes("num")?0:"");c.push({prop:t.fieldID,val:e})}),e=c):syn.$l.eventLog("$w.transaction",`dataFieldID "${i}"에 대한 행(Row) 소스를 찾을 수 없습니다.`,"Warning")}else syn.$l.eventLog("$w.transaction",`dataFieldID "${i}"에 대한 행(Row) 소스를 찾을 수 없습니다.`,"Warning");y.inputs.push(e),y.inputsItemCount.push(1)}else if("List"===t.requestType){let e=[];const s=m.find(e=>e.field===i);if(s){const u=syn.$w.getControlModule(s.module),g=syn.$l.get(s.id+" _hidden")||syn.$l.get(s.id);n=g?.getAttribute("syn-options")||"{}";try{const p=new Function(`return (${n})`)();(p?.columns||[]).forEach(e=>{if(e.controlText=p.controlText||"",!l(s,e,"List"))throw new Error("목록(List) 컨트롤 컬럼 유효성 검사 실패: "+e.data)}),e=u?.getValue?.(s.id.replace("_hidden",""),"List",t.items)??[]}catch(e){throw new Error(`목록(List) 컨트롤 ${i} 처리 오류: `+e.message)}}else if(syn.uicontrols?.$data?.storeList){n=syn.uicontrols.$data.storeList.find(e=>"Grid"===e.storeType&&e.dataSourceID===i);if(n&&$this.store?.[n.dataSourceID]){const f=$this.store[n.dataSourceID];e=f.map(n=>Object.entries(t.items).map(([e,t])=>({prop:t.fieldID,val:n[e]??(t.dataType?.includes("num")?0:"")})))}else syn.$l.eventLog("$w.transaction",`dataFieldID "${i}"에 대한 목록(List) 소스를 찾을 수 없습니다.`,"Warning")}else syn.$l.eventLog("$w.transaction",`dataFieldID "${i}"에 대한 목록(List) 소스를 찾을 수 없습니다.`,"Warning");y.inputs.push(...e),y.inputsItemCount.push(e.length)}}),syn.$w.executeTransaction($this.config,y,(a,t,n)=>{try{if(o.outputs.some(e=>"Dynamic"===e.responseType))l.outputStat.push({fieldID:"Dynamic",count:1,dynamicData:a});else{if(a?.length!==o.outputs.length)throw new Error(`출력 정의(${o.outputs.length})와 응답 데이터(${a?.length??0}) 수가 일치하지 않습니다.`);o.outputs.forEach((i,e)=>{var t,e=a[e],n=e?.id,e=e?.value,r=($this.hook?.outputDataBinding&&$this.hook.outputDataBinding(s,n,e),(t,o,a)=>{const s=m.filter(e=>e.field===o||"Form"===t&&e.formDataFieldID===o);if(0<s.length){const e=s.find(e=>e.field===o)||s[0],n=syn.$w.getControlModule(e.module);if(n?.setValue)return"Form"===t?Object.entries(i.items).forEach(([t,e])=>{const n=s.find(e=>e.field===t&&e.formDataFieldID===o);if(n&&void 0!==a?.[e.fieldID]){const r=syn.$w.getControlModule(n.module);r?.setValue?.(n.id.replace("_hidden",""),a[e.fieldID],e)}}):n.setValue(e.id.replace("_hidden",""),a,i.items),!0}return!1}),o=(t,n,r)=>{if(syn.uicontrols?.$data?.storeList){const o=syn.uicontrols.$data.storeList.find(e=>e.storeType===t&&e.dataSourceID===n);if(o&&$this?.store)return"Form"===t?($this.store[o.dataSourceID]=$this.store[o.dataSourceID]??{},Object.entries(i.items).forEach(([e,t])=>{void 0!==r?.[t.fieldID]&&($this.store[o.dataSourceID][e]=r[t.fieldID])})):$this.store[o.dataSourceID]=(r||[]).map(e=>({...e,Flag:"R"})),!0}return!1};"Form"===i.responseType?(t=e&&0<Object.keys(e).length?1:0,l.outputStat.push({fieldID:n,Count:t}),0<t&&(r("Form",i.dataFieldID,e)||o("Form",i.dataFieldID,e)||(l.errorText.push(`"${i.dataFieldID}" 폼(Form) 출력 매핑 대상을 찾을 수 없습니다.`),syn.$l.eventLog("$w.transaction",`"${i.dataFieldID}" 폼(Form) 출력 매핑 대상을 찾을 수 없습니다.`,"Error")))):"Grid"!==i.responseType&&"Chart"!==i.responseType||(t=e?.length??0,l.outputStat.push({fieldID:n,Count:t}),0<t&&(r(i.responseType,i.dataFieldID,e)||o(i.responseType,i.dataFieldID,e)||(n="Grid"===i.responseType?"그리드(Grid)":"차트(Chart)",l.errorText.push(`"${i.dataFieldID}" ${n} 출력 매핑 대상을 찾을 수 없습니다.`),syn.$l.eventLog("$w.transaction",`"${i.dataFieldID}" ${n} 출력 매핑 대상을 찾을 수 없습니다.`,"Error"))))})}r&&r(l,t,n)}catch(e){l.errorText.push("출력 매핑 오류: "+e.message),syn.$l.eventLog("$w.transaction.outputMap","출력 매핑 오류: "+e,"Error"),r&&r(l,t,n)}finally{syn.$w.domainTransactionLoaderEnd&&syn.$w.domainTransactionLoaderEnd()}})}catch(e){t="거래 설정 오류: "+e.message,l.errorText.push(t),syn.$l.eventLog("$w.transaction",t,"Error"),r&&r(l,null,null),syn.$w.domainTransactionLoaderEnd&&syn.$w.domainTransactionLoaderEnd()}},getterValue(e){const p={errors:[],inputs:[]};let t=e;if("string"!=typeof e||(t=$this?.transaction?.[e])){try{if(syn.$w.tryAddFunction(t),!$this?.config?.transactions)throw new Error("거래 설정($this.config.transactions)이 없습니다.");var n=$this.config.transactions.filter(e=>e.functionID===t.functionID);if(1!==n.length)throw new Error(`functionID "${t.functionID}"에 대한 거래 정의를 찾을 수 없거나 중복됩니다.`);const r=n[0],f=$this.context?.synControls??[];r.inputs.forEach(t=>{let e=[];const r=t.dataFieldID;if("Row"===t.requestType){const o={},a=f.filter(e=>e.field===r||e.formDataFieldID===r);if(0<a.length){const s=a.find(e=>e.type?.includes("grid")||e.type?.includes("chart"));if(s&&s.field===r){const i=syn.$w.getControlModule(s.module);var n=i?.getValue?.(s.id.replace("_hidden",""),"Row",t.items);(e=n?.[0]??[]).forEach(e=>{o[e.prop]=e.val})}else Object.entries(t.items).forEach(([t,e])=>{var n=a.find(e=>e.field===t&&e.formDataFieldID===r);o[e.fieldID]=((e,t)=>{if(!e)return t?.dataType?.includes("num")?0:"";const n=syn.$w.getControlModule(e.module);return n?.getValue?.(e.id.replace("_hidden",""),t)??(t?.dataType?.includes("num")?0:"")})(n,e)})}else if(syn.uicontrols?.$data?.storeList){const l=syn.uicontrols.$data.storeList.find(e=>"Form"===e.storeType&&e.dataSourceID===r);l&&$this.store?.[l.dataSourceID]?Object.entries(t.items).forEach(([e,t])=>{var n=$this.store[l.dataSourceID];o[t.fieldID]=n?.[e]??(t.dataType?.includes("num")?0:"")}):syn.$l.eventLog("$w.getterValue",`dataFieldID "${r}"에 대한 행(Row) 소스를 찾을 수 없습니다.`,"Warning")}else syn.$l.eventLog("$w.getterValue",`dataFieldID "${r}"에 대한 행(Row) 소스를 찾을 수 없습니다.`,"Warning");p.inputs.push(o)}else if("List"===t.requestType){let e=[];const c=f.find(e=>e.field===r);if(c){const d=syn.$w.getControlModule(c.module),u=d?.getValue?.(c.id.replace("_hidden",""),"List",t.items)??[];e=u.map(e=>e.reduce((e,t)=>(e[t.prop]=t.val,e),{}))}else if(syn.uicontrols?.$data?.storeList){n=syn.uicontrols.$data.storeList.find(e=>"Grid"===e.storeType&&e.dataSourceID===r);if(n&&$this.store?.[n.dataSourceID]){const g=$this.store[n.dataSourceID];e=g.map(r=>Object.entries(t.items).reduce((e,[t,n])=>(e[n.fieldID]=r[t]??(n.dataType?.includes("num")?0:""),e),{}))}else syn.$l.eventLog("$w.getterValue",`dataFieldID "${r}"에 대한 목록(List) 소스를 찾을 수 없습니다.`,"Warning")}else syn.$l.eventLog("$w.getterValue",`dataFieldID "${r}"에 대한 목록(List) 소스를 찾을 수 없습니다.`,"Warning");p.inputs.push(...e)}})}catch(e){p.errors.push("Getter 오류: "+e.message),syn.$l.eventLog("$w.getterValue","Getter 오류: "+e,"Error")}return p}syn.$l.eventLog("$w.getterValue",`functionID "${e}"에 대한 거래 설정을 찾을 수 없습니다.`,"Warning")},setterValue(e,a){const s={errors:[],outputs:[]};let t=e;if("string"!=typeof e||(t=$this?.transaction?.[e])){try{if(syn.$w.tryAddFunction(t),!$this?.config?.transactions)throw new Error("거래 설정($this.config.transactions)이 없습니다.");var n=$this.config.transactions.filter(e=>e.functionID===t.functionID);if(1!==n.length)throw new Error(`functionID "${t.functionID}"에 대한 거래 정의를 찾을 수 없거나 중복됩니다.`);const r=n[0],l=$this.context?.synControls??[];if(a?.length!==r.outputs.length)throw new Error(`출력 정의(${r.outputs.length})와 응답 데이터(${a?.length??0}) 수가 일치하지 않습니다.`);r.outputs.forEach((i,e)=>{var t,n=a[e],e=i.responseType+"Data"+e,r=(t,o,a)=>{const s=l.filter(e=>e.field===o||"Form"===t&&e.formDataFieldID===o);if(0===s.length)return!1;const e=s.find(e=>e.field===o)||s[0],n=syn.$w.getControlModule(e.module);return!!n?.setValue&&("Form"===t?Object.entries(i.items).forEach(([t,e])=>{const n=s.find(e=>e.field===t&&e.formDataFieldID===o);if(n&&void 0!==a?.[e.fieldID]){const r=syn.$w.getControlModule(n.module);r?.setValue?.(n.id.replace("_hidden",""),a[e.fieldID],e)}}):n.setValue(e.id.replace("_hidden",""),a,i.items),!0)},o=(t,n,r)=>{if(syn.uicontrols?.$data?.storeList){const o=syn.uicontrols.$data.storeList.find(e=>e.storeType===t&&e.dataSourceID===n);if(o&&$this?.store)return"Form"===t?($this.store[o.dataSourceID]=$this.store[o.dataSourceID]??{},Object.entries(i.items).forEach(([e,t])=>{void 0!==r?.[t.fieldID]&&($this.store[o.dataSourceID][e]=r[t.fieldID])})):$this.store[o.dataSourceID]=(r||[]).map(e=>({...e,Flag:"R"})),!0}return!1};"Form"===i.responseType?(t=n&&0<Object.keys(n).length?1:0,s.outputs.push({fieldID:e,Count:t}),0<t&&(r("Form",i.dataFieldID,n)||o("Form",i.dataFieldID,n)||(s.errors.push(`"${i.dataFieldID}" 폼(Form) 출력 매핑 대상을 찾을 수 없습니다.`),syn.$l.eventLog("$w.setterValue",`"${i.dataFieldID}" 폼(Form) 출력 매핑 대상을 찾을 수 없습니다.`,"Error")))):"Grid"!==i.responseType&&"Chart"!==i.responseType||(t=n?.length??0,s.outputs.push({fieldID:e,Count:t}),0<t&&(r(i.responseType,i.dataFieldID,n)||o(i.responseType,i.dataFieldID,n)||(e="Grid"===i.responseType?"그리드(Grid)":"차트(Chart)",s.errors.push(`"${i.dataFieldID}" ${e} 출력 매핑 대상을 찾을 수 없습니다.`),syn.$l.eventLog("$w.setterValue",`"${i.dataFieldID}" ${e} 출력 매핑 대상을 찾을 수 없습니다.`,"Error"))))})}catch(e){s.errors.push("Setter 오류: "+e.message),syn.$l.eventLog("$w.setterValue","Setter 오류: "+e,"Error")}return s}syn.$l.eventLog("$w.setterValue",`functionID "${e}"에 대한 거래 설정을 찾을 수 없습니다.`,"Warning")},scrollToTop(){if(doc?.documentElement&&context.requestAnimationFrame&&context.scrollTo){const t=()=>{var e=doc.documentElement.scrollTop||doc.body.scrollTop;0<e&&(context.requestAnimationFrame(t),context.scrollTo(0,e-e/8))};context.requestAnimationFrame(t)}},setFavicon(t){if(doc){let e=doc.querySelector('link[rel="icon"]');e?e.href=t:((e=doc.createElement("link")).rel="icon",e.href=t,doc.head?.appendChild(e))}},fileDownload(t,e){if(doc&&t){e=e||t.substring(t.lastIndexOf("/")+1).split(".")[0]||"download";const n=doc.createElement("a");n.href=t,n.download=e,n.style.display="none",doc.body.appendChild(n);try{n.click()}catch(e){syn.$l.eventLog("$w.fileDownload",t+" 다운로드 실행 오류: "+e,"Error")}finally{setTimeout(()=>doc.body.removeChild(n),100)}}},sleep(t,e){if("function"==typeof e)return setTimeout(e,t);if("undefined"!=typeof Promise)return new Promise(e=>setTimeout(e,t));syn.$l.eventLog("$w.sleep","콜백 또는 Promise 지원이 필요합니다.","Debug");for(var n=Date.now();Date.now()<n+t;);},purge(t){if(t){var n=t.attributes;if(n)for(let e=n.length-1;0<=e;e--){const r=n[e].name;if(r.startsWith("on")&&"function"==typeof t[r])try{t[r]=null}catch(e){}}let e=t.firstChild;for(;e;)syn.$w.purge(e),e=e.nextSibling;syn.$l?.events?.removeAllForElement&&syn.$l.events.removeAllForElement(t)}},setServiceObject(e){return syn.$w.serviceObject="string"==typeof e?e:JSON.stringify(e),this},setServiceClientHeader(e){return e.setRequestHeader("CertificationKey","SGFuZFN0YWNr"),!0},xmlParser(e){if("undefined"==typeof DOMParser)return syn.$l.eventLog("$w.xmlParser","이 환경에서는 DOMParser가 지원되지 않습니다.","Error"),null;try{const t=new DOMParser;return t.parseFromString(e,"text/xml")}catch(e){return syn.$l.eventLog("$w.xmlParser","XML 파싱 오류: "+e,"Error"),null}},apiHttp(c){return new Proxy({},{get(e,l){return async function(e,t){if(-1==["send"].indexOf(l))return Promise.resolve({error:l+" 메서드 확인 필요"});t=syn.$w.argumentsExtend({method:"GET"},t);var n,r=null;if(0==$object.isNullOrUndefined(e)&&0==$object.isString(e)){if("GET"==t.method||"HEAD"==t.method?t.method="POST":t.method=t.method||"POST",1==$object.isNullOrUndefined(t.headers)&&(t.headers=new Headers,e instanceof FormData||t.headers.append("Content-Type",t.contentType||"application/json")),syn.Environment&&(n=syn.Environment).Header)for(var o in n.Header)0==t.headers.has(o)&&t.headers.append(o,n.Header[o]);0==t.headers.has("OffsetMinutes")&&t.headers.append("OffsetMinutes",syn.$w.timezoneOffsetMinutes);var a={method:t.method,headers:t.headers,body:e instanceof FormData?e:JSON.stringify(e),redirect:"follow"},s=(0==$object.isNullOrUndefined(t.timeout)&&(i=new AbortController,r=setTimeout(()=>i.abort(),t.timeout),a.signal=i.signal),await fetch(c,a))}else{if(1==$object.isNullOrUndefined(t.headers)&&(t.headers=new Headers,t.headers.append("Content-Type",t.contentType||"application/json")),syn.Environment&&(n=syn.Environment).Header)for(var o in n.Header)0==t.headers.has(o)&&t.headers.append(o,n.Header[o]);0==t.headers.has("OffsetMinutes")&&t.headers.append("OffsetMinutes",syn.$w.timezoneOffsetMinutes);var i,a={method:t.method,headers:t.headers,redirect:"follow"},s=(0==$object.isNullOrUndefined(t.timeout)&&(i=new AbortController,r=setTimeout(()=>i.abort(),t.timeout),a.signal=i.signal),await fetch(c,a))}r&&clearTimeout(r);e={error:"요청 정보 확인 필요"};return 1==s.ok?e=1==(a=s.headers.get("Content-Type")||"").includes("application/json")?await s.json():1==a.includes("text/")?await s.text():await s.blob():(e={error:`상태: ${s.status}, 텍스트: `+await s.text()},syn.$l.eventLog("$w.apiHttp","API HTTP 오류: "+e.error,"Error")),Promise.resolve(e)}}})},xmlHttp(){return new globalRoot.XMLHttpRequest},loadScript(e,t,n){document.getElementsByTagName("head")||document.documentElement.insertBefore(document.createElement("head"),document.documentElement.firstChild);var r,o=document.getElementsByTagName("head")[0],t=t||"id_"+syn.$l.random();return document.getElementById(t)?n():((r=document.createElement("script")).setAttribute("type","text/javascript"),r.setAttribute("id",t),syn.Config&&1==$string.toBoolean(syn.Config.IsClientCaching)?r.setAttribute("src",e):r.setAttribute("src",e+(-1<e.indexOf("?")?"&":"?")+"noCache="+(new Date).getTime()),n&&"function"==typeof n&&(r.onload=function(){n()}),o.insertBefore(r,o.firstChild)),$webform},loadStyle(e,t,n){document.getElementsByTagName("head")||document.documentElement.insertBefore(document.createElement("head"),document.documentElement.firstChild);var r,o=document.getElementsByTagName("head")[0],t=t||"id_"+syn.$l.random();return document.getElementById("scriptID")||((r=document.createElement("link")).setAttribute("rel","stylesheet"),r.setAttribute("type","text/css"),r.setAttribute("id",t),syn.Config&&1==$string.toBoolean(syn.Config.IsClientCaching)?r.setAttribute("href",e):r.setAttribute("href",e+(-1<e.indexOf("?")?"&":"?")+"noCache="+(new Date).getTime()),o.appendChild(r)),n&&"function"==typeof n&&n(),$webform},async fetchScript(moduleUrl){var result=null,moduleName,moduleScript,moduleName=1<moduleUrl.split("/").length?(moduleName=moduleUrl.split("/")[location.pathname.split("/").length-1],2==moduleName.split(".").length?-1<moduleName.indexOf(".")?moduleName.substring(0,moduleName.indexOf(".")):moduleName:""):moduleUrl,module;if(moduleName=moduleName.replaceAll("-","_"),0==$string.isNullOrEmpty(moduleName))try{if("object"==eval("typeof $"+moduleName))var $module=new syn.module,module=$module.extend(eval("$"+moduleName));else{var moduleScript=syn.Config&&1==syn.Config.IsClientCaching?await syn.$w.fetchText(moduleUrl+".js"):await syn.$w.fetchText(moduleUrl+".js?tick="+(new Date).getTime()),isBase64=function(e){var t=!1;return e&&32<e.length&&(1==/^[A-Za-z0-9+/]+={0,2}$/.test(e.substring(0,32))&&(t=!0)),t},moduleFunction;if(1==isBase64(moduleScript)){var decodeError=null,decodeScript;try{decodeScript=syn.$c.LZString.decompressFromBase64(moduleScript),null==decodeScript&&(decodeError="LZString decompress 오류")}catch{decodeError="LZString decompress 오류"}if(decodeError)try{decodeScript=syn.$c.base64Decode(moduleScript),decodeError=null}catch{decodeError="base64Decode 오류"}decodeError?syn.$l.eventLog("$w.fetchScript",decodeError+` 오류, <script src="${moduleUrl}.js"></script> 문법 확인이 필요합니다`,"Error"):moduleScript=decodeScript}module=moduleScript?(moduleFunction="return (function(){var module={};(function(window,module){'use strict';"+moduleScript+";var $module=new syn.module();$module.extend($"+moduleName+");module.exports=$module;})(typeof window!=='undefined'?window:{},typeof module!=='undefined'?module:{});return module.exports;})();",new Function(moduleFunction).call(globalRoot)):new syn.module}if(module.extends&&1==$object.isArray(module.extends))for(var i=0;i<module.extends.length;i++){var name=module.extends[i],result=await syn.$w.fetchText(name+".js"),moduleText=result.substring(result.indexOf("{"),result.lastIndexOf("}")+1),base=eval("("+moduleText+")"),$base=new syn.module;$base.extend(base),module=syn.$w.argumentsExtend($base,module),module.config=syn.$w.argumentsExtend($base.config,module.config),module.prop=syn.$w.argumentsExtend($base.prop,module.prop),module.hook=syn.$w.argumentsExtend($base.hook,module.hook),module.event=syn.$w.argumentsExtend($base.event,module.event),module.model=syn.$w.argumentsExtend($base.model,module.model),module.transaction=syn.$w.argumentsExtend($base.transaction,module.transaction),module.method=syn.$w.argumentsExtend($base.method,module.method),module.message=syn.$w.argumentsExtend($base.message,module.message),$base.hook&&$base.hook.extendLoad&&base.hook.extendLoad(module)}result=module}catch(error){syn.$l.eventLog("$w.fetchScript","스크립트 로드 오류: "+error,"Warning"),moduleScript&&syn.$l.eventLog("$w.fetchScript",'<script src="{0}.js"><\/script> 문법 확인이 필요합니다'.format(moduleUrl),"Error")}return result},async fetchText(t){var e,n={method:"GET",mode:"cors",cache:"default",credentials:"same-origin",headers:{"Content-Type":"text/plain"},redirect:"follow",referrerPolicy:"no-referrer-when-downgrade"},n=syn.$w.getFetchClientOptions?syn.$w.getFetchClientOptions(n):n,r=!1===syn.Config?.IsClientCaching?`${t.includes("?")?"&":"?"} tick = `+Date.now():"",t=t+r;try{const o=await fetch(t,n);return o.ok?await o.text():(e=await o.text().catch(()=>`HTTP ${o.status} `+o.statusText),syn.$l.eventLog("$w.fetchText",t+` Fetch 실패: 상태 ${o.status}, 텍스트: `+e,"Warning"),null)}catch(e){throw syn.$l.eventLog("$w.fetchText",t+" Fetch 오류: "+e,"Error"),e}},async fetchJson(t){var e,n={method:"GET",mode:"cors",cache:"default",credentials:"same-origin",headers:{"Content-Type":"application/json",Accept:"application/json"},redirect:"follow",referrerPolicy:"no-referrer-when-downgrade"},n=syn.$w.getFetchClientOptions?syn.$w.getFetchClientOptions(n):n,r=!1===syn.Config?.IsClientCaching?`${t.includes("?")?"&":"?"} tick = `+Date.now():"",t=t+r;try{const o=await fetch(t,n);if(!o.ok)return e=await o.text().catch(()=>`HTTP ${o.status} `+o.statusText),syn.$l.eventLog("$w.fetchJson",t+` Fetch 실패: 상태 ${o.status}, 텍스트: `+e,"Warning"),null;const a=o.headers.get("Content-Type")||"";return a.includes("application/json")||syn.$l.eventLog("$w.fetchJson",t+`에서 JSON을 예상했지만 Content - Type: ${a}을 받았습니다.`,"Warning"),await o.json()}catch(e){return e instanceof SyntaxError?syn.$l.eventLog("$w.fetchJson",t+" JSON 파싱 오류: "+e,"Error"):syn.$l.eventLog("$w.fetchJson",t+" Fetch 오류: "+e,"Error"),null}},transactionObject(e,t="Json"){e={programID:"",businessID:"",systemID:"",transactionID:"",dataMapInterface:null,transactionResult:!0,functionID:e,screenID:"",startTraceID:"",requestID:null,returnType:t,resultAlias:[],inputsItemCount:[],inputs:[]};return syn.$w.setServiceObject&&syn.$w.setServiceObject(e),e},dynamicType:Object.freeze({DataSet:"0",Json:"1",Scalar:"2",NonQuery:"3",SQLText:"4",SchemeOnly:"5",CodeHelp:"6",Xml:"7",DynamicJson:"8"}),async executeTransaction(f,y,m,e,t){if(1==$object.isNullOrUndefined(f)||1==$object.isNullOrUndefined(y))"browser"===globalRoot.devicePlatform&&alert("서비스 호출에 필요한 거래 정보가 구성되지 않았습니다"),syn.$l.eventLog("$w.executeTransaction","서비스 호출에 필요한 거래 정보 확인 필요","Error");else{var n=syn.Config.SystemID+syn.Config.Environment.substring(0,1)+(1==$string.isNullOrEmpty(syn.Config.LoadModuleID)?"":syn.Config.LoadModuleID),r=null,o=syn.$w.getStorage("apiServices",!1);if("node"===globalRoot.devicePlatform?o&&(r=o[n])?1==$object.isNullOrUndefined(o.BearerToken)&&globalRoot.bearerToken&&(o.BearerToken=globalRoot.bearerToken,syn.$w.setStorage("apiServices",o,!1)):null!=syn.Config.DomainAPIServer?(r=syn.Config.DomainAPIServer,o=o||{},(t||globalRoot.bearerToken)&&(o.BearerToken=t||globalRoot.bearerToken),o[n]=r,syn.$w.setStorage("apiServices",o,!1)):syn.$l.eventLog("$w.executeTransaction","서비스 호출에 필요한 DomainAPIServer 정보 확인 필요","Error"):o&&(r=o[n])?null!=o.BearerToken&&null!=o.BearerToken||!window.bearerToken||(o.BearerToken=window.bearerToken,syn.$w.setStorage("apiServices",o,!1)):null!=syn.Config.DomainAPIServer?(r=syn.Config.DomainAPIServer,o=o||{},window.bearerToken&&(o.BearerToken=window.bearerToken),o[n]=r,syn.$w.setStorage("apiServices",o,!1)):syn.$l.eventLog("$w.executeTransaction","서비스 호출에 필요한 DomainAPIServer 정보 확인 필요","Error"),null==(r=(o=syn.$w.getStorage("apiServices",!1))?o[n]:r))syn.$l.eventLog("$w.executeTransaction","apiService 확인 필요","Fatal");else if(r.exceptionText)syn.$l.eventLog("$w.executeTransaction","apiService 확인 필요 SystemID: {0}, ServerType: {1}, Message: {2}".format(f.systemID,syn.Config.Environment.substring(0,1),r.exceptionText),"Fatal");else{var n=syn.$w.getStorage("ipAddress",!1),a=(1==$object.isNullOrUndefined(n)&&0==$string.isNullOrEmpty(syn.Config.FindClientIPServer)&&(n=await syn.$r.httpFetch(syn.Config.FindClientIPServer||"/checkip").send(null,{method:"GET",redirect:"follow",timeout:1e3})),1==$object.isNullOrUndefined(n)&&(n="localhost"),syn.$w.setStorage("ipAddress",n,!1),""),a=r.Port&&""!=r.Port?"{0}://{1}:{2}{3}".format(r.Protocol,r.IP,r.Port,r.Path):"{0}://{1}{2}".format(r.Protocol,r.IP,r.Path),s=syn.$w.Variable&&syn.$w.Variable.InstallType?syn.$w.Variable.InstallType:"L",i=syn.Config&&syn.Config.Environment?syn.Config.Environment.substring(0,1):"D",l=syn.Config&&syn.Config.Transaction?syn.Config.Transaction.MachineTypeID.substring(0,1):"W",c=(syn.$w.Variable&&syn.$w.Variable.ProgramID?syn.$w.Variable.ProgramID:f.programID).padStart(8,"0"),d=f.businessID.padStart(3,"0").substring(0,3),u=y.transactionID.padStart(6,"0").substring(0,6),g=y.functionID.padStart(4,"0").substring(0,4),p=(syn.$w.User&&syn.$w.User.TokenID?syn.$w.User.TokenID:syn.$l.random(6)).padStart(6,"0").substring(0,6),s=(""+s+i+c+d+u+g+l+p+$date.toString(new Date,"s").substring(0,6)).toUpperCase(),l="",h=(0==$string.isNullOrEmpty(syn.Config.FindGlobalIDServer)&&(r.GlobalID=await syn.$r.httpFetch(syn.Config.FindGlobalIDServer).send({applicationID:c,projectID:d,transactionID:u,serviceID:g,screenID:y.screenID,tokenID:p},{method:"POST",redirect:"follow",timeout:1e3})),l=0==$string.isNullOrEmpty(r.GlobalID)?r.GlobalID:s,{accessToken:t||globalRoot.bearerToken||o.BearerToken,action:"SYN",kind:"BIZ",clientTag:syn.Config.SystemID.concat("|",syn.Config.HostName,"|",syn.Config.Program.ProgramName,"|",syn.Config.Environment.substring(0,1)),loadOptions:{encryptionType:syn.Config.Transaction.EncryptionType,encryptionKey:syn.Config.Transaction.EncryptionKey,platform:"browser"==globalRoot.devicePlatform?syn.$b.platform:globalRoot.devicePlatform},requestID:s,version:syn.Config.Transaction.ProtocolVersion,environment:syn.Config.Environment.substring(0,1),system:{programID:f.programID,moduleID:y.moduleID||("browser"==globalRoot.devicePlatform?globalRoot[syn.$w.pageScript].config.moduleID:void 0)||("browser"==globalRoot.devicePlatform?location.pathname.split("/").filter(Boolean)[0]:void 0)||syn.Config.ModuleID,version:syn.Config.SystemVersion,routes:[{systemID:f.systemID,requestTick:(new Date).getTime()}],localeID:syn.Config.Program.LocaleID,hostName:"browser"==globalRoot.devicePlatform?location.host:syn.Config.HostName,pathName:"browser"==globalRoot.devicePlatform?location.pathname:""},interface:{devicePlatform:globalRoot.devicePlatform,interfaceID:syn.Config.Transaction.MachineTypeID,sourceIP:n,sourcePort:0,sourceMAC:"",connectionType:"node"==globalRoot.devicePlatform?"unknown":navigator.connection.effectiveType,timeout:syn.Config.TransactionTimeout},transaction:{globalID:l,businessID:f.businessID,transactionID:y.transactionID,functionID:y.functionID,commandType:y.options&&y.options.commandType||"D",simulationType:syn.Config.Transaction.SimulationType,terminalGroupID:"browser"==globalRoot.devicePlatform?syn.$w.User?"{0}|{1}".format(syn.$w.User.CompanyID,syn.$w.User.DepartmentID):"":syn.Config.Program.BranchCode,operatorID:"browser"==globalRoot.devicePlatform?syn.$w.User?syn.$w.User.UserID:"":syn.Config.Program.ProgramName,screenID:y.screenID,startTraceID:y.startTraceID,dataFormat:syn.Config.Transaction.DataFormat,compressionYN:syn.Config.Transaction.CompressionYN},payLoad:{property:{},dataMapInterface:"",dataMapCount:[],dataMapSet:[]}});if(syn.$w.transactionLoadOptions&&syn.$w.transactionLoadOptions(h.loadOptions),0==$object.isNullOrUndefined(y.options)){for(var $ in y.options){var v=y.options[$];if("encryptionType"==$||"encryptionKey"==$||"platform"==$)throw new Error("{0} 옵션 사용 불가".format($));h.loadOptions[$]=v}c=h.loadOptions.dynamic,d=(0==$string.isNullOrEmpty(c)&&0==$string.toBoolean(c)&&(delete h.loadOptions.dynamic,delete h.loadOptions.authorize,delete h.loadOptions.commandType,delete h.loadOptions.returnType,delete h.loadOptions.transactionScope,delete h.loadOptions.transactionLog),h.loadOptions.action),u=(0==$string.isNullOrEmpty(d)&&(h.action=d,delete h.loadOptions.action),h.loadOptions.kind);0==$string.isNullOrEmpty(u)&&(h.kind=u,delete h.loadOptions.kind),delete h.loadOptions.message}g=context[syn.$w.pageScript];if(g&&g.hook.payLoadProperty&&(p={},p=g.hook.payLoadProperty(y.transactionID,y.functionID),1==$object.isNullOrUndefined(p)&&(p={}),h.payLoad.property=p),f.transactions?1==(r=f.transactions.filter(function(e){return e.functionID==y.functionID})).length&&(D=(t=r[0]).inputs.map(function(e){return e.requestType}).join(","),o=t.outputs.map(function(e){return e.responseType}).join(","),h.payLoad.dataMapInterface="{0}|{1}".format(D,o)):y.dataMapInterface&&(h.payLoad.dataMapInterface=y.dataMapInterface),"J"!=h.transaction.dataFormat&&"T"!=h.transaction.dataFormat)throw new Error("transaction.dataFormat 확인 필요: {0}".format(h.transaction.dataFormat));h.payLoad.dataMapCount=y.inputsItemCount,h.payLoad.dataMapSet=[],h.payLoad.dataMapSetRaw=[];for(var b=y.inputs.length,w=0;w<b;w++){for(var D=y.inputs[w],I=[],S=0;S<D.length;S++){v=D[S];I.push({id:v.prop,value:v.val})}"Y"==syn.Config.Transaction.CompressionYN?"J"==h.transaction.dataFormat?h.payLoad.dataMapSetRaw.push(syn.$c.LZString.compressToBase64(JSON.stringify(I))):h.payLoad.dataMapSetRaw.push(syn.$c.LZString.compressToBase64($object.toCSV(I,{delimeter:"｜",newline:"↵"}))):"J"==h.transaction.dataFormat?h.payLoad.dataMapSet.push(I):h.payLoad.dataMapSetRaw.push($object.toCSV(I,{delimeter:"｜",newline:"↵"}))}if("node"!=globalThis.devicePlatform&&"PSH"==h.action){s=new Blob([JSON.stringify(h)],{type:"application/json; charset=UTF-8"});navigator.sendBeacon(a,s),syn.$w.domainTransactionLoaderEnd&&syn.$w.domainTransactionLoaderEnd(),syn.$w.closeProgressMessage&&syn.$w.closeProgressMessage()}else{var E=syn.$w.xmlHttp();if(E.open(syn.$w.method,a,!0),E.setRequestHeader("Accept-Language",syn.$w.localeID),E.setRequestHeader("Server-SystemID",f.systemID||syn.Config.SystemID),E.setRequestHeader("Server-BusinessID",f.businessID),syn.Environment)if((i=syn.Environment).Header)for(var v in i.Header)E.setRequestHeader(v,i.Header[v]);if(!syn.$w.setServiceClientHeader||0!=syn.$w.setServiceClientHeader(E)){if(void 0!==e&&1==E.async&&(E.async=e,0==E.async))return E.setRequestHeader("X-Requested-With","HandStack ServiceClient"),E.setRequestHeader("Content-Type","application/json"),E.send(h),E;E.onreadystatechange=function(){if(4===E.readyState)if(200!==E.status)0==E.status?syn.$l.eventLog("$w.executeTransaction","X-Requested 전송 오류","Fatal"):syn.$l.eventLog("$w.executeTransaction","응답 상태 - {0}: ".format(E.statusText)+E.responseText,"Error"),syn.$w.domainTransactionLoaderEnd&&syn.$w.domainTransactionLoaderEnd();else if(!syn.$w.clientTag||!syn.$w.serviceClientInterceptor||!1!==syn.$w.serviceClientInterceptor(syn.$w.clientTag,E)){try{var e=JSON.parse(E.responseText);if(1==y.transactionResult)if(1==e.acknowledge){var t=[],n=e.message;if(null!=e.result.dataSet&&0<e.result.dataSet.length)for(var r=(p=e.result.dataSet).length,o=0;o<r;o++){var a,s,i,l=p[o];e.transaction.simulationType==syn.$w.dynamicType.CodeHelp?t.push({id:l.id,value:l.value}):"J"==e.transaction.dataFormat?"Y"==e.transaction.compressionYN?t.push({id:l.id,value:JSON.parse(syn.$c.LZString.decompressFromBase64(l.value))}):t.push({id:l.id,value:l.value}):f.transactions?(a=f.transactions.find(function(e){return e.functionID==y.functionID}))&&(s=null,0==$object.isEmpty(l.value)&&(s=("Y"==e.transaction.compressionYN?syn.$c.LZString.decompressFromBase64(l.value):l.value).split("＾"),i=$string.toParameterObject(s[0]),s=$string.toJson(s[1],{delimeter:"｜",newline:"↵",meta:i}),"Form"==a.outputs[o].responseType?(s=s[0],1==$object.isNullOrUndefined(s)&&(s={})):1==$object.isNullOrUndefined(s)&&(s=[])),t.push({id:l.id,value:s})):(s=("Y"==e.transaction.compressionYN?syn.$c.LZString.decompressFromBase64(l.value):l.value).split("＾"),i=$string.toParameterObject(s[0]),s=$string.toJson(s[1],{delimeter:"｜",newline:"↵",meta:i}),1==l.id.startsWith("Form")&&(s=s[0],1==$object.isNullOrUndefined(s)?s={}:1==$object.isNullOrUndefined(s)&&(s=[])),t.push({id:l.id,value:s}))}if(m){var c={};if(n.additions&&0<n.additions.length)for(o=0;o<n.additions.length;o++){var d=n.additions[o];"F"==d.code&&1==$object.isNullOrUndefined(c[d.code])?c[d.code]=d.text:"P"!=d.code&&d.code}try{m(t,c,e.correlationID)}catch(e){syn.$l.eventLog("$w.executeTransaction callback","executeTransaction 콜백 오류: "+e,"Error")}}}else{var u=e.exceptionText,g="거래: {0}, 기능: {1} 수행중 오류가 발생하였습니다\nGlobalID: {2}".format(h.transaction.transactionID,h.transaction.functionID,h.transaction.globalID);if(syn.$w.serviceClientException&&syn.$w.serviceClientException("요청오류",g,u),syn.$l.eventLog("$w.executeTransaction","거래 실행 오류: "+u,"Warning"),"browser"===globalRoot.devicePlatform)$this&&$this.hook&&$this.hook.frameEvent&&$this.hook.frameEvent("transactionException",{transactionID:h.transaction.transactionID,functionID:h.transaction.functionID,errorText:u,errorMessage:g});else if(m)try{m([],null,e.correlationID)}catch(e){syn.$l.eventLog("$w.executeTransaction callback","executeTransaction 콜백 오류: "+e,"Error")}}else if(m){if(e&&e.acknowledge&&1==e.acknowledge)try{if(null!=e.result.dataSet&&0<e.result.dataSet.length)for(var p,r=(p=e.result.dataSet).length,o=0;o<r;o++){l=p[o];"J"==e.transaction.dataFormat?"Y"==e.transaction.compressionYN&&(l.value=JSON.parse(syn.$c.LZString.decompressFromBase64(l.value))):l.value="Y"==e.transaction.compressionYN?syn.$c.LZString.decompressFromBase64(l.value):l.value}}catch(e){syn.$l.eventLog("$w.executeTransaction","executeTransaction 오류: "+e,"Error")}try{m(e,null,e.correlationID)}catch(e){syn.$l.eventLog("$w.executeTransaction callback","executeTransaction 콜백 오류: "+e,"Error")}}}catch(e){g="거래: {0}, 기능: {1} 수행중 오류가 발생하였습니다\nGlobalID: {2}".format(h.transaction.transactionID,h.transaction.functionID,h.transaction.globalID);if(syn.$w.serviceClientException&&syn.$w.serviceClientException("요청오류",g,e.stack),syn.$l.eventLog("$w.executeTransaction","executeTransaction 오류: "+e,"Error"),"browser"===globalRoot.devicePlatform)$this&&$this.hook&&$this.hook.frameEvent&&$this.hook.frameEvent("transactionError",{transactionID:h.transaction.transactionID,functionID:h.transaction.functionID,errorText:e.message,errorMessage:g});else if(m)try{m([],null)}catch(e){syn.$l.eventLog("$w.executeTransaction callback","executeTransaction 콜백 오류: "+e,"Error")}}syn.$w.domainTransactionLoaderEnd&&syn.$w.domainTransactionLoaderEnd()}},syn.$l.eventLog("$w.executeTransaction","거래 GlobalID: "+h.transaction.globalID,"Verbose"),E.setRequestHeader("X-Requested-With","HandStack ServiceClient"),E.setRequestHeader("Content-Type","application/json"),E.timeout=syn.Config.TransactionTimeout,E.send(JSON.stringify(h))}}}}},pseudoStyle(e,t,n){var r,o=document.head||(0==document.getElementsByTagName("head").length?null:document.getElementsByTagName("head")[0]);o&&(""==(r=document.getElementById(e)||document.createElement("style")).id&&(r.id=e),r.innerHTML=t+"{"+n+"}",o.appendChild(r))},pseudoStyles(e,t){var n=document.head||(0==document.getElementsByTagName("head").length?null:document.getElementsByTagName("head")[0]);if(n&&1==$object.isArray(t)&&0<t.length){for(var r=document.getElementById(e)||document.createElement("style"),o=(""==r.id&&(r.id=e),[]),a=0,s=t.length;a<s;a++){var i=t[a];o.push(i.selector+"{"+i.cssText+"}")}r.innerHTML=o.join("\n"),n.appendChild(r)}}}),syn&&!syn.Config&&(syn.Config={}),context.$webform=syn.$w=$webform,"node"===globalRoot.devicePlatform){var fs=require("fs"),path=require("path"),filePath,data;process.env.SYN_CONFIG?syn.Config=JSON.parse(process.env.SYN_CONFIG):(filePath=path.join(process.cwd(),"node.config.json"),1==fs.existsSync(filePath)?(data=fs.readFileSync(filePath,"utf8"),syn.Config=JSON.parse(data),process.env.SYN_LogMinimumLevel=syn.Config.LogMinimumLevel||"trace",process.env.SYN_FileLogBasePath=syn.Config.FileLogBasePath||path.join(process.cwd(),"..","log","function","javascript"),process.env.SYN_LocalStoragePath=syn.Config.LocalStoragePath||path.join(process.cwd(),"..","cache","function")):console.error("Node.js 환경설정 파일이 존재하지 않습니다. 파일 경로: {0}".format(filePath))),syn.Config&&1==$string.isNullOrEmpty(syn.Config.DataSourceFilePath)&&(syn.Config.DataSourceFilePath=path.join(process.cwd(),"..","modules","dbclient","module.json"));const browserOnlyMethods=["activeControl","contentLoaded","addReadyCount","removeReadyCount","createSelection","getTriggerOptions","scrollToTop","setFavicon","fileDownload","pseudoStyle","pseudoStyles","isPageLoad","pageReadyTimeout","eventAddReady","eventRemoveReady","moduleReadyIntervalID","remainingReadyIntervalID","remainingReadyCount","defaultControlOptions","mappingModule"];browserOnlyMethods.forEach(e=>{delete $webform[e]})}else{const pathname=location.pathname,pathSegments=pathname.split("/").filter(Boolean);if(0<pathSegments.length){const filename=pathSegments[pathSegments.length-1],pageProject=pathSegments[pathSegments.length-2]||"",pageScript="$"+(filename.includes(".")?filename.substring(0,filename.indexOf(".")):filename);$webform.extend({pageProject:pageProject,pageScript:pageScript})}syn.$l.addEvent(context,"load",()=>{const e=context[$webform.pageScript];e?.hook?.windowLoad?.()});var urlArgs="true"==syn.$r.getCookie("syn.iscache")?"":"?tick="+(new Date).getTime(),isAsyncLoad=0==syn.$b.isIE;if(globalRoot.isLoadConfig=!1,context.synConfig?(syn.Config=syn.$w.argumentsExtend(synConfig,syn.Config),context.synConfig=void 0,globalRoot.isLoadConfig=!0,setTimeout(async function(){await $webform.contentLoaded()})):$webform.loadJson("/"+(context.synConfigName||"syn.config.json")+urlArgs,null,function(e,t){syn.Config=syn.$w.argumentsExtend(t,syn.Config),globalRoot.isLoadConfig=!0,setTimeout(async function(){await $webform.contentLoaded()})},null,isAsyncLoad),context.Configuration&&(syn.Environment=context.Configuration,syn.$l.deepFreeze(syn.Environment),delete context.Configuration),syn.Environment){var environment=syn.Environment;if(environment.Cookie)for(var item in environment.Cookie){var value=syn.$r.getCookie(item);1==$object.isNullOrUndefined(value)&&syn.$r.setCookie(item,environment.Cookie[item])}}"browser"===globalRoot.devicePlatform&&(syn.$b.appName=syn.Config.HostName,syn.$b.appCodeName=syn.Config.ApplicationID)}}(globalRoot),!function(e){"use strict";var u=e.$print||new syn.module;u.extend({base64ExcelFile:null,reportName:`report-${$date.toString(new Date,"d")}.pdf`,datetimeFormat:"yyyy-MM-dd",boolTrue:"○",boolFalse:"×",workItems:[],workActions:[],workData:null,reportifyServer:"",reportifyPath:"/reportify/api/brief",reportifyTemplateUrl:"/reportify/api/index/download-template?reportFileID=",pageExportScheme:"export-scheme",pageExcelToPdf:"excel-to-pdf",concreate(){"browser"==globalRoot.devicePlatform?(window.PDFObject||syn.$w.loadScript("/reportify/lib/pdfobject/pdfobject.min.js"),window.printJS||syn.$w.loadScript("/reportify/lib/print-js/print.min.js")):"node"==globalRoot.devicePlatform&&(u.reportifyServer="http://localhost:8000")},getReportifyUrl(e){return""+u.reportifyServer+u.reportifyPath+"/"+e},getDocumentTemplateUrl(e){return""+u.reportifyServer+u.reportifyTemplateUrl+e},formatDate(e,t){const n={yyyy:e.getFullYear(),MM:("0"+(e.getMonth()+1)).slice(-2),dd:("0"+e.getDate()).slice(-2),HH:("0"+e.getHours()).slice(-2),mm:("0"+e.getMinutes()).slice(-2),ss:("0"+e.getSeconds()).slice(-2)};return t.replace(/yyyy|MM|dd|HH|mm|ss/gi,e=>n[e])},updateOptions(e){e&&(0==$string.isNullOrEmpty(e.base64ExcelFile)&&(u.base64ExcelFile=e.base64ExcelFile),0==$string.isNullOrEmpty(e.reportName)&&(u.reportName=e.reportName),0==$string.isNullOrEmpty(e.datetimeFormat)&&(u.datetimeFormat=e.datetimeFormat),0==$string.isNullOrEmpty(e.boolTrue)&&(u.boolTrue=e.boolTrue),0==$string.isNullOrEmpty(e.boolFalse)&&(u.boolFalse=e.boolFalse))},async generate(e,t){var n={templateID:e,reportName:u.reportName,datetimeFormat:u.datetimeFormat,boolTrue:u.boolTrue,boolFalse:u.boolFalse,workItems:u.workItems,workActions:u.workActions};0==$string.isNullOrEmpty(t)&&(0==(1==t.startsWith("http:")||1==t.startsWith("https:"))&&(t=""+u.reportifyServer+t),u.base64ExcelFile=await u.getUrlToBase64(t)),0==$string.isNullOrEmpty(u.base64ExcelFile)&&(n.base64ExcelFile=u.base64ExcelFile);for(var r=0,o=n.workItems.length;r<o;r++){var a=n.workItems[r];a.options&&1==$object.isObject(a.options)&&(a.options=JSON.stringify(a.options))}for(r=0,o=n.workActions.length;r<o;r++){var s=n.workActions[r];s.options&&1==$object.isObject(s.options)&&(s.options=JSON.stringify(s.options))}return n},addWorkItem(e="workItems",t,n,r,o,a,s,i,l,c){var d;1==$object.isNumber(t)?t||n||r||o||a?syn.$l.eventLog("addWorkItem","document, worksheet, bind, row, col 필수 항목 필요","Warning"):(d={document:t,worksheet:n,bind:r,row:o,col:a,type:s,data:i,step:c},l&&(d.overtake=l),u[e].push(d)):1==$object.isObject(t)&&(t.document&&t.worksheet&&t.bind&&t.row&&t.col?(d={document:t.document,worksheet:t.worksheet,bind:t.bind,row:t.row,col:t.col,type:t.type,data:t.data,step:t.step},t.overtake&&(d.overtake=t.overtake),u[e].push(d)):syn.$l.eventLog("addWorkItem","document, worksheet, bind, row, col 필수 항목 필요","Warning"))},addAtWorkItem(e="workItems",t,n,r,o,a){var s,i;a=a||!0,-1===u[e].findIndex(e=>e.document===t&&e.worksheet===n&&e.datafield===r)?syn.$l.eventLog("addAtWorkItem",`document: ${t}, worksheet: ${n}, datafield: ${r} 항목 확인 필요`,"Warning"):-1===(i=u[e].findIndex(e=>e.document===o.document&&e.worksheet===o.worksheet&&0==$string.isNullOrEmpty(o.datafield)&&e.datafield===o.datafield))?syn.$l.eventLog("addAtWorkItem",`datafield: ${o.datafield} 중복 항목 확인 필요`,"Warning"):(s={document:o.document,worksheet:o.worksheet,datafield:o.datafield,bind:o.bind,row:o.row,col:o.col,type:o.type,data:o.data},o.overtake&&(s.overtake=o.overtake),1==$string.toBoolean(a)?u[e].splice(i+1,0,s):u[e].splice(i,0,s))},removeWorkItem(e="workItems",t,n,r){var o=u[e].findIndex(e=>e.document===t&&e.worksheet===n&&e.datafield===r);-1<o?u[e].splice(o,1):syn.$l.eventLog("removeWorkItem",`document: ${t}, worksheet: ${n}, datafield: ${r} 항목 확인 필요`,"Warning")},updateWorkItem(e="workItems",t,n,r,o){e=u[e].find(e=>e.document===t&&e.worksheet===n&&e.datafield===r);e?Object.assign(e,o):syn.$l.eventLog("updateWorkItem",`document: ${t}, worksheet: ${n}, datafield: ${r} 항목 확인 필요`,"Warning")},bindingWorkItems(e="workItems",t,n){var r,o=JSON.parse(JSON.stringify(t));for(r in n){var a=n[r];if(a)for(var s=0,i=o.length;s<i;s++){var l,c=o[s];1==$object.isNullOrUndefined(c.bind)&&(c.bind="cell"),1==["cell"].includes(c.bind)&&1==a.hasOwnProperty(c.datafield)&&0==Array.isArray(a)?(1==(l=c.bind.split(":")).length||1<l.length&&l[1]==r)&&(c.data=a[c.datafield]||""):1==["item","list"].includes(c.bind.split(":")[0])&&1==Array.isArray(a)&&(1==(l=c.bind.split(":")).length||1<l.length&&l[1]==r)&&(c.data=a.map(t=>c.datafield.map(e=>t[e]||""))),c.bind=c.bind.split(":")[0]}}return u[e]=o},addItem(e,t,n,r,o,a,s,i,l){u.addWorkItem("workItems",e,t,n,r,o,a,s,i,l)},addAtItem(e,t,n,r,o){u.addAtWorkItem("workItems",e,t,n,r,o)},removeItem(e,t,n){u.removeWorkItem("workItems",e,t,n)},updateItem(e,t,n,r){u.updateWorkItem("workItems",e,t,n,r)},bindingItems(e,t){u.bindingWorkItems("workItems",e,t)},addAction(e,t,n,r,o,a,s,i,l){u.addWorkItem("workActions",e,t,n,r,o,a,s,i,l)},addAtAction(e,t,n,r,o){u.addAtWorkItem("workActions",e,t,n,r,o)},removeAction(e,t,n){u.removeWorkItem("workActions",e,t,n)},updateAction(e,t,n,r){u.updateWorkItem("workActions",e,t,n,r)},bindingActions(e,t){u.bindingWorkItems("workActions",e,t)},transformWorkData(e,n){return e.map(t=>n.map(e=>t[e]))},splitDataChunks(e,t,n){var r=[];0<t&&t<=e.length&&r.push(e.slice(0,t));for(var o=t,a=e.length;o<a;o+=n)r.push(e.slice(o,o+n));return r},async renderViewer(e,t,n){(t=syn.$l.getElement(t))&&(parent.syn&&parent.syn.$w.progressMessage&&parent.syn.$w.progressMessage(),n=syn.$w.argumentsExtend({width:"100%",height:"100%",forcePDFJS:!0,PDFJS_URL:"/reportify/lib/pdfjs/web/viewer.html",pdfOpenParams:{navpanes:0,toolbar:0,statusbar:0,view:"FitH"},fallbackLink:'<p>이 브라우저는 인라인 PDF를 지원하지 않습니다. 내용을 확인하려면 PDF를 다운로드하세요. <a href="[url]"> PDF 다운로드 </a> </ p>',excelUrl:"",workData:null},n),e=await u.generate(e,n.excelUrl),null!=n.workItems&&(e.workItems=n.workItems),null!=n.workActions&&(e.workActions=n.workActions),null!=n.workData&&(e.workData=n.workData),(e=await syn.$r.httpRequest("POST",u.getReportifyUrl(u.pageExcelToPdf),e,null,{responseType:"blob"}))&&200==e.status&&(e=syn.$r.createBlobUrl(e.response),PDFObject.embed(e,t,n)),parent.syn&&parent.syn.$w.progressMessage&&parent.syn.$w.closeProgress())},async renderPrint(e,t){parent.syn&&parent.syn.$w.progressMessage&&parent.syn.$w.progressMessage(),t=syn.$w.argumentsExtend({excelUrl:"",workData:null},t);var e=await u.generate(e,t.excelUrl),t=(null!=t.workItems&&(e.workItems=t.workItems),null!=t.workActions&&(e.workActions=t.workActions),null!=t.workData&&(e.workData=t.workData),await syn.$r.httpRequest("POST",u.getReportifyUrl(u.pageExcelToPdf),e,null,{responseType:"blob"}));t&&200==t.status&&(e=syn.$r.createBlobUrl(t.response),printJS(e)),parent.syn&&parent.syn.$w.progressMessage&&parent.syn.$w.closeProgress()},async getUrlToBase64(e){var t=null,e=await syn.$r.httpFetch(e).send();return t=e&&e.error?t:await syn.$l.blobToBase64(e,!0)},async getSchemeText(e,t,n){var r="",e=await u.getUrlToBase64(e);if(e){var o=u.getReportifyUrl(u.pageExportScheme),e={body:{base64ExcelFile:e,indent:$string.toBoolean(n),formatted:$string.toBoolean(t)}},n=await syn.$r.httpRequest("POST",o,e);if(n&&200==n.status){var a,s,r=n.response;if(window.ClipboardJS)return""==(a=syn.$l.get("btn-clipboard-text")||document.createElement("button")).id&&(a.id="btn-clipboard-text",a.style.display="none"),a.setAttribute("data-clipboard-text",r),document.body.appendChild(a),s=new ClipboardJS(a),new Promise((t,n)=>{s.on("success",e=>{s.destroy(),document.body.removeChild(a),t(!0)}),s.on("error",e=>{s.destroy(),document.body.removeChild(a),n(!1)}),a.click()})}else syn.$l.eventLog("getSchemeText","작업 항목 요청 오류: "+o,"Error")}return r},requestReportValue(o,e,t,a){var n={REPORT_ID:"",COMPANY_NO:"",DOCUMENT_FORM_ID:"",DOCUMENT_NO:"",EMPLOYEE_NO:"",PRINT_TYPE:"",ENV:"D"};syn.Config&&syn.Config.Environment&&(n.ENV=syn.Config.Environment.substring(0,1)),e=syn.$w.argumentsExtend(n,e);const s={programID:syn.Config.ApplicationID,businessID:t.businessID||syn.Config.ProjectID||"RPT",transactionID:t.transactionID||e.REPORT_ID,functionID:t.functionID||"PD01",dataMapInterface:t.dataMapInterface||"Row|Form",inputObjects:Object.entries(e).map(([e,t])=>({prop:e,val:t}))};try{syn.$w.transactionDirect(s,function(e){var t={};if(e&&0<e.length)for(var n=0;n<e.length;n++){var r=e[n];t[r.id]=r.value}else syn.$l.moduleEventLog(o,"requestReportValue","보고서 요청 오류, directObject: {0}".format(JSON.stringify(s)),"Error");a(null,t)})}catch(e){a(e,null)}}}),e.$print=syn.$p=u,"node"===globalRoot.devicePlatform&&(delete syn.$p.renderViewer,delete syn.$p.renderPrint,delete syn.$p.getSchemeText)}(globalRoot),!function(e){"use strict";var t=e.$system||new syn.module;t.extend({getDataSource(e,n,r){if(!r)throw new Error("callback 함수 정의 필요");try{var o,t,a=syn.getModuleLibrary(e);a?(o=a.config,1==(t=require("fs")).existsSync(syn.Config.DataSourceFilePath)?t.readFile(syn.Config.DataSourceFilePath,function(e,t){e?r(e,null):(e=JSON.parse(t).ModuleConfig.DataSource,0==$object.isArray(e)?e.DataSourceID===n&&e.ApplicationID===o.ApplicationID&&(e.ProjectID.includes("*")||-1<e.ProjectID.split(",").indexOf(o.ProjectID))?(1==$string.toBoolean(e.IsEncryption)&&(e.ConnectionString=syn.$s.decryptConnectionString(e),e.IsEncryption=!1),r(null,{connectionString:e.ConnectionString,provider:e.DataProvider})):r("DataSourceID: {0}, ApplicationID: {1}, ProjectID: {2} 환경 설정 확인 필요".format(n,o.ApplicationID,o.ProjectID),null):(t=e.find(function(e){return e.DataSourceID==n&&e.ApplicationID===o.ApplicationID&&(e.ProjectID.includes("*")||-1<e.ProjectID.split(",").indexOf(o.ProjectID))}))?(1==$string.toBoolean(t.IsEncryption)&&(t.ConnectionString=syn.$s.decryptConnectionString(t),t.IsEncryption=!1),r(null,{connectionString:t.ConnectionString,provider:t.DataProvider})):r("DataSourceID: {0}, ApplicationID: {1}, ProjectID: {2} 환경 설정 확인 필요".format(n,o.ApplicationID,o.ProjectID),null))}):r("DataSource 설정 파일 경로 확인 필요",null)):r("ModuleID 확인 필요",null)}catch(e){r(e,null)}},decryptConnectionString(t){var e="";if(t&&t.ConnectionString)try{var n,r=$string.split(t.ConnectionString,"."),o=r[0],a=r[1],s=r[2],i=r[3];syn.$c.sha256(o+`.${a}.`+s)===i&&(n=syn.$c.base64Decode(a).padEnd(32,"0").substring(0,32),e=syn.$c.aesDecode(o,n))}catch(e){syn.$l.eventLog("decryptConnectionString",JSON.stringify(t)+" 확인 필요","Error")}return e},getStatement(e,t,n){var r=null,e=syn.getModuleLibrary(e);if(e)try{var o,a=e.featureSQLPath;a&&1==fs.existsSync(a)?((o=require("mybatis-mapper")).createMapper([a]),o.featureSQLPath=a,r=o.getStatement("feature",t,n)):syn.$l.eventLog("getStatement","featureSQLPath - {0} 확인 필요".format(a),"Error")}catch(e){syn.$l.eventLog("getStatement",e,"Error")}else syn.$l.eventLog("getStatement","ModuleID 확인 필요","Error");return r},executeQuery(d,u,g,p){var e=syn.getModuleLibrary(d);e?(e=e.config,syn.$s.getDataSource(d,e.DataSourceID,function(e,t){if(e)p&&p(e,null);else if("SqlServer"==t.provider)(r=require("mssql")).connect(t.connectionString,function(e){if(e)p&&p(e,null);else{var t="";try{null==(t=syn.$s.getStatement(d,u,g))&&(n="moduleID: {0}, statementID: {1}- 쿼리 매핑 확인 필요".format(d,u),syn.$l.eventLog("getStatement",n,"Error"),p&&p(n,null)),t=t.replace(/\\\"/g,'"'),1==$string.isNullOrEmpty(t.trim())&&(n="moduleID: {0}, statementID: {1}- SQL 내용 없음".format(d,u,e.message),syn.$l.eventLog("getStatement",n,"Error"),p&&p(n,null))}catch(e){r.close();var n="moduleID: {0}, statementID: {1}- {2}".format(d,u,e.message);syn.$l.eventLog("getStatement",n,"Error"),p&&p(n,null)}p?r.query(t,function(e,t){r.close(),e?(e="moduleID: {0}, statementID: {1}- {2}".format(d,u,e.message),syn.$l.eventLog("getStatement",e,"Error"),p&&p(e,null)):p(null,t)}):r.query(t,function(e,t){r.close(),e&&(e="moduleID: {0}, statementID: {1}- {2}".format(d,u,e.message),syn.$l.eventLog("getStatement",e,"Error"))})}});else if("MySQL"==t.provider){for(var r,e=require("mysql"),n=t.connectionString.split(";"),o={host:"localhost",user:"",password:"",database:"",multipleStatements:!0},a=n.length,s=0;s<a;s++)-1<(i=n[s]).indexOf("Server=")?o.host=i.substring(7):-1<i.indexOf("Uid=")?o.user=i.substring(4):-1<i.indexOf("Pwd=")?o.password=i.substring(4):-1<i.indexOf("Database=")?o.database=i.substring(9):-1<i.indexOf("Timeout=")&&(o.connectTimeout=i.substring(8));(r=e.createConnection(o)).connect(function(e){if(e)p&&p(e,null);else{var t="";try{t=(t=syn.$s.getStatement(d,u,g)).replace(/\\\"/g,'"'),1==$string.isNullOrEmpty(t.trim())&&(n="moduleID: {0}, statementID: {1}- SQL 내용 없음".format(d,u,e.message),syn.$l.eventLog("getStatement",n,"Error"),p&&p(n,null))}catch(e){r.end();var n="moduleID: {0}, statementID: {1}- {2}".format(d,u,e.message);syn.$l.eventLog("getStatement",n,"Error"),p&&p(n,null)}p?r.query(t,function(e,t){r.end(),e?(e="moduleID: {0}, statementID: {1}- {2}".format(d,u,e.message),syn.$l.eventLog("getStatement",e,"Error"),p&&p(e,null)):p(null,t)}):r.query(t,function(e,t){r.end(),e&&(e="moduleID: {0}, statementID: {1}- {2}".format(d,u,e.message),syn.$l.eventLog("getStatement",e,"Error"))})}})}else if("Oracle"==t.provider){for(var i,e=require("oracledb"),l=t.connectionString.split(";"),c={user:"",password:"",connectString:t.connectionString},a=l.length,s=0;s<a;s++)-1<(i=l[s]).indexOf("User Id=")?c.user=i.substring(8):-1<i.indexOf("Password=")&&(c.password=i.substring(9));e.getConnection(c,function(e,n){if(e)p&&p(e,null);else{var t="";try{t=(t=syn.$s.getStatement(d,u,g)).replace(/\\\"/g,'"'),1==$string.isNullOrEmpty(t.trim())&&(r="moduleID: {0}, statementID: {1}- SQL 내용 없음".format(d,u,e.message),syn.$l.eventLog("getStatement",r,"Error"),p&&p(r,null))}catch(e){n.close();var r="moduleID: {0}, statementID: {1}- {2}".format(d,u,e.message);syn.$l.eventLog("getStatement",r,"Error"),p&&p(r,null)}p?n.execute(t,function(e,t){n.close(),e?(e="moduleID: {0}, statementID: {1}- {2}".format(d,u,e.message),syn.$l.eventLog("getStatement",e,"Error"),p&&p(e,null)):p(null,t)}):n.execute(t,function(e,t){n.close(),e&&(e="moduleID: {0}, statementID: {1}- {2}".format(d,u,e.message),syn.$l.eventLog("getStatement",e,"Error"))})}})}else p('데이터 원본 "{0}" 확인 필요'.format(t.provider),null)})):p("ModuleID 확인 필요",null)}}),e.$system=syn.$s=t}(globalRoot),"node"===globalRoot.devicePlatform&&(fs=require("fs"),path=require("path"),"undefined"!=typeof localStorage&&null!==localStorage||(LocalStorage=require("node-localstorage").LocalStorage,globalRoot.localStorage=new LocalStorage(process.env.SYN_LocalStoragePath||"../cache/function")),moduleLogDirectory=path.join(process.env.SYN_FileLogBasePath||"../log/function/javascript",syn.Config.ApplicationID,syn.Config.ProjectID),0==fs.existsSync(moduleLogDirectory)&&fs.mkdirSync(moduleLogDirectory,{recursive:!0}),void 0!==globalRoot.$logger&&null!==globalRoot.$logger||(options={logDirectory:moduleLogDirectory,fileNamePattern:"{0}_function_<DATE>.log".format(syn.Config.ApplicationID),dateFormat:"YYYYMMDD"},logger=require("simple-node-logger").createRollingFileLogger(options),logger.setLevel(process.env.SYN_LogMinimumLevel||"trace"),globalRoot.$logger=logger),syn&&!syn.initializeModuleScript&&(syn.initializeModuleScript=function(functionID,moduleFileName){var result=null;if(moduleFileName)try{var fileDirectory=path.dirname(moduleFileName),fileDirectoryName=path.basename(fileDirectory),moduleID=functionID,functionModule=syn.functionModules[moduleID],functionModule,featureSQLPath,moduleLogDirectory,options,logger,result=(null==functionModule&&(functionModule={path:fileDirectory,config:eval("("+fs.readFileSync(moduleFileName.replace("featureMain.js","featureMeta.json"),"utf8")+")").Header,featureSQLPath:null,logger:null},featureSQLPath=path.join(fileDirectory,"featureSQL.xml"),1==fs.existsSync(featureSQLPath)&&(functionModule.featureSQLPath=featureSQLPath),moduleLogDirectory=path.join(process.env.SYN_FileLogBasePath||"../log/function/javascript",functionModule.config.ApplicationID,functionModule.config.ProjectID,fileDirectoryName),0==fs.existsSync(moduleLogDirectory)&&fs.mkdirSync(moduleLogDirectory,{recursive:!0}),options={logDirectory:moduleLogDirectory,fileNamePattern:"{0}_<DATE>.log".format(fileDirectoryName),dateFormat:"YYYYMMDD"},logger=require("simple-node-logger").createRollingFileLogger(options),logger.setLevel(process.env.SYN_LogMinimumLevel||"trace"),functionModule.logger=logger,syn.functionModules[moduleID]=functionModule),moduleID)}catch(error){console.log(error)}else console.log(moduleFileName+" 모듈 확인 필요");return result}),syn&&!syn.getModuleLibrary&&(syn.getModuleLibrary=function(e,t){var n=null,n=syn.functionModules[e];return 1==$object.isNullOrUndefined(n)&&t&&(syn.initializeModuleScript(e,t),n=syn.functionModules[e]),n}),globalRoot.XMLHttpRequest=require("xmlhttprequest").XMLHttpRequest,syn.functionModules={});